"use strict";var AblePlayerInstances=[];!function($){$(document).ready((function(){$("video, audio").each((function(index,element){void 0!==$(element).data("able-player")&&AblePlayerInstances.push(new AblePlayer($(this),$(element)))}))})),window.onYouTubeIframeAPIReady=function(){AblePlayer.youtubeIframeAPIReady=!0,$("body").trigger("youtubeIframeAPIReady",[])},$(window).keydown((function(e){1===AblePlayer.nextIndex&&AblePlayer.lastCreated.onPlayerKeyPress(e)})),window.AblePlayer=function(media){if(AblePlayer.lastCreated=this,this.media=media,0!==$(media).length){if(void 0!==$(media).attr("autoplay")?(this.autoplay=!0,this.okToPlay=!0):(this.autoplay=!1,this.okToPlay=!1),void 0!==$(media).attr("loop")?this.loop=!0:this.loop=!1,void 0!==$(media).attr("playsinline")?this.playsInline="1":this.playsInline="0",$(media).attr("poster")?this.hasPoster=!0:this.hasPoster=!1,void 0!==$(media).data("start-time")&&$.isNumeric($(media).data("start-time"))?this.startTime=$(media).data("start-time"):this.startTime=0,void 0!==$(media).data("debug")&&!1!==$(media).data("debug")?this.debug=!0:this.debug=!1,void 0!==$(media).data("root-path")?this.rootPath=$(media).data("root-path").replace(/\/?$/,"/"):this.rootPath=this.getRootPath(),this.defaultVolume=7,void 0!==$(media).data("volume")&&""!==$(media).data("volume")){var volume=$(media).data("volume");volume>=0&&volume<=10&&(this.defaultVolume=volume)}if(this.volume=this.defaultVolume,void 0!==$(media).data("use-chapters-button")&&!1===$(media).data("use-chapters-button")?this.useChaptersButton=!1:this.useChaptersButton=!0,void 0!==$(media).data("use-descriptions-button")&&!1===$(media).data("use-descriptions-button")?this.useDescriptionsButton=!1:this.useDescriptionsButton=!0,void 0!==$(media).data("descriptions-audible")&&!1===$(media).data("descriptions-audible")?this.exposeTextDescriptions=!1:void 0!==$(media).data("description-audible")&&!1===$(media).data("description-audible")?this.exposeTextDescriptions=!1:this.exposeTextDescriptions=!0,void 0!==$(media).data("heading-level")&&""!==$(media).data("heading-level")){var headingLevel=$(media).data("heading-level");/^[0-6]*$/.test(headingLevel)&&(this.playerHeadingLevel=headingLevel)}if(void 0!==$(media).data("transcript-div")&&""!==$(media).data("transcript-div")?this.transcriptDivLocation=$(media).data("transcript-div"):this.transcriptDivLocation=null,void 0!==$(media).data("include-transcript")&&!1===$(media).data("include-transcript")?this.hideTranscriptButton=!0:this.hideTranscriptButton=null,this.transcriptType=null,void 0!==$(media).data("transcript-src")?(this.transcriptSrc=$(media).data("transcript-src"),this.transcriptSrcHasRequiredParts()&&(this.transcriptType="manual")):$(media).find('track[kind="captions"], track[kind="subtitles"]').length>0&&(this.transcriptDivLocation?this.transcriptType="external":this.transcriptType="popup"),void 0!==$(media).data("lyrics-mode")&&!1!==$(media).data("lyrics-mode")?this.lyricsMode=!0:this.lyricsMode=!1,void 0!==$(media).data("transcript-title")&&""!==$(media).data("transcript-title")&&(this.transcriptTitle=$(media).data("transcript-title")),"overlay"===$(media).data("captions-position")?this.defaultCaptionsPosition="overlay":this.defaultCaptionsPosition="below",void 0!==$(media).data("chapters-div")&&""!==$(media).data("chapters-div")&&(this.chaptersDivLocation=$(media).data("chapters-div")),void 0!==$(media).data("chapters-title")&&(this.chaptersTitle=$(media).data("chapters-title")),void 0!==$(media).data("chapters-default")&&""!==$(media).data("chapters-default")?this.defaultChapter=$(media).data("chapters-default"):this.defaultChapter=null,"arrows"===$(media).data("speed-icons")?this.speedIcons="arrows":this.speedIcons="animals","chapter"===$(media).data("seekbar-scope")||"chapters"===$(media).data("seekbar-scope")?this.seekbarScope="chapter":this.seekbarScope="video",void 0!==$(media).data("youtube-id")&&""!==$(media).data("youtube-id")&&(this.youTubeId=$(media).data("youtube-id")),void 0!==$(media).data("youtube-desc-id")&&""!==$(media).data("youtube-desc-id")&&(this.youTubeDescId=$(media).data("youtube-desc-id")),void 0!==$(media).data("youtube-nocookie")&&$(media).data("youtube-nocookie")?this.youTubeNoCookie=!0:this.youTubeNoCookie=!1,void 0!==$(media).data("vimeo-id")&&""!==$(media).data("vimeo-id")&&(this.vimeoId=$(media).data("vimeo-id")),void 0!==$(media).data("vimeo-desc-id")&&""!==$(media).data("vimeo-desc-id")&&(this.vimeoDescId=$(media).data("vimeo-desc-id")),"2020"==$(media).data("skin")?this.skin="2020":this.skin="legacy",this.iconType="font",this.forceIconType=!1,void 0!==$(media).data("icon-type")&&""!==$(media).data("icon-type")){var iconType=$(media).data("icon-type");"font"!==iconType&&"image"!=iconType&&"svg"!=iconType||(this.iconType=iconType,this.forceIconType=!0)}if(void 0!==$(media).data("allow-fullscreen")&&!1===$(media).data("allow-fullscreen")?this.allowFullScreen=!1:this.allowFullScreen=!0,this.defaultSeekInterval=10,this.useFixedSeekInterval=!1,void 0!==$(media).data("seek-interval")&&""!==$(media).data("seek-interval")){var seekInterval=$(media).data("seek-interval");/^[1-9][0-9]*$/.test(seekInterval)&&(this.seekInterval=seekInterval,this.useFixedSeekInterval=!0)}if(void 0!==$(media).data("show-now-playing")&&!1===$(media).data("show-now-playing")?this.showNowPlaying=!1:this.showNowPlaying=!0,void 0!==$(media).data("use-ttml")?(this.useTtml=!0,this.convert=require("xml-js")):this.useTtml=!1,void 0!==$(media).data("test-fallback")&&!1!==$(media).data("test-fallback")&&(this.testFallback=!0),this.lang="en",void 0!==$(media).data("lang")&&""!==$(media).data("lang")){var lang=$(media).data("lang");2==lang.length&&(this.lang=lang)}void 0!==$(media).data("force-lang")&&!1!==$(media).data("force-lang")?this.forceLang=!0:this.forceLang=!1,void 0!==$(media).data("meta-type")&&""!==$(media).data("meta-type")&&(this.metaType=$(media).data("meta-type")),void 0!==$(media).data("meta-div")&&""!==$(media).data("meta-div")&&(this.metaDiv=$(media).data("meta-div")),void 0!==$(media).data("search")&&""!==$(media).data("search")&&(void 0!==$(media).data("search-div")&&""!==$(media).data("search-div")&&(this.searchString=$(media).data("search"),this.searchDiv=$(media).data("search-div")),void 0!==$(media).data("search-lang")&&""!==$(media).data("search-lang")?this.searchLang=$(media).data("search-lang"):this.searchLang=null,void 0!==$(media).data("search-div")&&""!==$(media).data("search-div")&&(this.searchString=$(media).data("search"),this.searchDiv=$(media).data("search-div"))),void 0!==$(media).data("hide-controls")&&!1!==$(media).data("hide-controls")?(this.hideControls=!0,this.hideControlsOriginal=!0):(this.hideControls=!1,this.hideControlsOriginal=!1),void 0!==$(media).data("steno-mode")&&!1!==$(media).data("steno-mode")?this.stenoMode=!0:this.stenoMode=!1,this.setDefaults(),this.ableIndex=AblePlayer.nextIndex,AblePlayer.nextIndex+=1,this.title=$(media).attr("title"),this.tt={};var thisObj=this;$.when(this.getTranslationText()).then((function(){thisObj.countProperties(thisObj.tt)>50?thisObj.setup():thisObj.provideFallback()}))}else this.provideFallback()},AblePlayer.nextIndex=0,AblePlayer.prototype.setup=function(){var thisObj=this;this.initializing=!0,this.reinitialize().then((function(){thisObj.player?thisObj.setupInstance().then((function(){thisObj.setupInstancePlaylist(),thisObj.hasPlaylist||thisObj.recreatePlayer(),thisObj.initializing=!1,thisObj.playerCreated=!0})):thisObj.provideFallback()}))},AblePlayer.getActiveDOMElement=function(){for(var activeElement=document.activeElement;activeElement.shadowRoot&&activeElement.shadowRoot.activeElement;)activeElement=activeElement.shadowRoot.activeElement;return activeElement},AblePlayer.localGetElementById=function(element,id){return element.getRootNode?$(element.getRootNode().querySelector("#"+id)):$(document.getElementById(id))},AblePlayer.youtubeIframeAPIReady=!1,AblePlayer.loadingYoutubeIframeAPI=!1}(jQuery),function($){AblePlayer.prototype.setDefaults=function(){this.playerCreated=!1,this.playing=!1,this.paused=!0,this.clickedPlay=!1,this.fullscreen=!1,this.swappingSrc=!1,this.initializing=!1,this.cueingPlaylistItems=!1,this.okToPlay=!1,this.buttonWithFocus=null,this.getUserAgent(),this.setIconColor(),this.setButtonImages()},AblePlayer.prototype.getRootPath=function(){var scripts,i,scriptSrc,scriptFile,fullPath,ablePath,parentFolderIndex,rootPath;for(scripts=document.getElementsByTagName("script"),i=0;i<scripts.length;i++)if(-1!==(scriptFile=(scriptSrc=scripts[i].src).substr(scriptSrc.lastIndexOf("/"))).indexOf("ableplayer")){fullPath=scriptSrc.split("?")[0];break}return parentFolderIndex=(ablePath=fullPath.split("/").slice(0,-1).join("/")).lastIndexOf("/"),rootPath=ablePath.substring(0,parentFolderIndex)+"/"},AblePlayer.prototype.setIconColor=function(){var $elements,i,$el,bgColor,rgb,red,green,blue,luminance,iconColor;for($elements=["controller","toolbar"],i=0;i<$elements.length;i++)"controller"==$elements[i]?$el=$("<div>",{class:"able-controller"}).hide():"toolbar"===$elements[i]&&($el=$("<div>",{class:"able-window-toolbar"}).hide()),$("body").append($el),iconColor=(luminance=.2126*(red=(rgb=(bgColor=$el.css("background-color")).replace(/[^\d,]/g,"").split(","))[0])+.7152*(green=rgb[1])+.0722*(blue=rgb[2]))<125?"white":"black","controller"===$elements[i]?this.iconColor=iconColor:"toolbar"===$elements[i]&&(this.toolbarIconColor=iconColor),$el.remove()},AblePlayer.prototype.setButtonImages=function(){this.imgPath=this.rootPath+"button-icons/"+this.iconColor+"/",this.playButtonImg=this.imgPath+"play.png",this.pauseButtonImg=this.imgPath+"pause.png",this.restartButtonImg=this.imgPath+"restart.png",this.rewindButtonImg=this.imgPath+"rewind.png",this.forwardButtonImg=this.imgPath+"forward.png",this.previousButtonImg=this.imgPath+"previous.png",this.nextButtonImg=this.imgPath+"next.png","arrows"===this.speedIcons?(this.fasterButtonImg=this.imgPath+"slower.png",this.slowerButtonImg=this.imgPath+"faster.png"):"animals"===this.speedIcons&&(this.fasterButtonImg=this.imgPath+"rabbit.png",this.slowerButtonImg=this.imgPath+"turtle.png"),this.captionsButtonImg=this.imgPath+"captions.png",this.chaptersButtonImg=this.imgPath+"chapters.png",this.signButtonImg=this.imgPath+"sign.png",this.transcriptButtonImg=this.imgPath+"transcript.png",this.descriptionsButtonImg=this.imgPath+"descriptions.png",this.fullscreenExpandButtonImg=this.imgPath+"fullscreen-expand.png",this.fullscreenCollapseButtonImg=this.imgPath+"fullscreen-collapse.png",this.prefsButtonImg=this.imgPath+"preferences.png",this.helpButtonImg=this.imgPath+"help.png"},AblePlayer.prototype.getSvgData=function(button){var svg=Array();switch(button){case"play":svg[0]="0 0 16 20",svg[1]="M0 18.393v-16.429q0-0.29 0.184-0.402t0.441 0.033l14.821 8.237q0.257 0.145 0.257 0.346t-0.257 0.346l-14.821 8.237q-0.257 0.145-0.441 0.033t-0.184-0.402z";break;case"pause":svg[0]="0 0 20 20",svg[1]="M0 18.036v-15.714q0-0.29 0.212-0.502t0.502-0.212h5.714q0.29 0 0.502 0.212t0.212 0.502v15.714q0 0.29-0.212 0.502t-0.502 0.212h-5.714q-0.29 0-0.502-0.212t-0.212-0.502zM10 18.036v-15.714q0-0.29 0.212-0.502t0.502-0.212h5.714q0.29 0 0.502 0.212t0.212 0.502v15.714q0 0.29-0.212 0.502t-0.502 0.212h-5.714q-0.29 0-0.502-0.212t-0.212-0.502z";break;case"stop":svg[0]="0 0 20 20",svg[1]="M0 18.036v-15.714q0-0.29 0.212-0.502t0.502-0.212h15.714q0.29 0 0.502 0.212t0.212 0.502v15.714q0 0.29-0.212 0.502t-0.502 0.212h-15.714q-0.29 0-0.502-0.212t-0.212-0.502z";break;case"restart":svg[0]="0 0 20 20",svg[1]="M18 8h-6l2.243-2.243c-1.133-1.133-2.64-1.757-4.243-1.757s-3.109 0.624-4.243 1.757c-1.133 1.133-1.757 2.64-1.757 4.243s0.624 3.109 1.757 4.243c1.133 1.133 2.64 1.757 4.243 1.757s3.109-0.624 4.243-1.757c0.095-0.095 0.185-0.192 0.273-0.292l1.505 1.317c-1.466 1.674-3.62 2.732-6.020 2.732-4.418 0-8-3.582-8-8s3.582-8 8-8c2.209 0 4.209 0.896 5.656 2.344l2.344-2.344v6z";break;case"rewind":svg[0]="0 0 20 20",svg[1]="M11.25 3.125v6.25l6.25-6.25v13.75l-6.25-6.25v6.25l-6.875-6.875z";break;case"forward":svg[0]="0 0 20 20",svg[1]="M10 16.875v-6.25l-6.25 6.25v-13.75l6.25 6.25v-6.25l6.875 6.875z";break;case"previous":svg[0]="0 0 20 20",svg[1]="M5 17.5v-15h2.5v6.875l6.25-6.25v13.75l-6.25-6.25v6.875z";break;case"next":svg[0]="0 0 20 20",svg[1]="M15 2.5v15h-2.5v-6.875l-6.25 6.25v-13.75l6.25 6.25v-6.875z";break;case"slower":svg[0]="0 0 20 20",svg[1]="M0 7.321q0-0.29 0.212-0.502t0.502-0.212h10q0.29 0 0.502 0.212t0.212 0.502-0.212 0.502l-5 5q-0.212 0.212-0.502 0.212t-0.502-0.212l-5-5q-0.212-0.212-0.212-0.502z";break;case"faster":svg[0]="0 0 11 20",svg[1]="M0 12.411q0-0.29 0.212-0.502l5-5q0.212-0.212 0.502-0.212t0.502 0.212l5 5q0.212 0.212 0.212 0.502t-0.212 0.502-0.502 0.212h-10q-0.29 0-0.502-0.212t-0.212-0.502z";break;case"turtle":svg[0]="0 0 20 20",svg[1]="M17.212 3.846c-0.281-0.014-0.549 0.025-0.817 0.144-1.218 0.542-1.662 2.708-2.163 3.942-1.207 2.972-7.090 4.619-11.755 5.216-0.887 0.114-1.749 0.74-2.428 1.466 0.82-0.284 2.126-0.297 2.74 0.144 0.007 0.488-0.376 1.062-0.625 1.37-0.404 0.5-0.398 0.793 0.12 0.793 0.473 0 0.752 0.007 1.635 0 0.393-0.003 0.618-0.16 1.49-1.49 3.592 0.718 5.986-0.264 5.986-0.264s0.407 1.755 1.418 1.755h1.49c0.633 0 0.667-0.331 0.625-0.433-0.448-1.082-0.68-1.873-0.769-2.5-0.263-1.857 0.657-3.836 2.524-5.457 0.585 0.986 2.253 0.845 2.909-0.096s0.446-2.268-0.192-3.221c-0.49-0.732-1.345-1.327-2.188-1.37zM8.221 4.663c-0.722-0.016-1.536 0.111-2.5 0.409-4.211 1.302-4.177 4.951-3.51 5.745 0 0-0.955 0.479-0.409 1.274 0.448 0.652 3.139 0.191 5.409-0.529s4.226-1.793 5.312-2.692c0.948-0.785 0.551-2.106-0.505-1.947-0.494-0.98-1.632-2.212-3.798-2.26zM18.846 5.962c0.325 0 0.577 0.252 0.577 0.577s-0.252 0.577-0.577 0.577c-0.325 0-0.577-0.252-0.577-0.577s0.252-0.577 0.577-0.577z";break;case"rabbit":svg[0]="0 0 20 20",svg[1]="M10.817 0c-2.248 0-1.586 0.525-1.154 0.505 1.551-0.072 5.199 0.044 6.851 2.428 0 0-1.022-2.933-5.697-2.933zM10.529 0.769c-2.572 0-2.837 0.51-2.837 1.106 0 0.545 1.526 0.836 2.524 0.697 2.778-0.386 4.231-0.12 5.264 0.865-1.010 0.779-0.75 1.401-1.274 1.851-1.093 0.941-2.643-0.673-4.976-0.673-2.496 0-4.712 1.92-4.712 4.76-0.157-0.537-0.769-0.913-1.442-0.913-0.974 0-1.514 0.637-1.514 1.49 0 0.769 1.13 1.791 2.861 0.938 0.499 1.208 2.265 1.364 2.452 1.418 0.538 0.154 1.875 0.098 1.875 0.865 0 0.794-1.034 1.094-1.034 1.707 0 1.070 1.758 0.873 2.284 1.034 1.683 0.517 2.103 1.214 2.788 2.212 0.771 1.122 2.572 1.408 2.572 0.625 0-3.185-4.413-4.126-4.399-4.135 0.608-0.382 2.139-1.397 2.139-3.534 0-1.295-0.703-2.256-1.755-2.861 1.256 0.094 2.572 1.205 2.572 2.74 0 1.877-0.653 2.823-0.769 2.957 1.975-1.158 3.193-3.91 3.029-6.37 0.61 0.401 1.27 0.577 1.971 0.625 0.751 0.052 1.475-0.225 1.635-0.529 0.38-0.723 0.162-2.321-0.12-2.837-0.763-1.392-2.236-1.73-3.606-1.683-1.202-1.671-3.812-2.356-5.529-2.356zM1.37 3.077l-0.553 1.538h3.726c0.521-0.576 1.541-1.207 2.284-1.538h-5.457zM18.846 5.192c0.325 0 0.577 0.252 0.577 0.577s-0.252 0.577-0.577 0.577c-0.325 0-0.577-0.252-0.577-0.577s0.252-0.577 0.577-0.577zM0.553 5.385l-0.553 1.538h3.197c0.26-0.824 0.586-1.328 0.769-1.538h-3.413z";break;case"ellipsis":svg[0]="0 0 20 20",svg[1]="M10.001 7.8c-1.215 0-2.201 0.985-2.201 2.2s0.986 2.2 2.201 2.2c1.215 0 2.199-0.985 2.199-2.2s-0.984-2.2-2.199-2.2zM3.001 7.8c-1.215 0-2.201 0.985-2.201 2.2s0.986 2.2 2.201 2.2c1.215 0 2.199-0.986 2.199-2.2s-0.984-2.2-2.199-2.2zM17.001 7.8c-1.215 0-2.201 0.985-2.201 2.2s0.986 2.2 2.201 2.2c1.215 0 2.199-0.985 2.199-2.2s-0.984-2.2-2.199-2.2z";break;case"pipe":svg[0]="0 0 20 20",svg[1]="M10.15 0.179h0.623c0.069 0 0.127 0.114 0.127 0.253v19.494c0 0.139-0.057 0.253-0.127 0.253h-1.247c-0.069 0-0.126-0.114-0.126-0.253v-19.494c0-0.139 0.057-0.253 0.126-0.253h0.623z";break;case"captions":svg[0]="0 0 20 20",svg[1]="M0.033 3.624h19.933v12.956h-19.933v-12.956zM18.098 10.045c-0.025-2.264-0.124-3.251-0.743-3.948-0.112-0.151-0.322-0.236-0.496-0.344-0.606-0.386-3.465-0.526-6.782-0.526s-6.313 0.14-6.907 0.526c-0.185 0.108-0.396 0.193-0.519 0.344-0.607 0.697-0.693 1.684-0.731 3.948 0.037 2.265 0.124 3.252 0.731 3.949 0.124 0.161 0.335 0.236 0.519 0.344 0.594 0.396 3.59 0.526 6.907 0.547 3.317-0.022 6.176-0.151 6.782-0.547 0.174-0.108 0.384-0.183 0.496-0.344 0.619-0.697 0.717-1.684 0.743-3.949v0 0zM9.689 9.281c-0.168-1.77-1.253-2.813-3.196-2.813-1.773 0-3.168 1.387-3.168 3.617 0 2.239 1.271 3.636 3.372 3.636 1.676 0 2.851-1.071 3.035-2.852h-2.003c-0.079 0.661-0.397 1.168-1.068 1.168-1.059 0-1.253-0.91-1.253-1.876 0-1.33 0.442-2.010 1.174-2.010 0.653 0 1.068 0.412 1.13 1.129h1.977zM16.607 9.281c-0.167-1.77-1.252-2.813-3.194-2.813-1.773 0-3.168 1.387-3.168 3.617 0 2.239 1.271 3.636 3.372 3.636 1.676 0 2.851-1.071 3.035-2.852h-2.003c-0.079 0.661-0.397 1.168-1.068 1.168-1.059 0-1.253-0.91-1.253-1.876 0-1.33 0.441-2.010 1.174-2.010 0.653 0 1.068 0.412 1.13 1.129h1.976z";break;case"descriptions":svg[0]="0 0 20 20",svg[1]="M17.623 3.57h-1.555c1.754 1.736 2.763 4.106 2.763 6.572 0 2.191-0.788 4.286-2.189 5.943h1.484c1.247-1.704 1.945-3.792 1.945-5.943-0-2.418-0.886-4.754-2.447-6.572v0zM14.449 3.57h-1.55c1.749 1.736 2.757 4.106 2.757 6.572 0 2.191-0.788 4.286-2.187 5.943h1.476c1.258-1.704 1.951-3.792 1.951-5.943-0-2.418-0.884-4.754-2.447-6.572v0zM11.269 3.57h-1.542c1.752 1.736 2.752 4.106 2.752 6.572 0 2.191-0.791 4.286-2.181 5.943h1.473c1.258-1.704 1.945-3.792 1.945-5.943 0-2.418-0.876-4.754-2.447-6.572v0zM10.24 9.857c0 3.459-2.826 6.265-6.303 6.265v0.011h-3.867v-12.555h3.896c3.477 0 6.274 2.806 6.274 6.279v0zM6.944 9.857c0-1.842-1.492-3.338-3.349-3.338h-0.876v6.686h0.876c1.858 0 3.349-1.498 3.349-3.348v0z";break;case"sign":svg[0]="0 0 20 20",svg[1]="M10.954 10.307c0.378 0.302 0.569 1.202 0.564 1.193 0.697 0.221 1.136 0.682 1.136 0.682 1.070-0.596 1.094-0.326 1.558-0.682 0.383-0.263 0.366-0.344 0.567-1.048 0.187-0.572-0.476-0.518-1.021-1.558-0.95 0.358-1.463 0.196-1.784 0.167-0.145-0.020-0.12 0.562-1.021 1.247zM14.409 17.196c-0.133 0.182-0.196 0.218-0.363 0.454-0.28 0.361 0.076 0.906 0.253 0.82 0.206-0.076 0.341-0.488 0.567-0.623 0.115-0.061 0.422-0.513 0.709-0.82 0.211-0.238 0.363-0.344 0.564-0.594 0.341-0.422 0.412-0.744 0.709-1.193 0.184-0.236 0.312-0.307 0.481-0.594 0.886-1.679 0.628-2.432 1.475-3.629 0.26-0.353 0.552-0.442 0.964-0.653 0.383-2.793-0.888-4.356-0.879-4.361-1.067 0.623-1.644 0.879-2.751 0.82-0.417-0.005-0.636-0.182-1.048-0.145-0.385 0.015-0.582 0.159-0.964 0.29-0.589 0.182-0.91 0.344-1.529 0.535-0.393 0.11-0.643 0.115-1.050 0.255-0.348 0.147-0.182 0.029-0.427 0.312-0.317 0.348-0.238 0.623-0.535 1.222-0.371 0.785-0.326 0.891-0.115 0.987-0.14 0.402-0.174 0.672-0.14 1.107 0.039 0.331-0.101 0.562 0.255 0.825 0.483 0.361 1.499 1.205 1.757 1.217 0.39-0.012 1.521 0.029 2.096-0.368 0.13-0.081 0.167-0.162 0.056 0.145-0.022 0.037-1.433 1.136-1.585 1.131-1.794 0.056-1.193 0.157-1.303 0.115-0.091 0-0.955-1.055-1.477-0.682-0.196 0.12-0.287 0.236-0.363 0.452 0.066 0.137 0.383 0.358 0.675 0.54 0.422 0.27 0.461 0.552 0.881 0.653 0.513 0.115 1.060 0.039 1.387 0.081 0.125 0.034 1.256-0.297 1.961-0.675 0.65-0.336-0.898 0.648-1.276 1.131-1.141 0.358-0.82 0.373-1.362 0.483-0.503 0.115-0.479 0.086-0.822 0.196-0.356 0.086-0.648 0.572-0.312 0.825 0.201 0.167 0.827-0.066 1.445-0.086 0.275-0.005 1.391-0.518 1.644-0.653 0.633-0.339 1.099-0.81 1.472-1.077 0.518-0.361-0.584 0.991-1.050 1.558zM8.855 9.799c-0.378-0.312-0.569-1.212-0.564-1.217-0.697-0.206-1.136-0.667-1.136-0.653-1.070 0.582-1.099 0.312-1.558 0.653-0.388 0.277-0.366 0.363-0.567 1.045-0.187 0.594 0.471 0.535 1.021 1.561 0.95-0.344 1.463-0.182 1.784-0.142 0.145 0.010 0.12-0.572 1.021-1.247zM5.4 2.911c0.133-0.191 0.196-0.228 0.368-0.454 0.27-0.371-0.081-0.915-0.253-0.849-0.211 0.096-0.346 0.508-0.599 0.653-0.093 0.052-0.4 0.503-0.682 0.82-0.211 0.228-0.363 0.334-0.564 0.599-0.346 0.407-0.412 0.729-0.709 1.161-0.184 0.258-0.317 0.324-0.481 0.621-0.886 1.669-0.631 2.422-1.475 3.6-0.26 0.38-0.552 0.461-0.964 0.682-0.383 2.788 0.883 4.346 0.879 4.336 1.068-0.609 1.639-0.861 2.751-0.825 0.417 0.025 0.636 0.201 1.048 0.174 0.385-0.025 0.582-0.169 0.964-0.285 0.589-0.196 0.91-0.358 1.499-0.54 0.422-0.12 0.672-0.125 1.080-0.285 0.348-0.128 0.182-0.010 0.427-0.282 0.312-0.358 0.238-0.633 0.508-1.217 0.398-0.8 0.353-0.906 0.142-0.991 0.135-0.412 0.174-0.677 0.14-1.107-0.044-0.336 0.101-0.572-0.255-0.82-0.483-0.375-1.499-1.22-1.752-1.222-0.395 0.002-1.526-0.039-2.101 0.339-0.13 0.101-0.167 0.182-0.056-0.11 0.022-0.052 1.433-1.148 1.585-1.163 1.794-0.039 1.193-0.14 1.303-0.088 0.091-0.007 0.955 1.045 1.477 0.682 0.191-0.13 0.287-0.245 0.368-0.452-0.071-0.147-0.388-0.368-0.68-0.537-0.422-0.282-0.464-0.564-0.881-0.655-0.513-0.125-1.065-0.049-1.387-0.11-0.125-0.015-1.256 0.317-1.956 0.68-0.66 0.351 0.893-0.631 1.276-1.136 1.136-0.339 0.81-0.353 1.36-0.479 0.501-0.101 0.476-0.071 0.82-0.172 0.351-0.096 0.648-0.577 0.312-0.849-0.206-0.152-0.827 0.081-1.44 0.086-0.28 0.020-1.396 0.533-1.649 0.677-0.633 0.329-1.099 0.8-1.472 1.048-0.523 0.38 0.584-0.967 1.050-1.529z";break;case"mute":case"volume-mute":svg[0]="0 0 20 20",svg[1]="M7.839 1.536c0.501-0.501 0.911-0.331 0.911 0.378v16.172c0 0.709-0.41 0.879-0.911 0.378l-4.714-4.713h-3.125v-7.5h3.125l4.714-4.714zM18.75 12.093v1.657h-1.657l-2.093-2.093-2.093 2.093h-1.657v-1.657l2.093-2.093-2.093-2.093v-1.657h1.657l2.093 2.093 2.093-2.093h1.657v1.657l-2.093 2.093z";break;case"volume-soft":svg[0]="0 0 20 20",svg[1]="M10.723 14.473c-0.24 0-0.48-0.092-0.663-0.275-0.366-0.366-0.366-0.96 0-1.326 1.584-1.584 1.584-4.161 0-5.745-0.366-0.366-0.366-0.96 0-1.326s0.96-0.366 1.326 0c2.315 2.315 2.315 6.082 0 8.397-0.183 0.183-0.423 0.275-0.663 0.275zM7.839 1.536c0.501-0.501 0.911-0.331 0.911 0.378v16.172c0 0.709-0.41 0.879-0.911 0.378l-4.714-4.713h-3.125v-7.5h3.125l4.714-4.714z";break;case"volume-medium":svg[0]="0 0 20 20",svg[1]="M14.053 16.241c-0.24 0-0.48-0.092-0.663-0.275-0.366-0.366-0.366-0.96 0-1.326 2.559-2.559 2.559-6.722 0-9.281-0.366-0.366-0.366-0.96 0-1.326s0.96-0.366 1.326 0c1.594 1.594 2.471 3.712 2.471 5.966s-0.878 4.373-2.471 5.966c-0.183 0.183-0.423 0.275-0.663 0.275zM10.723 14.473c-0.24 0-0.48-0.092-0.663-0.275-0.366-0.366-0.366-0.96 0-1.326 1.584-1.584 1.584-4.161 0-5.745-0.366-0.366-0.366-0.96 0-1.326s0.96-0.366 1.326 0c2.315 2.315 2.315 6.082 0 8.397-0.183 0.183-0.423 0.275-0.663 0.275zM7.839 1.536c0.501-0.501 0.911-0.331 0.911 0.378v16.172c0 0.709-0.41 0.879-0.911 0.378l-4.714-4.713h-3.125v-7.5h3.125l4.714-4.714z";break;case"volume-loud":svg[0]="0 0 21 20",svg[1]="M17.384 18.009c-0.24 0-0.48-0.092-0.663-0.275-0.366-0.366-0.366-0.96 0-1.326 1.712-1.712 2.654-3.988 2.654-6.408s-0.943-4.696-2.654-6.408c-0.366-0.366-0.366-0.96 0-1.326s0.96-0.366 1.326 0c2.066 2.066 3.204 4.813 3.204 7.734s-1.138 5.668-3.204 7.734c-0.183 0.183-0.423 0.275-0.663 0.275zM14.053 16.241c-0.24 0-0.48-0.092-0.663-0.275-0.366-0.366-0.366-0.96 0-1.326 2.559-2.559 2.559-6.722 0-9.281-0.366-0.366-0.366-0.96 0-1.326s0.96-0.366 1.326 0c1.594 1.594 2.471 3.712 2.471 5.966s-0.878 4.373-2.471 5.966c-0.183 0.183-0.423 0.275-0.663 0.275zM10.723 14.473c-0.24 0-0.48-0.092-0.663-0.275-0.366-0.366-0.366-0.96 0-1.326 1.584-1.584 1.584-4.161 0-5.745-0.366-0.366-0.366-0.96 0-1.326s0.96-0.366 1.326 0c2.315 2.315 2.315 6.082 0 8.397-0.183 0.183-0.423 0.275-0.663 0.275zM7.839 1.536c0.501-0.501 0.911-0.331 0.911 0.378v16.172c0 0.709-0.41 0.879-0.911 0.378l-4.714-4.713h-3.125v-7.5h3.125l4.714-4.714z";break;case"chapters":svg[0]="0 0 20 20",svg[1]="M5 2.5v17.5l6.25-6.25 6.25 6.25v-17.5zM15 0h-12.5v17.5l1.25-1.25v-15h11.25z";break;case"transcript":svg[0]="0 0 20 20",svg[1]="M0 19.107v-17.857q0-0.446 0.313-0.759t0.759-0.313h8.929v6.071q0 0.446 0.313 0.759t0.759 0.313h6.071v11.786q0 0.446-0.313 0.759t-0.759 0.312h-15q-0.446 0-0.759-0.313t-0.313-0.759zM4.286 15.536q0 0.156 0.1 0.257t0.257 0.1h7.857q0.156 0 0.257-0.1t0.1-0.257v-0.714q0-0.156-0.1-0.257t-0.257-0.1h-7.857q-0.156 0-0.257 0.1t-0.1 0.257v0.714zM4.286 12.679q0 0.156 0.1 0.257t0.257 0.1h7.857q0.156 0 0.257-0.1t0.1-0.257v-0.714q0-0.156-0.1-0.257t-0.257-0.1h-7.857q-0.156 0-0.257 0.1t-0.1 0.257v0.714zM4.286 9.821q0 0.156 0.1 0.257t0.257 0.1h7.857q0.156 0 0.257-0.1t0.1-0.257v-0.714q0-0.156-0.1-0.257t-0.257-0.1h-7.857q-0.156 0-0.257 0.1t-0.1 0.257v0.714zM11.429 5.893v-5.268q0.246 0.156 0.402 0.313l4.554 4.554q0.156 0.156 0.313 0.402h-5.268z";break;case"preferences":svg[0]="0 0 20 20",svg[1]="M18.238 11.919c-1.049-1.817-0.418-4.147 1.409-5.205l-1.965-3.404c-0.562 0.329-1.214 0.518-1.911 0.518-2.1 0-3.803-1.714-3.803-3.828h-3.931c0.005 0.653-0.158 1.314-0.507 1.919-1.049 1.818-3.382 2.436-5.212 1.382l-1.965 3.404c0.566 0.322 1.056 0.793 1.404 1.396 1.048 1.815 0.42 4.139-1.401 5.2l1.965 3.404c0.56-0.326 1.209-0.513 1.902-0.513 2.094 0 3.792 1.703 3.803 3.808h3.931c-0.002-0.646 0.162-1.3 0.507-1.899 1.048-1.815 3.375-2.433 5.203-1.387l1.965-3.404c-0.562-0.322-1.049-0.791-1.395-1.391zM10 14.049c-2.236 0-4.050-1.813-4.050-4.049s1.813-4.049 4.050-4.049 4.049 1.813 4.049 4.049c-0 2.237-1.813 4.049-4.049 4.049z";break;case"close":svg[0]="0 0 16 20",svg[1]="M1.228 14.933q0-0.446 0.312-0.759l3.281-3.281-3.281-3.281q-0.313-0.313-0.313-0.759t0.313-0.759l1.518-1.518q0.313-0.313 0.759-0.313t0.759 0.313l3.281 3.281 3.281-3.281q0.313-0.313 0.759-0.313t0.759 0.313l1.518 1.518q0.313 0.313 0.313 0.759t-0.313 0.759l-3.281 3.281 3.281 3.281q0.313 0.313 0.313 0.759t-0.313 0.759l-1.518 1.518q-0.313 0.313-0.759 0.313t-0.759-0.313l-3.281-3.281-3.281 3.281q-0.313 0.313-0.759 0.313t-0.759-0.313l-1.518-1.518q-0.313-0.313-0.313-0.759z";break;case"fullscreen-expand":svg[0]="0 0 20 20",svg[1]="M0 18.036v-5q0-0.29 0.212-0.502t0.502-0.212 0.502 0.212l1.607 1.607 3.705-3.705q0.112-0.112 0.257-0.112t0.257 0.112l1.272 1.272q0.112 0.112 0.112 0.257t-0.112 0.257l-3.705 3.705 1.607 1.607q0.212 0.212 0.212 0.502t-0.212 0.502-0.502 0.212h-5q-0.29 0-0.502-0.212t-0.212-0.502zM8.717 8.393q0-0.145 0.112-0.257l3.705-3.705-1.607-1.607q-0.212-0.212-0.212-0.502t0.212-0.502 0.502-0.212h5q0.29 0 0.502 0.212t0.212 0.502v5q0 0.29-0.212 0.502t-0.502 0.212-0.502-0.212l-1.607-1.607-3.705 3.705q-0.112 0.112-0.257 0.112t-0.257-0.112l-1.272-1.272q-0.112-0.112-0.112-0.257z";break;case"fullscreen-collapse":svg[0]="0 0 20 20",svg[1]="M0.145 16.964q0-0.145 0.112-0.257l3.705-3.705-1.607-1.607q-0.212-0.212-0.212-0.502t0.212-0.502 0.502-0.212h5q0.29 0 0.502 0.212t0.212 0.502v5q0 0.29-0.212 0.502t-0.502 0.212-0.502-0.212l-1.607-1.607-3.705 3.705q-0.112 0.112-0.257 0.112t-0.257-0.112l-1.272-1.272q-0.112-0.112-0.112-0.257zM8.571 9.464v-5q0-0.29 0.212-0.502t0.502-0.212 0.502 0.212l1.607 1.607 3.705-3.705q0.112-0.112 0.257-0.112t0.257 0.112l1.272 1.272q0.112 0.112 0.112 0.257t-0.112 0.257l-3.705 3.705 1.607 1.607q0.212 0.212 0.212 0.502t-0.212 0.502-0.502 0.212h-5q-0.29 0-0.502-0.212t-0.212-0.502z";break;case"help":svg[0]="0 0 11 20",svg[1]="M0.577 6.317q-0.028-0.167 0.061-0.313 1.786-2.969 5.179-2.969 0.893 0 1.797 0.346t1.629 0.926 1.183 1.423 0.458 1.769q0 0.603-0.173 1.127t-0.391 0.854-0.614 0.664-0.642 0.485-0.681 0.396q-0.458 0.257-0.765 0.725t-0.307 0.748q0 0.19-0.134 0.363t-0.313 0.173h-2.679q-0.167 0-0.285-0.206t-0.117-0.419v-0.502q0-0.926 0.725-1.747t1.596-1.211q0.658-0.301 0.938-0.625t0.279-0.848q0-0.469-0.519-0.826t-1.2-0.357q-0.725 0-1.205 0.324-0.391 0.279-1.194 1.283-0.145 0.179-0.346 0.179-0.134 0-0.279-0.089l-1.83-1.395q-0.145-0.112-0.173-0.279zM3.786 16.875v-2.679q0-0.179 0.134-0.313t0.313-0.134h2.679q0.179 0 0.313 0.134t0.134 0.313v2.679q0 0.179-0.134 0.313t-0.313 0.134h-2.679q-0.179 0-0.313-0.134t-0.134-0.313z"}return svg},AblePlayer.prototype.reinitialize=function(){var deferred,promise,thisObj,errorMsg,srcFile;if(promise=(deferred=new $.Deferred).promise(),thisObj=this,window.console||(this.debug=!1),this.startedPlaying=!1,this.autoScrollTranscript=!0,this.$media=$(this.media).first(),this.media=this.$media[0],this.$media.is("audio"))this.mediaType="audio";else{if(!this.$media.is("video"))return this.provideFallback(),deferred.fail(),promise;this.mediaType="video"}return this.$sources=this.$media.find("source"),this.player=this.getPlayer(),this.player||this.provideFallback(),this.setIconType(),this.setDimensions(),deferred.resolve(),promise},AblePlayer.prototype.setDimensions=function(){this.$media.attr("width")&&this.$media.attr("height")?(this.playerMaxWidth=parseInt(this.$media.attr("width"),10),this.playerMaxHeight=parseInt(this.$media.attr("height"),10)):this.$media.attr("width")?this.playerMaxWidth=parseInt(this.$media.attr("width"),10):(this.playerMaxWidth=this.$media.parent().width(),this.playerMaxHeight=this.getMatchingHeight(this.playerMaxWidth)),this.$media.css({width:"100%",height:"auto"})},AblePlayer.prototype.getMatchingHeight=function(width){var widths,heights,closestWidth,closestIndex,closestHeight,height;return widths=[3840,2560,1920,1280,854,640,426],heights=[2160,1440,1080,720,480,360,240],closestWidth=null,closestIndex=null,$.each(widths,(function(index){(null==closestWidth||Math.abs(this-width)<Math.abs(closestWidth-width))&&(closestWidth=this,closestIndex=index)})),closestHeight=heights[closestIndex],this.aspectRatio=closestWidth/closestHeight,height=Math.round(width/this.aspectRatio)},AblePlayer.prototype.setIconType=function(){var $tempButton,$testButton,controllerFont;if(this.forceIconType)return!1;document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect?this.iconType="svg":(window.getComputedStyle?($("span.icon-play").length?$testButton=$("span.icon-play"):($tempButton=$("<span>",{class:"icon-play able-clipped"}),$("body").append($tempButton),$testButton=$tempButton),void 0!==(controllerFont=window.getComputedStyle($testButton.get(0),null).getPropertyValue("font-family"))&&-1!==controllerFont.indexOf("able")?this.iconType="font":this.iconType="image"):this.iconType="image",this.debug&&console.log("Using "+this.iconType+"s for player controls"),void 0!==$tempButton&&$tempButton.remove())},AblePlayer.prototype.setupInstance=function(){var deferred=new $.Deferred,promise=deferred.promise();return this.$media.attr("id")?this.mediaId=this.$media.attr("id"):(this.mediaId="ableMediaId_"+this.ableIndex,this.$media.attr("id",this.mediaId)),deferred.resolve(),promise},AblePlayer.prototype.setupInstancePlaylist=function(){var thisObj=this;if(this.hasPlaylist=!1,$(".able-playlist").each((function(){if($(this).data("player")===thisObj.mediaId){var $youTubeVideos;thisObj.hasPlaylist=!0,thisObj.$playlist=$(this).find("li"),$(this).find("li[data-youtube-id]").each((function(){var youTubeId=$(this).attr("data-youtube-id"),youTubePoster=thisObj.getYouTubePosterUrl(youTubeId,"120"),$youTubeImg=$("<img>",{src:youTubePoster,alt:""});$(this).find("button").prepend($youTubeImg)})),$(this).find("li span").attr("aria-hidden","true"),thisObj.playlistIndex=0;var dataEmbedded=$(this).data("embedded");thisObj.playlistEmbed=void 0!==dataEmbedded&&!1!==dataEmbedded}})),this.hasPlaylist&&this.loop&&this.media.removeAttribute("loop"),this.hasPlaylist&&this.playlistEmbed){var parent=this.$playlist.parent();this.$playlistDom=parent.clone(),parent.remove()}this.hasPlaylist&&0===this.$sources.length&&(this.cuePlaylistItem(0),this.$sources=this.$media.find("source"))},AblePlayer.prototype.recreatePlayer=function(){var thisObj,prefsGroups,i;thisObj=this,this.player?(this.playerCreated||(this.loadCurrentPreferences(),this.injectPlayerCode()),this.initSignLanguage(),this.initPlayer().then((function(){thisObj.setupTracks().then((function(){thisObj.setupAltCaptions().then((function(){thisObj.setupTranscript().then((function(){thisObj.getMediaTimes().then((function(mediaTimes){for(thisObj.duration=mediaTimes.duration,thisObj.elapsed=mediaTimes.elapsed,thisObj.setFullscreen(!1),void 0===thisObj.volume&&(thisObj.volume=thisObj.defaultVolume),thisObj.volume&&thisObj.setVolume(thisObj.volume),thisObj.transcriptType&&(thisObj.addTranscriptAreaEvents(),thisObj.updateTranscript()),"video"===thisObj.mediaType&&thisObj.initDescription(),thisObj.captions.length&&thisObj.initDefaultCaption(),thisObj.setMediaAttributes(),thisObj.addControls(),thisObj.addEventListeners(),prefsGroups=thisObj.getPreferencesGroups(),i=0;i<prefsGroups.length;i++)thisObj.injectPrefsForm(prefsGroups[i]);thisObj.setupPopups(),thisObj.updateCaption(),thisObj.injectVTS(),thisObj.chaptersDivLocation&&thisObj.populateChaptersDiv(),thisObj.showSearchResults(),"html5"===thisObj.player&&thisObj.$media[0].load(),setTimeout((function(){thisObj.refreshControls("init")}),100)}))}),(function(){thisObj.provideFallback()}))}))}))}))):console.log("Can't create player; no appropriate player type detected.")},AblePlayer.prototype.initPlayer=function(){var thisObj=this,playerPromise;"html5"===this.player?playerPromise=this.initHtml5Player():"youtube"===this.player?playerPromise=this.initYouTubePlayer():"vimeo"===this.player&&(playerPromise=this.initVimeoPlayer());var deferred=new $.Deferred,promise=deferred.promise();return playerPromise.done((function(){thisObj.useFixedSeekInterval?(thisObj.seekInterval||(thisObj.seekInterval=thisObj.defaultSeekInterval),thisObj.seekIntervalCalculated=!0):thisObj.setSeekInterval(),deferred.resolve()})).fail((function(){deferred.reject()})),promise},AblePlayer.prototype.setSeekInterval=function(){var thisObj,duration;thisObj=this,this.seekInterval=this.defaultSeekInterval,void 0===(duration=this.useChapterTimes?this.chapterDuration:this.duration)||duration<1?this.seekIntervalCalculated=!1:(this.seekInterval=duration<=20?5:duration<=30?6:duration<=40?8:duration<=100?10:duration/10,this.seekIntervalCalculated=!0)},AblePlayer.prototype.initDefaultCaption=function(){var captions,i;if((captions=this.captions).length>0){for(i=0;i<captions.length;i++)!0===captions[i].def&&(this.captionLang=captions[i].language,this.selectedCaptions=captions[i]);if(void 0===this.captionLang)for(i=0;i<captions.length;i++)captions[i].language===this.lang&&(this.captionLang=captions[i].language,this.selectedCaptions=captions[i]);void 0===this.captionLang&&(this.captionLang=captions[0].language,this.selectedCaptions=captions[0]),void 0!==this.captionLang&&(this.$transcriptLanguageSelect&&this.$transcriptLanguageSelect.find("option[lang="+this.captionLang+"]").prop("selected",!0),this.syncTrackLanguages("init",this.captionLang)),"vimeo"===this.player&&(this.usingVimeoCaptions&&1==this.prefCaptions?this.vimeoPlayer.enableTextTrack(this.captionLang).then((function(track){})).catch((function(error){switch(error.name){case"InvalidTrackLanguageError":case"InvalidTrackError":console.log("No "+track.kind+" track is available in the specified language ("+track.label+")");break;default:console.log("Error loading "+track.label+" "+track.kind+" track")}})):this.vimeoPlayer.disableTextTrack().then((function(){})).catch((function(error){console.log("Error disabling Vimeo text track: ",error)})))}},AblePlayer.prototype.initHtml5Player=function(){var deferred=new $.Deferred,promise=deferred.promise();return deferred.resolve(),promise},AblePlayer.prototype.setMediaAttributes=function(){this.$media.attr("tabindex",-1);var textTracks=this.$media.get(0).textTracks;if(textTracks)for(var i=0;i<textTracks.length;)textTracks[i].mode="disabled",i+=1},AblePlayer.prototype.getPlayer=function(){var i,sourceType,$newItem;return this.youTubeId?"video"!==this.mediaType?null:"youtube":this.vimeoId?"video"!==this.mediaType?null:"vimeo":this.testFallback||(this.isUserAgent("msie 7")||this.isUserAgent("msie 8")||this.isUserAgent("msie 9"))&&"video"===this.mediaType||this.isIOS()&&(this.isIOS(4)||this.isIOS(5)||this.isIOS(6))?null:this.media.canPlayType?"html5":null}}(jQuery),function($){AblePlayer.prototype.setCookie=function(cookieValue){Cookies.set("Able-Player",cookieValue,{expires:90})},AblePlayer.prototype.getCookie=function(){var defaultCookie={preferences:{},sign:{},transcript:{}},cookie;try{cookie=Cookies.getJSON("Able-Player")}catch(err){Cookies.getJSON(defaultCookie),cookie=defaultCookie}return cookie||defaultCookie},AblePlayer.prototype.updateCookie=function(setting){var cookie,$window,windowPos,available,i,prefName;if(cookie=this.getCookie(),"transcript"===setting||"sign"===setting)"transcript"===setting?(windowPos=($window=this.$transcriptArea).position(),void 0===cookie.transcript&&(cookie.transcript={}),cookie.transcript.position=$window.css("position"),cookie.transcript.zindex=$window.css("z-index"),cookie.transcript.top=windowPos.top,cookie.transcript.left=windowPos.left,cookie.transcript.width=$window.width(),cookie.transcript.height=$window.height()):"sign"===setting&&(windowPos=($window=this.$signWindow).position(),void 0===cookie.sign&&(cookie.sign={}),cookie.sign.position=$window.css("position"),cookie.sign.zindex=$window.css("z-index"),cookie.sign.top=windowPos.top,cookie.sign.left=windowPos.left,cookie.sign.width=$window.width(),cookie.sign.height=$window.height());else for(available=this.getAvailablePreferences(),i=0;i<available.length;i++)(prefName=available[i].name)==setting&&(cookie.preferences[prefName]=this[prefName]);this.setCookie(cookie)},AblePlayer.prototype.getPreferencesGroups=function(){if("video"===this.mediaType)return["captions","descriptions","keyboard","transcript"];if("audio"===this.mediaType){var groups=[];return groups.push("keyboard"),this.lyricsMode&&groups.push("transcript"),groups}},AblePlayer.prototype.getAvailablePreferences=function(){var prefs=[];return prefs.push({name:"prefAltKey",label:this.tt.prefAltKey,group:"keyboard",default:1}),prefs.push({name:"prefCtrlKey",label:this.tt.prefCtrlKey,group:"keyboard",default:1}),prefs.push({name:"prefShiftKey",label:this.tt.prefShiftKey,group:"keyboard",default:0}),prefs.push({name:"prefTranscript",label:null,group:"transcript",default:0}),prefs.push({name:"prefHighlight",label:this.tt.prefHighlight,group:"transcript",default:1}),prefs.push({name:"prefAutoScrollTranscript",label:null,group:"transcript",default:1}),prefs.push({name:"prefTabbable",label:this.tt.prefTabbable,group:"transcript",default:0}),"video"===this.mediaType&&(prefs.push({name:"prefCaptions",label:null,group:"captions",default:1}),prefs.push({name:"prefCaptionsPosition",label:this.tt.prefCaptionsPosition,group:"captions",default:this.defaultCaptionsPosition}),prefs.push({name:"prefCaptionsFont",label:this.tt.prefCaptionsFont,group:"captions",default:"sans"}),prefs.push({name:"prefCaptionsSize",label:this.tt.prefCaptionsSize,group:"captions",default:"100%"}),prefs.push({name:"prefCaptionsColor",label:this.tt.prefCaptionsColor,group:"captions",default:"white"}),prefs.push({name:"prefCaptionsBGColor",label:this.tt.prefCaptionsBGColor,group:"captions",default:"black"}),prefs.push({name:"prefCaptionsOpacity",label:this.tt.prefCaptionsOpacity,group:"captions",default:"100%"}),prefs.push({name:"prefDesc",label:null,group:"descriptions",default:0}),prefs.push({name:"prefDescFormat",label:null,group:"descriptions",default:"video"}),prefs.push({name:"prefDescPause",label:this.tt.prefDescPause,group:"descriptions",default:0}),prefs.push({name:"prefVisibleDesc",label:this.tt.prefVisibleDesc,group:"descriptions",default:1}),prefs.push({name:"prefSign",label:null,group:null,default:0})),prefs},AblePlayer.prototype.loadCurrentPreferences=function(){for(var available=this.getAvailablePreferences(),cookie=this.getCookie(),ii=0;ii<available.length;ii++){var prefName=available[ii].name,defaultValue=available[ii].default;void 0!==cookie.preferences[prefName]?this[prefName]=cookie.preferences[prefName]:(cookie.preferences[prefName]=defaultValue,this[prefName]=defaultValue)}this.setCookie(cookie)},AblePlayer.prototype.injectPrefsForm=function(form){var available,thisObj,$prefsDiv,formTitle,introText,$prefsIntro,$prefsIntroP2,p3Text,$prefsIntroP3,i,j,$fieldset,fieldsetClass,fieldsetId,$descFieldset,$descLegend,$legend,thisPref,$thisDiv,thisClass,thisId,$thisLabel,$thisField,$div1,id1,$radio1,$label1,$div2,id2,$radio2,$label2,options,$thisOption,optionValue,optionText,sampleCapsDiv,changedPref,changedSpan,changedText,currentDescState,$kbHeading,$kbList,kbLabels,keys,kbListText,$kbListItem,dialog,saveButton,cancelButton;thisObj=this,available=this.getAvailablePreferences();var customClass="able-prefs-form-"+form;if(($prefsDiv=$("<div>",{class:"able-prefs-form "})).addClass(customClass),"captions"==form)formTitle=this.tt.prefTitleCaptions,introText=this.tt.prefIntroCaptions,$prefsIntro=$("<p>",{text:introText}),$prefsDiv.append($prefsIntro);else if("descriptions"==form){formTitle=this.tt.prefTitleDescriptions;var $prefsIntro=$("<p>",{text:this.tt.prefIntroDescription1}),$prefsIntroUL=$("<ul>"),$prefsIntroLI1=$("<li>",{text:this.tt.prefDescFormatOption1}),$prefsIntroLI2=$("<li>",{text:this.tt.prefDescFormatOption2});$prefsIntroUL.append($prefsIntroLI1,$prefsIntroLI2),this.hasOpenDesc&&this.hasClosedDesc?(currentDescState=this.tt.prefIntroDescription2+" ",currentDescState+="<strong>"+this.tt.prefDescFormatOption1b+"</strong>",currentDescState+=" <em>"+this.tt.and+"</em> <strong>"+this.tt.prefDescFormatOption2b+"</strong>."):this.hasOpenDesc?(currentDescState=this.tt.prefIntroDescription2,currentDescState+=" <strong>"+this.tt.prefDescFormatOption1b+"</strong>."):this.hasClosedDesc?(currentDescState=this.tt.prefIntroDescription2,currentDescState+=" <strong>"+this.tt.prefDescFormatOption2b+"</strong>."):currentDescState=this.tt.prefIntroDescriptionNone,$prefsIntroP2=$("<p>",{html:currentDescState}),p3Text=this.tt.prefIntroDescription3,(this.hasOpenDesc||this.hasClosedDesc)&&(p3Text+=" "+this.tt.prefIntroDescription4),$prefsIntroP3=$("<p>",{text:p3Text}),$prefsDiv.append($prefsIntro,$prefsIntroUL,$prefsIntroP2,$prefsIntroP3)}else"keyboard"==form?(formTitle=this.tt.prefTitleKeyboard,introText=this.tt.prefIntroKeyboard1,introText+=" "+this.tt.prefIntroKeyboard2,introText+=" "+this.tt.prefIntroKeyboard3,$prefsIntro=$("<p>",{text:introText}),$prefsDiv.append($prefsIntro)):"transcript"==form&&(formTitle=this.tt.prefTitleTranscript,introText=this.tt.prefIntroTranscript,$prefsIntro=$("<p>",{text:introText}),$prefsDiv.append($prefsIntro));for($fieldset=$("<fieldset>"),fieldsetClass="able-prefs-"+form,fieldsetId=this.mediaId+"-prefs-"+form,$fieldset.addClass(fieldsetClass).attr("id",fieldsetId),"keyboard"===form?($legend=$("<legend>"+this.tt.prefHeadingKeyboard1+"</legend>"),$fieldset.append($legend)):"descriptions"===form&&($legend=$("<legend>"+this.tt.prefHeadingTextDescription+"</legend>"),$fieldset.append($legend)),i=0;i<available.length;i++)if(available[i].group==form&&available[i].label){if(thisClass="able-"+(thisPref=available[i].name),thisId=this.mediaId+"_"+thisPref,$thisDiv=$("<div>").addClass(thisClass),"captions"===form){for($thisLabel=$('<label for="'+thisId+'"> '+available[i].label+"</label>"),$thisField=$("<select>",{name:thisPref,id:thisId}),"prefCaptions"!==thisPref&&"prefCaptionsStyle"!==thisPref&&$thisField.change((function(){changedPref=$(this).attr("name"),thisObj.stylizeCaptions(thisObj.$sampleCapsDiv,changedPref)})),options=this.getCaptionsOptions(thisPref),j=0;j<options.length;j++)"prefCaptionsPosition"===thisPref?"overlay"===(optionValue=options[j])?optionText=this.tt.captionsPositionOverlay:"below"===optionValue&&(optionValue=options[j],optionText=this.tt.captionsPositionBelow):"prefCaptionsFont"===thisPref||"prefCaptionsColor"===thisPref||"prefCaptionsBGColor"===thisPref?(optionValue=options[j][0],optionText=options[j][1]):"prefCaptionsOpacity"===thisPref?(optionValue=options[j],optionText=options[j],"0%"===optionValue?optionText+=" ("+this.tt.transparent+")":"100%"===optionValue&&(optionText+=" ("+this.tt.solid+")")):(optionValue=options[j],optionText=options[j]),$thisOption=$("<option>",{value:optionValue,text:optionText}),this[thisPref]===optionValue&&$thisOption.prop("selected",!0),$thisField.append($thisOption);$thisDiv.append($thisLabel,$thisField)}else $thisLabel=$('<label for="'+thisId+'"> '+available[i].label+"</label>"),$thisField=$("<input>",{type:"checkbox",name:thisPref,id:thisId,value:"true"}),1===this[thisPref]&&$thisField.prop("checked",!0),"keyboard"===form&&$thisField.change((function(){"prefAltKey"===(changedPref=$(this).attr("name"))?(changedSpan=".able-modkey-alt",changedText=thisObj.tt.prefAltKey+" + "):"prefCtrlKey"===changedPref?(changedSpan=".able-modkey-ctrl",changedText=thisObj.tt.prefCtrlKey+" + "):"prefShiftKey"===changedPref&&(changedSpan=".able-modkey-shift",changedText=thisObj.tt.prefShiftKey+" + "),$(this).is(":checked")?$(changedSpan).text(changedText):$(changedSpan).text("")})),$thisDiv.append($thisField,$thisLabel);$fieldset.append($thisDiv)}if($prefsDiv.append($fieldset),"captions"===form)"video"===this.mediaType&&(this.$sampleCapsDiv=$("<div>",{class:"able-captions-sample"}).text(this.tt.sampleCaptionText),$prefsDiv.append(this.$sampleCapsDiv),this.stylizeCaptions(this.$sampleCapsDiv));else if("keyboard"===form){for($kbHeading=$("<h2>",{text:this.tt.prefHeadingKeyboard2}),$kbList=$("<ul>"),kbLabels=[],keys=[],i=0;i<this.controls.length;i++)"play"===this.controls[i]?(kbLabels.push(this.tt.play+"/"+this.tt.pause),keys.push("p</span> <em>"+this.tt.or+'</em> <span class="able-help-modifiers"> '+this.tt.spacebar)):"restart"===this.controls[i]?(kbLabels.push(this.tt.restart),keys.push("s")):"previous"===this.controls[i]?(kbLabels.push(this.tt.prevTrack),keys.push("b")):"next"===this.controls[i]?(kbLabels.push(this.tt.nextTrack),keys.push("n")):"rewind"===this.controls[i]?(kbLabels.push(this.tt.rewind),keys.push("r")):"forward"===this.controls[i]?(kbLabels.push(this.tt.forward),keys.push("f")):"volume"===this.controls[i]?(kbLabels.push(this.tt.volume),keys.push("v</span> <em>"+this.tt.or+'</em> <span class="able-modkey">1-9'),kbLabels.push(this.tt.mute+"/"+this.tt.unmute),keys.push("m")):"captions"===this.controls[i]?(this.captions.length>1?kbLabels.push(this.tt.captions):this.captionsOn?kbLabels.push(this.tt.hideCaptions):kbLabels.push(this.tt.showCaptions),keys.push("c")):"descriptions"===this.controls[i]?(this.descOn?kbLabels.push(this.tt.turnOffDescriptions):kbLabels.push(this.tt.turnOnDescriptions),keys.push("d")):"prefs"===this.controls[i]?(kbLabels.push(this.tt.preferences),keys.push("e")):"help"===this.controls[i]&&(kbLabels.push(this.tt.help),keys.push("h"));for(i=0;i<keys.length;i++)kbListText='<span class="able-modkey-alt">',1===this.prefAltKey&&(kbListText+=this.tt.prefAltKey+" + "),kbListText+="</span>",kbListText+='<span class="able-modkey-ctrl">',1===this.prefCtrlKey&&(kbListText+=this.tt.prefCtrlKey+" + "),kbListText+="</span>",kbListText+='<span class="able-modkey-shift">',1===this.prefShiftKey&&(kbListText+=this.tt.prefShiftKey+" + "),kbListText+="</span>",kbListText+='<span class="able-modkey">'+keys[i]+"</span>",kbListText+=" = "+kbLabels[i],$kbListItem=$("<li>",{html:kbListText}),$kbList.append($kbListItem);kbListText='<span class="able-modkey">'+this.tt.escapeKey+"</span>",kbListText+=" = "+this.tt.escapeKeyFunction,$kbListItem=$("<li>",{html:kbListText}),$kbList.append($kbListItem),$prefsDiv.append($kbHeading,$kbList)}$("body").append($prefsDiv),dialog=new AccessibleDialog($prefsDiv,this.$prefsButton,"dialog",formTitle,$prefsIntro,thisObj.tt.closeButtonLabel,"32em"),$prefsDiv.append("<hr>"),saveButton=$('<button class="modal-button">'+this.tt.save+"</button>"),cancelButton=$('<button class="modal-button">'+this.tt.cancel+"</button>"),saveButton.click((function(){dialog.hide(),thisObj.savePrefsFromForm()})),cancelButton.click((function(){dialog.hide(),thisObj.resetPrefsForm()})),$prefsDiv.append(saveButton),$prefsDiv.append(cancelButton),"captions"===form?this.captionPrefsDialog=dialog:"descriptions"===form?this.descPrefsDialog=dialog:"keyboard"===form?this.keyboardPrefsDialog=dialog:"transcript"===form&&(this.transcriptPrefsDialog=dialog),$("div.able-prefs-form button.modalCloseButton").click((function(){thisObj.resetPrefsForm()})),$("div.able-prefs-form").keydown((function(e){27===e.which&&thisObj.resetPrefsForm()}))},AblePlayer.prototype.resetPrefsForm=function(){var thisObj,cookie,available,i,prefName,prefId,thisDiv,thisId;for(thisObj=this,cookie=this.getCookie(),available=this.getAvailablePreferences(),i=0;i<available.length;i++)prefName=available[i].name,prefId=this.mediaId+"_"+prefName,-1!==prefName.indexOf("Captions")&&"prefCaptions"!==prefName?$('select[name="'+prefName+'"]').val(cookie.preferences[prefName]):1===this[prefName]?$('input[name="'+prefName+'"]').prop("checked",!0):$('input[name="'+prefName+'"]').prop("checked",!1);this.stylizeCaptions(this.$sampleCapsDiv)},AblePlayer.prototype.savePrefsFromForm=function(){var cookie,available,prefName,prefId,numChanges,numCapChanges,capSizeChanged,capSizeValue,newValue;numChanges=0,numCapChanges=0,capSizeChanged=!1,cookie=this.getCookie(),available=this.getAvailablePreferences();for(var i=0;i<available.length;i++)available[i].label&&(prefName=available[i].name,prefId=this.mediaId+"_"+prefName,"prefDescFormat"==prefName?(this.prefDescFormat="video",this.prefDescFormat!==cookie.preferences.prefDescFormat&&(cookie.preferences.prefDescFormat=this.prefDescFormat,numChanges++)):-1!==prefName.indexOf("Captions")&&"prefCaptions"!==prefName?(newValue=$('select[id="'+prefId+'"]').val(),cookie.preferences[prefName]!==newValue&&(cookie.preferences[prefName]=newValue,this[prefName]=newValue,numChanges++,numCapChanges++),"prefCaptionsSize"===prefName&&(capSizeChanged=!0,capSizeValue=newValue)):$('input[id="'+prefId+'"]').is(":checked")?(cookie.preferences[prefName]=1,1===this[prefName]||(this[prefName]=1,numChanges++)):(cookie.preferences[prefName]=0,1===this[prefName]&&(this[prefName]=0,numChanges++)));if(numChanges>0?(this.setCookie(cookie),this.showAlert(this.tt.prefSuccess)):this.showAlert(this.tt.prefNoChange),"youtube"===this.player&&void 0!==this.usingYouTubeCaptions&&this.usingYouTubeCaptions&&capSizeChanged&&this.youTubePlayer.setOption(this.ytCaptionModule,"fontSize",this.translatePrefs("size",capSizeValue,"youtube")),AblePlayerInstances.length>1)for(var i=0;i<AblePlayerInstances.length;i++)AblePlayerInstances[i].updatePrefs(),AblePlayerInstances[i].loadCurrentPreferences(),AblePlayerInstances[i].resetPrefsForm(),numCapChanges>0&&(AblePlayerInstances[i].stylizeCaptions(AblePlayerInstances[i].$captionsDiv),void 0!==AblePlayerInstances[i].$descDiv&&AblePlayerInstances[i].stylizeCaptions(AblePlayerInstances[i].$descDiv));else this.updatePrefs(),numCapChanges>0&&(this.stylizeCaptions(this.$captionsDiv),void 0!==this.$descDiv&&this.stylizeCaptions(this.$descDiv))},AblePlayer.prototype.updatePrefs=function(){1===this.prefTabbable?this.$transcriptDiv.find("span.able-transcript-seekpoint").attr("tabindex","0"):this.$transcriptDiv.find("span.able-transcript-seekpoint").removeAttr("tabindex"),0===this.prefHighlight&&this.$transcriptDiv.find("span").removeClass("able-highlight"),this.updateCaption(),this.refreshingDesc=!0,this.initDescription()},AblePlayer.prototype.usingModifierKeys=function(e){return!(1===this.prefAltKey&&!e.altKey)&&(!(1===this.prefCtrlKey&&!e.ctrlKey)&&!(1===this.prefShiftKey&&!e.shiftKey))}}(jQuery),function($){function actList(state,list){for(var results=[],ii=0;ii<list.length;ii++)results.push(act(state,list[ii]));return results}function act(state,action){var val=action(state);if(null!==state.error)throw state.error;return val}function updatePosition(state,cutText){for(var ii=0;ii<cutText.length;ii++)"\n"===cutText[ii]?(state.column=1,state.line+=1):state.column+=1}function cut(state,length){var returnText=state.text.substring(0,length);return updatePosition(state,returnText),state.text=state.text.substring(length),returnText}function cutLine(state,length){var nextEOL=state.text.indexOf("\n"),returnText;return-1===nextEOL?(updatePosition(state,returnText=state.text),state.text=""):(returnText=state.text.substring(0,nextEOL),updatePosition(state,returnText+"\n"),state.text=state.text.substring(nextEOL+1)),returnText}function peekLine(state){var nextEOL=state.text.indexOf("\n");return-1===nextEOL?state.text:state.text.substring(0,nextEOL)}function parseFileBody(state){actList(state,[eatOptionalBOM,eatSignature]);var c=state.text[0];" "===c||"\t"===c||"\n"===c?actList(state,[eatUntilEOLInclusive,parseMetadataHeaders,eatAtLeast1EmptyLines,parseCuesAndComments]):state.error="WEBVTT signature not followed by whitespace."}function parseMetadataHeaders(state){for(;;){var nextLine=peekLine(state);if(-1!==nextLine.indexOf("--\x3e"))return;if(0===nextLine.length)return;var keyValue=act(state,getMetadataKeyValue);state.metadata[keyValue[0]]=keyValue[1],act(state,eatUntilEOLInclusive)}}function nextSpaceOrNewline(s){var possible=[],spaceIndex=s.indexOf(" ");spaceIndex>=0&&possible.push(spaceIndex);var tabIndex=s.indexOf("\t");tabIndex>=0&&possible.push(tabIndex);var lineIndex=s.indexOf("\n");return lineIndex>=0&&possible.push(lineIndex),Math.min.apply(null,possible)}function getMetadataKeyValue(state){var next=state.text.indexOf("\n"),pair=cut(state,next),colon=pair.indexOf(":"),pairName,pairValue;return-1===colon?void(state.error="Missing colon."):[pair.substring(0,colon),pair.substring(colon+1)]}function getSettingsKeyValue(state){var next,pair=cut(state,nextSpaceOrNewline(state.text)),colon=pair.indexOf(":"),pairName,pairValue;return-1===colon?void(state.error="Missing colon."):[pair.substring(0,colon),pair.substring(colon+1)]}function parseCuesAndComments(state){for(;;){var nextLine=peekLine(state);if(0!==nextLine.indexOf("NOTE")||4!==nextLine.length&&" "!==nextLine[4]&&"\t"!==nextLine[4])if(0===$.trim(nextLine).length&&state.text.length>0)act(state,eatEmptyLines);else{if(!($.trim(nextLine).length>0))return;act(state,parseCue)}else actList(state,[eatComment,eatEmptyLines])}}function parseCue(state){var nextLine=peekLine(state),cueId,errString;if(-1===nextLine.indexOf("--\x3e")&&(cueId=cutLine(state),-1===(nextLine=peekLine(state)).indexOf("--\x3e")))return errString="Invalid WebVTT file: "+state.src+"\n",errString+="Line: "+state.line+", ",errString+="Column: "+state.column+"\n",errString+="Expected cue timing for cueId '"+cueId+"' but found: "+nextLine+"\n",void(console.warn?console.warn(errString):console.log&&console.log(errString));var cueTimings=actList(state,[getTiming,eatAtLeast1SpacesOrTabs,eatArrow,eatAtLeast1SpacesOrTabs,getTiming]),startTime=cueTimings[0],endTime=cueTimings[4];if(startTime>=endTime)state.error="Start time is not sooner than end time.";else{act(state,eatSpacesOrTabs);var cueSettings=act(state,getCueSettings);cut(state,1);var components=act(state,getCuePayload);void 0===cueId&&(cueId=state.cues.length+1),state.cues.push({id:cueId,start:startTime,end:endTime,settings:cueSettings,components:components})}}function getCueSettings(state){for(var cueSettings={};state.text.length>0&&"\n"!==state.text[0];){var keyValue=act(state,getSettingsKeyValue);cueSettings[keyValue[0]]=keyValue[1],act(state,eatSpacesOrTabs)}return cueSettings}function getCuePayload(state){for(var result={type:"internal",tagName:"",value:"",classes:[],annotation:"",parent:null,children:[],language:""},current=result,languageStack=[];state.text.length>0;){var nextLine=peekLine(state);if(-1!==nextLine.indexOf("--\x3e")||/^\s*$/.test(nextLine))break;if(state.text.length>=2&&"\n"===state.text[0]&&"\n"===state.text[1]){cut(state,2);break}var token=getCueToken(state);if("string"===token.type)current.children.push(token);else if("startTag"===token.type)token.type=token.tagName,token.parent=current,-1!==$.inArray(token.tagName,["i","b","u","ruby"])?(languageStack.length>0&&(current.language=languageStack[languageStack.length-1]),current.children.push(token),current=token):"rt"===token.tagName&&"ruby"===current.tagName?(languageStack.length>0&&(current.language=languageStack[languageStack.length-1]),current.children.push(token),current=token):"c"===token.tagName?(token.value=token.annotation,languageStack.length>0&&(current.language=languageStack[languageStack.length-1]),current.children.push(token),current=token):"v"===token.tagName?(token.value=token.annotation,languageStack.length>0&&(current.language=languageStack[languageStack.length-1]),current.children.push(token),current=token):"lang"===token.tagName&&(languageStack.push(token.annotation),languageStack.length>0&&(current.language=languageStack[languageStack.length-1]),current.children.push(token),current=token);else if("endTag"===token.type)token.tagName===current.type&&-1!==$.inArray(token.tagName,["c","i","b","u","ruby","rt","v"])?current=current.parent:"lang"===token.tagName&&"lang"===current.type?(current=current.parent,languageStack.pop()):"ruby"===token.tagName&&"rt"===current.type&&(current=current.parent.parent);else if("timestampTag"===token.type){var tempState={text:token.value,error:null,metadata:{},cues:[],line:1,column:1};try{var timing=act(tempState,getTiming);0===tempState.text.length&&(token.value=timing,current.push(token))}catch(err){}}}return result}function getCueToken(state){for(var tokenState="data",result=[],buffer="",token={type:"",tagName:"",value:"",classes:[],annotation:"",children:[]};;){var c;if(c=state.text.length>=2&&"\n"===state.text[0]&&"\n"===state.text[1]?"":state.text.length>0?state.text[0]:"","data"===tokenState)if("&"===c)buffer="&",tokenState="escape";else if("<"===c){if(0!==result.length)return token.type="string",token.value=result.join(""),token;tokenState="tag"}else{if(""===c)return{type:"string",value:result.join("")};result.push(c)}else if("escape"===tokenState)if("&"===c)result.push(buffer),buffer="&";else if(c.match(/[0-9a-z]/))buffer+=c;else if(";"===c)"&amp"===buffer?result.push("&"):"&lt"===buffer?result.push("<"):"&gt"===buffer?result.push(">"):"&lrm"===buffer?result.push(""):"&rlm"===buffer?result.push(""):"&nbsp"===buffer?result.push(""):(result.push(buffer),result.push(";")),tokenState="data";else{if("<"===c||""===c)return result.push(buffer),token.type="string",token.value=result.join(""),token;if("\t"===c||"\n"===c||"\f"===c||" "===c)return result.push(buffer),token.type="string",token.value=result.join(""),token;result.push(buffer),tokenState="data"}else if("tag"===tokenState)if("\t"===c||"\n"===c||"\f"===c||" "===c)tokenState="startTagAnnotation";else if("."===c)tokenState="startTagClass";else if("/"===c)tokenState="endTag";else if(c.match("[0-9]"))tokenState="timestampTag",result.push(c);else{if(">"===c){cut(state,1);break}if(""===c)return token.tagName="",token.type="startTag",token;result.push(c),tokenState="startTag"}else if("startTag"===tokenState)if("\t"===c||"\f"===c||" "===c)tokenState="startTagAnnotation";else if("\n"===c)buffer=c,tokenState="startTagAnnotation";else if("."===c)tokenState="startTagClass";else{if(">"===c)return cut(state,1),token.tagName=result.join(""),token.type="startTag",token;if(""===c)return token.tagName=result.join(""),token.type="startTag",token;result.push(c)}else if("startTagClass"===tokenState)if("\t"===c||"\f"===c||" "===c)token.classes.push(buffer),buffer="",tokenState="startTagAnnotation";else if("\n"===c)token.classes.push(buffer),buffer=c,tokenState="startTagAnnotation";else if("."===c)token.classes.push(buffer),buffer="";else{if(">"===c)return cut(state,1),token.classes.push(buffer),token.type="startTag",token.tagName=result.join(""),token;if(""===c)return token.classes.push(buffer),token.type="startTag",token.tagName=result.join(""),token;buffer+="c"}else if("startTagAnnotation"===tokenState){if(">"===c)return cut(state,1),buffer=$.trim(buffer).replace(/ +/," "),token.type="startTag",token.tagName=result.join(""),token.annotation=buffer,token;if(""===c)return buffer=$.trim(buffer).replace(/ +/," "),token.type="startTag",token.tagName=result.join(""),token.annotation=buffer,token;buffer+=c}else if("endTag"===tokenState){if(">"===c)return cut(state,1),token.type="endTag",token.tagName=result.join(""),token;if(""===c)return token.type="endTag",token.tagName=result.join(""),token;result.push(c)}else{if("timestampTag"!==tokenState)throw"Unknown tokenState "+tokenState;if(">"===c)return cut(state,1),token.type="timestampTag",token.name=result.join(""),token;if(""===c)return token.type="timestampTag",token.name=result.join(""),token;result.push(c)}cut(state,1)}}function eatComment(state){var noteLine;if(-1===cutLine(state).indexOf("--\x3e"))for(;;){var nextLine=peekLine(state);if(0===$.trim(nextLine).length)return;if(-1!==nextLine.indexOf("--\x3e"))return void(state.error="Invalid syntax: --\x3e in comment.");cutLine(state)}else state.error="Invalid syntax: --\x3e in NOTE line."}function eatOptionalBOM(state){"\ufeff"===state.text[0]&&cut(state,1)}function eatSignature(state){"WEBVTT"===state.text.substring(0,6)?cut(state,6):state.error="Invalid signature."}function eatArrow(state){state.text.length<3||"--\x3e"!==state.text.substring(0,3)?state.error="Missing --\x3e":cut(state,3)}function eatSingleSpaceOrTab(state){"\t"===state.text[0]||" "===state.text[0]?cut(state,1):state.error="Missing space."}function eatSpacesOrTabs(state){for(;"\t"===state.text[0]||" "===state.text[0];)cut(state,1)}function eatAtLeast1SpacesOrTabs(state){for(var numEaten=0;"\t"===state.text[0]||" "===state.text[0];)cut(state,1),numEaten+=1;0===numEaten&&(state.error="Missing space.")}function eatUntilEOLInclusive(state){var nextEOL=state.text.indexOf("\n");-1===nextEOL?state.error="Missing EOL.":cut(state,nextEOL+1)}function eatEmptyLines(state){for(;state.text.length>0;){var nextLine=peekLine(state);if(0!==$.trim(nextLine).length)break;cutLine(state)}}function eatAtLeast1EmptyLines(state){for(var linesEaten=0;state.text.length>0;){var nextLine=peekLine(state);if(0!==$.trim(nextLine).length)break;cutLine(state),linesEaten+=1}0===linesEaten&&(state.error="Missing empty line.")}function getTiming(state){var nextSpace=nextSpaceOrNewline(state.text);if(-1!==nextSpace){var timestamp=cut(state,nextSpace),results=/((\d\d):)?((\d\d):)(\d\d).(\d\d\d)|(\d+).(\d\d\d)/.exec(timestamp);if(results){var time=0,hours=results[2],minutes=results[4];if(minutes){if(parseInt(minutes,10)>59)return void(state.error="Invalid minute range");hours&&(time+=3600*parseInt(hours,10)),time+=60*parseInt(minutes,10);var seconds=results[5];if(parseInt(seconds,10)>59)return void(state.error="Invalid second range");time+=parseInt(seconds,10),time+=parseInt(results[6],10)/1e3}else time+=parseInt(results[7],10),time+=parseInt(results[8],10)/1e3;return time}state.error="Unable to parse timestamp"}else state.error("Missing timing.")}AblePlayer.prototype.parseWebVTT=function(srcFile,text){var parserState={src:srcFile,text:text=text.replace(/(\r\n|\n|\r)/g,"\n"),error:null,metadata:{},cues:[],line:1,column:1};try{act(parserState,parseFileBody)}catch(err){var errString="Invalid WebVTT file: "+parserState.src+"\n";errString+="Line: "+parserState.line+", ",errString+="Column: "+parserState.column+"\n",errString+=err,console.warn?console.warn(errString):console.log&&console.log(errString)}return parserState}}(jQuery),function($){AblePlayer.prototype.injectPlayerCode=function(){var thisObj,vidcapContainer,prefsGroups,i;thisObj=this,this.$mediaContainer=this.$media.wrap('<div class="able-media-container"></div>').parent(),this.$ableDiv=this.$mediaContainer.wrap('<div class="able"></div>').parent(),this.$ableWrapper=this.$ableDiv.wrap('<div class="able-wrapper"></div>').parent(),this.$ableWrapper.addClass("able-skin-"+this.skin),this.$ableWrapper.css({"max-width":this.playerMaxWidth+"px"}),this.injectOffscreenHeading(),"video"===this.mediaType&&("image"==this.iconType||"youtube"===this.player&&!this.hasPoster||this.injectBigPlayButton(),vidcapContainer=$("<div>",{class:"able-vidcap-container"}),this.$vidcapContainer=this.$mediaContainer.wrap(vidcapContainer).parent()),this.injectPlayerControlArea(),this.injectTextDescriptionArea(),this.injectAlert(),this.injectPlaylist()},AblePlayer.prototype.injectOffscreenHeading=function(){var headingType;"0"==this.playerHeadingLevel||(void 0===this.playerHeadingLevel&&(this.playerHeadingLevel=this.getNextHeadingLevel(this.$ableDiv)),headingType="h"+this.playerHeadingLevel.toString(),this.$headingDiv=$("<"+headingType+">"),this.$ableDiv.prepend(this.$headingDiv),this.$headingDiv.addClass("able-offscreen"),this.$headingDiv.text(this.tt.playerHeading))},AblePlayer.prototype.injectBigPlayButton=function(){this.$bigPlayButton=$("<button>",{class:"able-big-play-button icon-play","aria-hidden":!0,tabindex:-1});var thisObj=this;this.$bigPlayButton.click((function(){thisObj.handlePlay()})),this.$mediaContainer.append(this.$bigPlayButton)},AblePlayer.prototype.injectPlayerControlArea=function(){this.$playerDiv=$("<div>",{class:"able-player",role:"region","aria-label":this.mediaType+" player"}),this.$playerDiv.addClass("able-"+this.mediaType),this.$nowPlayingDiv=$("<div>",{class:"able-now-playing","aria-live":"assertive","aria-atomic":"true"}),this.$controllerDiv=$("<div>",{class:"able-controller"}),this.$controllerDiv.addClass("able-"+this.iconColor+"-controls"),this.$statusBarDiv=$("<div>",{class:"able-status-bar"}),this.$timer=$("<span>",{class:"able-timer"}),this.$elapsedTimeContainer=$("<span>",{class:"able-elapsedTime",text:"0:00"}),this.$durationContainer=$("<span>",{class:"able-duration"}),this.$timer.append(this.$elapsedTimeContainer).append(this.$durationContainer),this.$speed=$("<span>",{class:"able-speed","aria-live":"assertive"}).text(this.tt.speed+": 1x"),this.$status=$("<span>",{class:"able-status","aria-live":"polite"}),this.$statusBarDiv.append(this.$timer,this.$speed,this.$status),this.$playerDiv.append(this.$nowPlayingDiv,this.$controllerDiv,this.$statusBarDiv),this.$ableDiv.append(this.$playerDiv)},AblePlayer.prototype.injectTextDescriptionArea=function(){this.$descDiv=$("<div>",{class:"able-descriptions"}),this.exposeTextDescriptions&&this.$descDiv.attr({"aria-live":"assertive","aria-atomic":"true"}),this.$descDiv.hide(),this.$ableDiv.append(this.$descDiv)},AblePlayer.prototype.getDefaultWidth=function(which){return"transcript"===which?450:"sign"===which?400:void 0},AblePlayer.prototype.positionDraggableWindow=function(which,width){var cookie,cookiePos,$window,dragged,windowPos,currentWindowPos,firstTime,zIndex;cookie=this.getCookie(),"transcript"===which?($window=this.$transcriptArea,void 0!==cookie.transcript&&(cookiePos=cookie.transcript)):"sign"===which&&($window=this.$signWindow,void 0!==cookie.transcript&&(cookiePos=cookie.sign)),void 0===cookiePos||$.isEmptyObject(cookiePos)?(windowPos=this.getOptimumPosition(which,width),void 0===width&&(width=this.getDefaultWidth(which)),$window.css({position:windowPos[0],width:width,"z-index":windowPos[3]}),"absolute"===windowPos[0]&&$window.css({top:windowPos[1]+"px",left:windowPos[2]+"px"})):($window.css({position:cookiePos.position,width:cookiePos.width,"z-index":cookiePos.zindex}),"absolute"===cookiePos.position&&$window.css({top:cookiePos.top,left:cookiePos.left}),this.updateZIndex(which))},AblePlayer.prototype.getOptimumPosition=function(targetWindow,targetWidth){var gap,position,ableWidth,ableHeight,ableOffset,ableTop,ableLeft,windowWidth,otherWindowWidth,zIndex;return void 0===targetWidth&&(targetWidth=this.getDefaultWidth(targetWindow)),gap=5,position=[],ableWidth=this.$ableDiv.width(),ableHeight=this.$ableDiv.height(),ableTop=(ableOffset=this.$ableDiv.offset()).top,ableLeft=ableOffset.left,windowWidth=$(window).width(),otherWindowWidth=0,"transcript"===targetWindow?void 0!==this.$signWindow&&this.$signWindow.is(":visible")&&(otherWindowWidth=this.$signWindow.width()+5):"sign"===targetWindow&&void 0!==this.$transcriptArea&&this.$transcriptArea.is(":visible")&&(otherWindowWidth=this.$transcriptArea.width()+5),targetWidth<windowWidth-(ableLeft+ableWidth+5+otherWindowWidth)?(position[0]="absolute",position[1]=0,position[2]=ableWidth+otherWindowWidth+5):targetWidth+5<ableLeft?(position[0]="absolute",position[1]=0,position[2]=ableLeft-targetWidth-5):position[0]="relative",position},AblePlayer.prototype.injectPoster=function($element,context){var poster,width,height;"youtube"===context?void 0!==this.ytWidth?(width=this.ytWidth,height=this.ytHeight):void 0!==this.playerMaxWidth?(width=this.playerMaxWidth,height=this.playerMaxHeight):void 0!==this.playerWidth&&(width=this.playerWidth,height=this.playerHeight):"fallback"===context&&(width="100%",height="auto"),this.hasPoster&&(poster=this.$media.attr("poster"),this.$posterImg=$("<img>",{class:"able-poster",src:poster,alt:"",role:"presentation",width:width,height:height}),$element.append(this.$posterImg))},AblePlayer.prototype.injectAlert=function(){var top;this.$alertBox=$('<div role="alert"></div>'),this.$alertBox.addClass("able-alert"),this.$alertBox.hide(),this.$alertBox.appendTo(this.$ableDiv),top="audio"==this.mediaType?"-10":2*Math.round(this.$mediaContainer.height()/3),this.$alertBox.css({top:top+"px"}),this.$srAlertBox=$('<div role="alert"></div>'),this.$srAlertBox.addClass("able-screenreader-alert"),this.$srAlertBox.appendTo(this.$ableDiv)},AblePlayer.prototype.injectPlaylist=function(){if(!0===this.playlistEmbed){var playlistClone=this.$playlistDom.clone();playlistClone.insertBefore(this.$statusBarDiv),this.$playlist=playlistClone.find("li")}},AblePlayer.prototype.createPopup=function(which,tracks){var thisObj,$menu,prefCats,i,$menuItem,prefCat,whichPref,hasDefault,track,windowOptions,whichPref,whichMenu,$thisItem,$prevItem,$nextItem;if(thisObj=this,$menu=$("<ul>",{id:this.mediaId+"-"+which+"-menu",class:"able-popup",role:"menu"}).hide(),"captions"===which&&$menu.addClass("able-popup-captions"),"prefs"===which)if(this.prefCats.length>1){for(i=0;i<this.prefCats.length;i++)$menuItem=$("<li></li>",{role:"menuitem",tabindex:"-1"}),"captions"===(prefCat=this.prefCats[i])?$menuItem.text(this.tt.prefMenuCaptions):"descriptions"===prefCat?$menuItem.text(this.tt.prefMenuDescriptions):"keyboard"===prefCat?$menuItem.text(this.tt.prefMenuKeyboard):"transcript"===prefCat&&$menuItem.text(this.tt.prefMenuTranscript),$menuItem.on("click",(function(){whichPref=$(this).text(),thisObj.showingPrefsDialog=!0,thisObj.setFullscreen(!1),whichPref===thisObj.tt.prefMenuCaptions?thisObj.captionPrefsDialog.show():whichPref===thisObj.tt.prefMenuDescriptions?thisObj.descPrefsDialog.show():whichPref===thisObj.tt.prefMenuKeyboard?thisObj.keyboardPrefsDialog.show():whichPref===thisObj.tt.prefMenuTranscript&&thisObj.transcriptPrefsDialog.show(),thisObj.closePopups(),thisObj.showingPrefsDialog=!1})),$menu.append($menuItem);this.$prefsButton.attr("data-prefs-popup","menu")}else 1==this.prefCats.length&&this.$prefsButton.attr("data-prefs-popup",this.prefCats[0]);else if("captions"===which||"chapters"===which){for(hasDefault=!1,i=0;i<tracks.length;i++)track=tracks[i],$menuItem=$("<li></li>",{role:"menuitemradio",tabindex:"-1",lang:track.language}),track.def&&1==this.prefCaptions?($menuItem.attr("aria-checked","true"),hasDefault=!0):$menuItem.attr("aria-checked","false"),"captions"==which?($menuItem.text(track.label),$menuItem.on("click",this.getCaptionClickFunction(track))):"chapters"==which&&($menuItem.text(this.flattenCueForCaption(track)+" - "+this.formatSecondsAsColonTime(track.start)),$menuItem.on("click",this.getChapterClickFunction(track.start))),$menu.append($menuItem);"captions"===which&&($menuItem=$("<li></li>",{role:"menuitemradio",tabindex:"-1"}).text(this.tt.captionsOff),0===this.prefCaptions&&($menuItem.attr("aria-checked","true"),hasDefault=!0),$menuItem.on("click",this.getCaptionOffFunction()),$menu.append($menuItem))}else if("transcript-window"===which||"sign-window"===which)for((windowOptions=[]).push({name:"move",label:this.tt.windowMove}),windowOptions.push({name:"resize",label:this.tt.windowResize}),windowOptions.push({name:"close",label:this.tt.windowClose}),i=0;i<windowOptions.length;i++)($menuItem=$("<li></li>",{role:"menuitem",tabindex:"-1","data-choice":windowOptions[i].name})).text(windowOptions[i].label),$menuItem.on("click mousedown",(function(e){if(e.stopPropagation(),void 0!==e.button&&0!==e.button)return!1;thisObj.windowMenuClickRegistered||thisObj.finishingDrag||(thisObj.windowMenuClickRegistered=!0,thisObj.handleMenuChoice(which.substr(0,which.indexOf("-")),$(this).attr("data-choice"),e))})),$menu.append($menuItem);return"captions"!==which||hasDefault?"chapters"===which&&($menu.find('li:contains("'+this.defaultChapter+'")')?$menu.find('li:contains("'+this.defaultChapter+'")').attr("aria-checked","true").addClass("able-focus"):$menu.find("li").first().attr("aria-checked","true").addClass("able-focus")):$menu.find("li[lang="+this.captionLang+"]")?$menu.find("li[lang="+this.captionLang+"]").attr("aria-checked","true"):$menu.find("li").last().attr("aria-checked","true"),$menu.on("keydown",(function(e){whichMenu=$(this).attr("id").split("-")[1],($thisItem=$(this).find("li:focus")).is(":first-child")?($prevItem=$(this).find("li").last(),$nextItem=$thisItem.next()):$thisItem.is(":last-child")?($prevItem=$thisItem.prev(),$nextItem=$(this).find("li").first()):($prevItem=$thisItem.prev(),$nextItem=$thisItem.next()),9===e.which?e.shiftKey?($thisItem.removeClass("able-focus"),$prevItem.focus().addClass("able-focus")):($thisItem.removeClass("able-focus"),$nextItem.focus().addClass("able-focus")):40===e.which||39===e.which?($thisItem.removeClass("able-focus"),$nextItem.focus().addClass("able-focus")):38==e.which||37===e.which?($thisItem.removeClass("able-focus"),$prevItem.focus().addClass("able-focus")):32===e.which||13===e.which?$thisItem.click():27===e.which&&($thisItem.removeClass("able-focus"),thisObj.closePopups()),e.preventDefault()})),this.$controllerDiv.append($menu),$menu},AblePlayer.prototype.closePopups=function(){var thisObj=this;this.chaptersPopup&&this.chaptersPopup.is(":visible")&&(this.chaptersPopup.hide(),this.$chaptersButton.removeAttr("aria-expanded").focus()),this.captionsPopup&&this.captionsPopup.is(":visible")&&(this.captionsPopup.hide(),this.$ccButton.removeAttr("aria-expanded").focus()),this.prefsPopup&&this.prefsPopup.is(":visible")&&!this.hidingPopup&&(this.hidingPopup=!0,this.prefsPopup.hide(),this.prefsPopup.find("li").removeClass("able-focus").attr("tabindex","-1"),this.$prefsButton.removeAttr("aria-expanded"),this.showingPrefsDialog||this.$prefsButton.focus(),setTimeout((function(){thisObj.hidingPopup=!1}),100)),this.$volumeSlider&&this.$volumeSlider.is(":visible")&&(this.$volumeSlider.hide().attr("aria-hidden","true"),this.$volumeAlert.text(this.tt.volumeSliderClosed),this.$volumeButton.removeAttr("aria-expanded").focus()),this.$transcriptPopup&&this.$transcriptPopup.is(":visible")&&(this.$transcriptPopup.hide(),this.$transcriptPopup.find("li").removeClass("able-focus").attr("tabindex","-1"),this.$transcriptPopupButton.removeAttr("aria-expanded").focus()),this.$signPopup&&this.$signPopup.is(":visible")&&(this.$signPopup.hide(),this.$signPopup.find("li").removeClass("able-focus").attr("tabindex","-1"),this.$signPopupButton.removeAttr("aria-expanded").focus())},AblePlayer.prototype.setupPopups=function(which){var popups,thisObj,hasDefault,i,j,tracks,track,$trackButton,$trackLabel,radioName,radioId,$menu,$menuItem,prefCats,prefCat,prefLabel;if(popups=[],void 0===which&&popups.push("prefs"),"captions"!==which&&void 0!==which||this.captions.length>0&&popups.push("captions"),"chapters"!==which&&void 0!==which||this.chapters.length>0&&this.useChaptersButton&&popups.push("chapters"),"transcript-window"===which&&"popup"===this.transcriptType&&popups.push("transcript-window"),"sign-window"===which&&this.hasSignLanguage&&popups.push("sign-window"),popups.length>0){thisObj=this;for(var i=0;i<popups.length;i++){var popup=popups[i];if(hasDefault=!1,"prefs"==popup)this.prefsPopup=this.createPopup("prefs");else if("captions"==popup)void 0!==this.captionsPopup&&this.captionsPopup||(this.captionsPopup=this.createPopup("captions",this.captions));else if("chapters"==popup)tracks=this.selectedChapters?this.selectedChapters.cues:this.chapters.length>=1?this.chapters[0].cues:[],void 0!==this.chaptersPopup&&this.chaptersPopup||(this.chaptersPopup=this.createPopup("chapters",tracks));else{if("transcript-window"==popup)return this.createPopup("transcript-window");if("sign-window"==popup)return this.createPopup("sign-window")}}}},AblePlayer.prototype.provideFallback=function(){var $fallbackDiv,width,mediaClone,fallback,fallbackText,showBrowserList,browsers,i,b,browserList;if(showBrowserList=!1,$fallbackDiv=$("<div>",{class:"able-fallback",role:"alert"}),width=void 0!==this.playerMaxWidth?this.playerMaxWidth+"px":this.$media.attr("width")?parseInt(this.$media.attr("width"),10)+"px":"100%",$fallbackDiv.css("max-width",width),mediaClone=this.$media.clone(),$("source, track",mediaClone).remove(),(fallback=mediaClone.html().trim()).length?$fallbackDiv.html(fallback):(fallbackText=this.tt.fallbackError1+" "+this.tt[this.mediaType]+". ",fallbackText+=this.tt.fallbackError2+":",fallback=$("<p>").text(fallbackText),$fallbackDiv.html(fallback),showBrowserList=!0),showBrowserList){for(browserList=$("<ul>"),browsers=this.getSupportingBrowsers(),i=0;i<browsers.length;i++)(b=$("<li>")).text(browsers[i].name+" "+browsers[i].minVersion+" "+this.tt.orHigher),browserList.append(b);$fallbackDiv.append(browserList)}this.injectPoster($fallbackDiv,"fallback"),void 0!==this.$ableWrapper?(this.$ableWrapper.before($fallbackDiv),this.$ableWrapper.remove()):void 0!==this.$media?(this.$media.before($fallbackDiv),this.$media.remove()):$("body").prepend($fallbackDiv)},AblePlayer.prototype.getSupportingBrowsers=function(){var browsers=[];return browsers[0]={name:"Chrome",minVersion:"31"},browsers[1]={name:"Firefox",minVersion:"34"},browsers[2]={name:"Internet Explorer",minVersion:"10"},browsers[3]={name:"Opera",minVersion:"26"},browsers[4]={name:"Safari for Mac OS X",minVersion:"7.1"},browsers[5]={name:"Safari for iOS",minVersion:"7.1"},browsers[6]={name:"Android Browser",minVersion:"4.1"},browsers[7]={name:"Chrome for Android",minVersion:"40"},browsers},AblePlayer.prototype.calculateControlLayout=function(){var controlLayout,volumeSupported,playbackSupported,totalButtonWidth,numA11yButtons;return(controlLayout=[])[0]=[],controlLayout[1]=[],"legacy"===this.skin&&(controlLayout[2]=[],controlLayout[3]=[]),controlLayout[0].push("play"),controlLayout[0].push("restart"),controlLayout[0].push("rewind"),controlLayout[0].push("forward"),"legacy"===this.skin&&controlLayout[1].push("seek"),this.hasPlaylist&&("legacy"===this.skin?(controlLayout[0].push("previous"),controlLayout[0].push("next")):"2020"==this.skin&&(controlLayout[0].push("previous"),controlLayout[0].push("next"))),this.isPlaybackRateSupported()?(playbackSupported=!0,"legacy"===this.skin&&(controlLayout[2].push("slower"),controlLayout[2].push("faster"))):playbackSupported=!1,"video"===this.mediaType&&(numA11yButtons=0,this.hasCaptions&&(numA11yButtons++,"legacy"===this.skin?controlLayout[2].push("captions"):"2020"==this.skin&&controlLayout[1].push("captions")),this.hasSignLanguage&&(numA11yButtons++,"legacy"===this.skin?controlLayout[2].push("sign"):"2020"==this.skin&&controlLayout[1].push("sign")),(this.hasOpenDesc||this.hasClosedDesc)&&this.useDescriptionsButton&&(numA11yButtons++,"legacy"===this.skin?controlLayout[2].push("descriptions"):"2020"==this.skin&&controlLayout[1].push("descriptions"))),"popup"!==this.transcriptType||this.hideTranscriptButton||(numA11yButtons++,"legacy"===this.skin?controlLayout[2].push("transcript"):"2020"==this.skin&&controlLayout[1].push("transcript")),"video"===this.mediaType&&this.hasChapters&&this.useChaptersButton&&(numA11yButtons++,"legacy"===this.skin?controlLayout[2].push("chapters"):"2020"==this.skin&&controlLayout[1].push("chapters")),"2020"==this.skin&&numA11yButtons>0&&controlLayout[1].push("pipe"),playbackSupported&&"2020"===this.skin&&(controlLayout[1].push("faster"),controlLayout[1].push("slower"),controlLayout[1].push("pipe")),"legacy"===this.skin?controlLayout[3].push("preferences"):"2020"==this.skin&&controlLayout[1].push("preferences"),"video"===this.mediaType&&this.allowFullScreen&&("legacy"===this.skin?controlLayout[3].push("fullscreen"):controlLayout[1].push("fullscreen")),this.browserSupportsVolume()?(volumeSupported=!0,this.volumeButton="volume-"+this.getVolumeName(this.volume),"legacy"===this.skin?controlLayout[1].push("volume"):"2020"==this.skin&&controlLayout[1].push("volume")):(volumeSupported=!1,this.volume=!1),controlLayout},AblePlayer.prototype.addControls=function(){var thisObj,baseSliderWidth,controlLayout,numSections,i,j,k,controls,$controllerSpan,$sliderDiv,sliderLabel,$pipe,$pipeImg,svgData,svgPath,control,$buttonLabel,$buttonImg,buttonImgSrc,buttonTitle,$newButton,iconClass,buttonIcon,buttonUse,buttonText,position,buttonHeight,buttonWidth,buttonSide,controllerWidth,tooltipId,tooltipY,tooltipX,tooltipWidth,tooltipStyle,tooltip,captionLabel,popupMenuId;for(thisObj=this,baseSliderWidth=100,numSections=(controlLayout=this.calculateControlLayout()).length,tooltipId=this.mediaId+"-tooltip",this.$tooltipDiv=$("<div>",{id:tooltipId,class:"able-tooltip"}).hide(),this.$controllerDiv.append(this.$tooltipDiv),"2020"==this.skin&&($sliderDiv=$('<div class="able-seekbar"></div>'),sliderLabel=this.mediaType+" "+this.tt.seekbarLabel,this.$controllerDiv.append($sliderDiv),this.seekBar=new AccessibleSlider(this.mediaType,$sliderDiv,"horizontal",100,0,this.duration,this.seekInterval,sliderLabel,"seekbar",!0,"visible")),i=0;i<numSections;i++){for(controls=controlLayout[i],$controllerSpan=$("<div>",i%2==0?{class:"able-left-controls"}:{class:"able-right-controls"}),this.$controllerDiv.append($controllerSpan),j=0;j<controls.length;j++){if("seek"===(control=controls[j]))$sliderDiv=$('<div class="able-seekbar"></div>'),sliderLabel=this.mediaType+" "+this.tt.seekbarLabel,$controllerSpan.append($sliderDiv),void 0!==this.duration&&0!==this.duration||(this.duration=60,this.elapsed=0),this.seekBar=new AccessibleSlider(this.mediaType,$sliderDiv,"horizontal",100,0,this.duration,this.seekInterval,sliderLabel,"seekbar",!0,"visible");else if("pipe"===control)$pipe=$("<span>",{tabindex:"-1","aria-hidden":"true"}),"font"===this.iconType?$pipe.addClass("icon-pipe"):($pipeImg=$("<img>",{src:this.rootPath+"button-icons/"+this.iconColor+"/pipe.png",alt:"",role:"presentation"}),$pipe.append($pipeImg)),$controllerSpan.append($pipe);else{if(buttonImgSrc="volume"===control?this.rootPath+"button-icons/"+this.iconColor+"/"+this.volumeButton+".png":"fullscreen"===control?this.rootPath+"button-icons/"+this.iconColor+"/fullscreen-expand.png":"slower"===control?"animals"===this.speedIcons?this.rootPath+"button-icons/"+this.iconColor+"/turtle.png":this.rootPath+"button-icons/"+this.iconColor+"/slower.png":"faster"===control?"animals"===this.speedIcons?this.rootPath+"button-icons/"+this.iconColor+"/rabbit.png":this.rootPath+"button-icons/"+this.iconColor+"/faster.png":this.rootPath+"button-icons/"+this.iconColor+"/"+control+".png",buttonTitle=this.getButtonTitle(control),$newButton=$("<div>",{role:"button",tabindex:"0","aria-label":buttonTitle,class:"able-button-handler-"+control}),"volume"!==control&&"preferences"!==control||("preferences"==control?(this.prefCats=this.getPreferencesGroups(),this.prefCats.length>1?(popupMenuId=this.mediaId+"-prefs-menu",$newButton.attr({"aria-controls":popupMenuId,"aria-haspopup":"menu"})):1===this.prefCats.length&&$newButton.attr({"aria-haspopup":"dialog"})):"volume"===control&&(popupMenuId=this.mediaId+"-volume-slider",$newButton.attr({"aria-controls":popupMenuId,"aria-expanded":"false"}))),"font"===this.iconType)iconClass="volume"===control?"icon-"+this.volumeButton:"slower"===control?"animals"===this.speedIcons?"icon-turtle":"icon-slower":"faster"===control?"animals"===this.speedIcons?"icon-rabbit":"icon-faster":"icon-"+control,buttonIcon=$("<span>",{class:iconClass,"aria-hidden":"true"}),$newButton.append(buttonIcon);else if("svg"===this.iconType){var svgData;svgData="volume"===control?this.getSvgData(this.volumeButton):"fullscreen"===control?this.getSvgData("fullscreen-expand"):"slower"===control?"animals"===this.speedIcons?this.getSvgData("turtle"):this.getSvgData("slower"):"faster"===control?"animals"===this.speedIcons?this.getSvgData("rabbit"):this.getSvgData("faster"):this.getSvgData(control),buttonIcon=$("<svg>",{focusable:"false","aria-hidden":"true",viewBox:svgData[0]}),svgPath=$("<path>",{d:svgData[1]}),buttonIcon.append(svgPath),$newButton.html(buttonIcon),$newButton.html($newButton.html())}else $buttonImg=$("<img>",{src:buttonImgSrc,alt:"",role:"presentation"}),$newButton.append($buttonImg);var $buttonLabel=$("<span>",{class:"able-clipped"}).text(buttonTitle);$newButton.append($buttonLabel),$newButton.on("mouseenter focus",(function(e){var buttonText=$(this).attr("aria-label"),position=$(this).position(),buttonHeight=$(this).height(),buttonWidth=$(this).width(),controllerWidth=thisObj.$controllerDiv.width();position.right=controllerWidth-position.left-buttonWidth;var tooltipY=position.top-buttonHeight-15;if($(this).parent().hasClass("able-right-controls"))var buttonSide="right";else var buttonSide="left";var tooltipWidth=AblePlayer.localGetElementById($newButton[0],tooltipId).text(buttonText).width();if("left"==buttonSide){var tooltipX;(tooltipX=position.left-tooltipWidth/2)<0&&(tooltipX=2);var tooltipStyle={left:tooltipX+"px",right:"",top:tooltipY+"px"}}else{var tooltipX;(tooltipX=position.right-tooltipWidth/2)<0&&(tooltipX=2);var tooltipStyle={left:"",right:tooltipX+"px",top:tooltipY+"px"}}var tooltip=AblePlayer.localGetElementById($newButton[0],tooltipId).text(buttonText).css(tooltipStyle);thisObj.showTooltip(tooltip),$(this).on("mouseleave blur",(function(){AblePlayer.localGetElementById($newButton[0],tooltipId).text("").hide()}))})),"captions"===control?this.prefCaptions&&1===this.prefCaptions||(captionLabel=this.captions.length>1?this.tt.captions:this.tt.showCaptions,$newButton.addClass("buttonOff").attr("title",captionLabel)):"descriptions"===control&&(this.prefDesc&&1===this.prefDesc||$newButton.addClass("buttonOff").attr("title",this.tt.turnOnDescriptions)),$controllerSpan.append($newButton),"play"===control?this.$playpauseButton=$newButton:"previous"==control?(this.$prevButton=$newButton,"previous"==this.buttonWithFocus&&(this.$prevButton.focus(),this.buttonWithFocus=null)):"next"==control?(this.$nextButton=$newButton,"next"==this.buttonWithFocus&&(this.$nextButton.focus(),this.buttonWithFocus=null)):"captions"===control?this.$ccButton=$newButton:"sign"===control?(this.$signButton=$newButton,this.$signWindow.is(":visible")||this.$signButton.addClass("buttonOff")):"descriptions"===control?this.$descButton=$newButton:"mute"===control?this.$muteButton=$newButton:"transcript"===control?(this.$transcriptButton=$newButton,this.$transcriptDiv.is(":visible")||this.$transcriptButton.addClass("buttonOff").attr("title",this.tt.showTranscript)):"fullscreen"===control?this.$fullscreenButton=$newButton:"chapters"===control?this.$chaptersButton=$newButton:"preferences"===control?this.$prefsButton=$newButton:"volume"===control&&(this.$volumeButton=$newButton)}"volume"===control&&this.addVolumeSlider($controllerSpan)}i%2==1&&this.$controllerDiv.append('<div style="clear:both;"></div>')}for(var sec in"video"===this.mediaType&&(void 0!==this.$captionsDiv&&this.stylizeCaptions(this.$captionsDiv),void 0!==this.$descDiv&&this.stylizeCaptions(this.$descDiv)),this.controls=[],controlLayout)controlLayout.hasOwnProperty(sec)&&(this.controls=this.controls.concat(controlLayout[sec]));this.refreshControls("init")},AblePlayer.prototype.useSvg=function(){var cache=Object.create(null),checkUseElems,tid,debouncedCheck=function(){clearTimeout(tid),tid=setTimeout(checkUseElems,100)},unobserveChanges=function(){},observeChanges=function(){var observer;window.addEventListener("resize",debouncedCheck,!1),window.addEventListener("orientationchange",debouncedCheck,!1),window.MutationObserver?((observer=new MutationObserver(debouncedCheck)).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}),unobserveChanges=function(){try{observer.disconnect(),window.removeEventListener("resize",debouncedCheck,!1),window.removeEventListener("orientationchange",debouncedCheck,!1)}catch(ignore){}}):(document.documentElement.addEventListener("DOMSubtreeModified",debouncedCheck,!1),unobserveChanges=function(){document.documentElement.removeEventListener("DOMSubtreeModified",debouncedCheck,!1),window.removeEventListener("resize",debouncedCheck,!1),window.removeEventListener("orientationchange",debouncedCheck,!1)})},xlinkNS="http://www.w3.org/1999/xlink";checkUseElems=function(){var base,bcr,fallback="",hash,i,Request,inProgressCount=0,isHidden,url,uses,xhr;if(window.XMLHttpRequest&&(Request=void 0!==(Request=new XMLHttpRequest).withCredentials?XMLHttpRequest:XDomainRequest||void 0),void 0!==Request){for(unobserveChanges(),uses=document.getElementsByTagName("use"),i=0;i<uses.length;i+=1){try{bcr=uses[i].getBoundingClientRect()}catch(ignore){bcr=!1}base=(url=uses[i].getAttributeNS(xlinkNS,"href").split("#"))[0],hash=url[1],isHidden=bcr&&0===bcr.left&&0===bcr.right&&0===bcr.top&&0===bcr.bottom,bcr&&0===bcr.width&&0===bcr.height&&!isHidden?base.length&&(!0!==(xhr=cache[base])&&setTimeout(attrUpdateFunc({useEl:uses[i],base:base,hash:hash}),0),void 0===xhr&&(xhr=new Request,cache[base]=xhr,xhr.onload=onloadFunc(xhr),xhr.onerror=onErrorTimeout(xhr),xhr.ontimeout=onErrorTimeout(xhr),xhr.open("GET",base),xhr.send(),inProgressCount+=1)):isHidden||(void 0===cache[base]?cache[base]=!0:cache[base].onload&&(cache[base].abort(),cache[base].onload=void 0,cache[base]=!0))}uses="",inProgressCount+=1,observeIfDone()}function observeIfDone(){0===(inProgressCount-=1)&&observeChanges()}function attrUpdateFunc(spec){return function(){!0!==cache[spec.base]&&spec.useEl.setAttributeNS(xlinkNS,"xlink:href","#"+spec.hash)}}function onloadFunc(xhr){return function(){var body=document.body,x=document.createElement("x"),svg;xhr.onload=null,x.innerHTML=xhr.responseText,(svg=x.getElementsByTagName("svg")[0])&&(svg.setAttribute("aria-hidden","true"),svg.style.position="absolute",svg.style.width=0,svg.style.height=0,svg.style.overflow="hidden",body.insertBefore(svg,body.firstChild)),observeIfDone()}}function onErrorTimeout(xhr){return function(){xhr.onerror=null,xhr.ontimeout=null,observeIfDone()}}}},AblePlayer.prototype.cuePlaylistItem=function(sourceIndex){var $newItem,prevPlayer,newPlayer,itemTitle,itemLang,sources,s,i,$newSource,nowPlayingSpan,thisObj=this;prevPlayer=this.player,this.initializing||this.playerCreated&&this.deletePlayer(),$newItem=this.$playlist.eq(sourceIndex),this.hasAttr($newItem,"data-youtube-id")?(this.youTubeId=$newItem.attr("data-youtube-id"),newPlayer="youtube"):newPlayer="html5","youtube"===newPlayer?"html5"===prevPlayer&&(this.playing&&this.pauseMedia(),this.$media.hide()):(this.youTubeId=!1,"youtube"===prevPlayer&&this.$media.show()),this.player=newPlayer,this.swappingSrc=!0,this.hasAttr($newItem,"data-poster")&&this.$media.attr("poster",$newItem.attr("data-poster")),this.hasAttr($newItem,"data-width")&&this.$media.attr("width",$newItem.attr("data-width")),this.hasAttr($newItem,"data-height")&&this.$media.attr("height",$newItem.attr("data-height")),this.hasAttr($newItem,"data-youtube-desc-id")&&this.$media.attr("data-youtube-desc-id",$newItem.attr("data-youtube-desc-id")),this.youTubeId&&this.$media.attr("data-youtube-id",$newItem.attr("data-youtube-id"));var $sourceSpans=$newItem.children("span.able-source");$sourceSpans.length&&$sourceSpans.each((function(){if(thisObj.hasAttr($(this),"data-src")){var $newSource=$("<source>",{src:$(this).attr("data-src")});thisObj.hasAttr($(this),"data-type")&&$newSource.attr("type",$(this).attr("data-type")),thisObj.hasAttr($(this),"data-desc-src")&&$newSource.attr("data-desc-src",$(this).attr("data-desc-src")),thisObj.hasAttr($(this),"data-sign-src")&&$newSource.attr("data-sign-src",$(this).attr("data-sign-src")),thisObj.$media.append($newSource)}}));var $trackSpans=$newItem.children("span.able-track");$trackSpans.length&&$trackSpans.each((function(){if(thisObj.hasAttr($(this),"data-src")&&thisObj.hasAttr($(this),"data-kind")&&thisObj.hasAttr($(this),"data-srclang")){var $newTrack=$("<track>",{src:$(this).attr("data-src"),kind:$(this).attr("data-kind"),srclang:$(this).attr("data-srclang")});thisObj.hasAttr($(this),"data-label")&&$newTrack.attr("label",$(this).attr("data-label")),thisObj.$media.append($newTrack)}})),itemTitle=$newItem.text(),this.hasAttr($newItem,"lang")&&(itemLang=$newItem.attr("lang")),this.$sources=this.$media.find("source"),this.recreatePlayer(),this.$playlist.removeClass("able-current"),this.$playlist.eq(sourceIndex).addClass("able-current"),!0===this.showNowPlaying&&void 0!==this.$nowPlayingDiv&&(nowPlayingSpan=$("<span>"),void 0!==itemLang&&nowPlayingSpan.attr("lang",itemLang),nowPlayingSpan.html("<span>"+this.tt.selectedTrack+":</span>"+itemTitle),this.$nowPlayingDiv.html(nowPlayingSpan)),this.initializing?this.swappingSrc=!1:(this.swappingSrc=!0,"html5"===this.player?this.media.load():"youtube"===this.player&&(this.okToPlay=!0))},AblePlayer.prototype.deletePlayer=function(){var $youTubeIframe;"youtube"==this.player&&this.$mediaContainer.find("iframe").remove();this.$media.removeAttr("poster width height"),this.$media.empty(),this.$controllerDiv.empty(),this.$elapsedTimeContainer.empty().text("0:00"),this.$durationContainer.empty(),this.$signWindow&&this.$signWindow.remove(),this.$transcriptArea&&this.$transcriptArea.remove(),$(".able-modal-dialog").remove(),this.hasCaptions=!1,this.hasChapters=!1,this.captionsPopup=null,this.chaptersPopup=null},AblePlayer.prototype.getButtonTitle=function(control){return"playpause"===control?this.tt.play:"play"===control?this.tt.play:"pause"===control?this.tt.pause:"restart"===control?this.tt.restart:"previous"===control?this.tt.prevTrack:"next"===control?this.tt.nextTrack:"rewind"===control?this.tt.rewind:"forward"===control?this.tt.forward:"captions"===control?this.captions.length>1?this.tt.captions:this.captionsOn?this.tt.hideCaptions:this.tt.showCaptions:"descriptions"===control?this.descOn?this.tt.turnOffDescriptions:this.tt.turnOnDescriptions:"transcript"===control?this.$transcriptDiv.is(":visible")?this.tt.hideTranscript:this.tt.showTranscript:"chapters"===control?this.tt.chapters:"sign"===control?this.tt.sign:"volume"===control?this.tt.volume:"faster"===control?this.tt.faster:"slower"===control?this.tt.slower:"preferences"===control?this.tt.preferences:"help"!==control?(this.debug&&console.log("Found an untranslated label: "+control),control.charAt(0).toUpperCase()+control.slice(1)):void 0}}(jQuery),function($){AblePlayer.prototype.setupTracks=function(){var thisObj,deferred,promise,loadingPromises,loadingPromise,i,tracks,track;return thisObj=this,promise=(deferred=new $.Deferred).promise(),loadingPromises=[],this.captions=[],this.captionLabels=[],this.descriptions=[],this.chapters=[],this.meta=[],$("#able-vts").length?(this.vtsTracks=[],this.hasVts=!0):this.hasVts=!1,this.getTracks().then((function(){for(tracks=thisObj.tracks,"youtube"===thisObj.player&&tracks.length&&(thisObj.usingYouTubeCaptions=!1),i=0;i<tracks.length;i++){var kind=(track=tracks[i]).kind,trackLang=track.language,trackLabel=track.label;if(track.src){var trackSrc=track.src;loadingPromise=thisObj.loadTextObject(trackSrc),loadingPromises.push(loadingPromise),loadingPromise.then(function(track,kind){var trackSrc=track.src,trackLang=track.language,trackLabel=track.label;return function(trackSrc,trackText){var trackContents=trackText,cues=thisObj.parseWebVTT(trackSrc,trackContents).cues;thisObj.hasVts&&thisObj.setupVtsTracks(kind,trackLang,trackLabel,trackSrc,trackContents),"captions"===kind||"subtitles"===kind?thisObj.setupCaptions(track,trackLang,trackLabel,cues):"descriptions"===kind?thisObj.setupDescriptions(track,cues,trackLang):"chapters"===kind?thisObj.setupChapters(track,cues,trackLang):"metadata"===kind&&thisObj.setupMetadata(track,cues)}}(track,kind))}else(thisObj.usingYouTubeCaptions||thisObj.usingVimeoCaptions)&&thisObj.setupCaptions(track,trackLang,trackLabel)}$.when.apply($,loadingPromises).then((function(){deferred.resolve()}))})),promise},AblePlayer.prototype.getTracks=function(){var thisObj,deferred,promise,captionTracks,trackLang,trackLabel,isDefault;return thisObj=this,promise=(deferred=new $.Deferred).promise(),this.$tracks=this.$media.find("track"),this.tracks=[],this.$tracks.length&&this.$tracks.each((function(){trackLang=$(this).attr("srclang")?$(this).attr("srclang"):thisObj.lang,trackLabel=$(this).attr("label")?$(this).attr("label"):thisObj.getLanguageName(trackLang),(isDefault=!!$(this).attr("default")||trackLang===thisObj.lang)&&(thisObj.captionLang=trackLang),thisObj.tracks.push({kind:$(this).attr("kind"),src:$(this).attr("src"),language:trackLang,label:trackLabel,def:isDefault})})),(captionTracks=this.$media.find('track[kind="captions"],track[kind="subtitles"]')).length?deferred.resolve():"youtube"===this.player?this.getYouTubeCaptionTracks(this.youTubeId).then((function(){deferred.resolve()})):"vimeo"===this.player?this.getVimeoCaptionTracks().then((function(){deferred.resolve()})):deferred.resolve(),promise},AblePlayer.prototype.setupCaptions=function(track,trackLang,trackLabel,cues){var thisObj,inserted,i,capLabel;if(thisObj=this,void 0===cues&&(cues=null),this.hasCaptions=!0,this.$media.find("track").removeAttr("default"),"video"===this.mediaType&&(this.usingYouTubeCaptions||this.usingVimeoCaptions||this.$captionsDiv||(this.$captionsDiv=$("<div>",{class:"able-captions"}),this.$captionsWrapper=$("<div>",{class:"able-captions-wrapper","aria-hidden":"true"}).hide(),"below"===this.prefCaptionsPosition?this.$captionsWrapper.addClass("able-captions-below"):this.$captionsWrapper.addClass("able-captions-overlay"),this.$captionsWrapper.append(this.$captionsDiv),this.$vidcapContainer.append(this.$captionsWrapper))),this.currentCaption=-1,1===this.prefCaptions?this.captionsOn=!0:this.captionsOn=!1,0===this.captions.length)this.captions.push({cues:cues,language:trackLang,label:trackLabel,def:track.def}),this.captionLabels.push(trackLabel);else{for(inserted=!1,i=0;i<this.captions.length;i++)if(capLabel=this.captionLabels[i],trackLabel.toLowerCase()<this.captionLabels[i].toLowerCase()){this.captions.splice(i,0,{cues:cues,language:trackLang,label:trackLabel,def:track.def}),this.captionLabels.splice(i,0,trackLabel),inserted=!0;break}inserted||(this.captions.push({cues:cues,language:trackLang,label:trackLabel,def:track.def}),this.captionLabels.push(trackLabel))}},AblePlayer.prototype.setupDescriptions=function(track,cues,trackLang){this.hasClosedDesc=!0,this.currentDescription=-1,this.descriptions.push({cues:cues,language:trackLang})},AblePlayer.prototype.setupChapters=function(track,cues,trackLang){this.hasChapters=!0,this.chapters.push({cues:cues,language:trackLang})},AblePlayer.prototype.setupMetadata=function(track,cues){"text"===this.metaType?this.metaDiv&&$("#"+this.metaDiv)&&(this.$metaDiv=$("#"+this.metaDiv),this.hasMeta=!0,this.meta=cues):"selector"===this.metaType&&(this.hasMeta=!0,this.visibleSelectors=[],this.meta=cues)},AblePlayer.prototype.loadTextObject=function(src){var deferred,promise,thisObj,$tempDiv;return promise=(deferred=new $.Deferred).promise(),thisObj=this,($tempDiv=$("<div>",{style:"display:none"})).load(src,(function(trackText,status,req){"error"===status?(thisObj.debug&&console.log("error reading file "+src+": "+status),deferred.fail()):deferred.resolve(src,trackText),$tempDiv.remove()})),promise},AblePlayer.prototype.setupAltCaptions=function(){var deferred=new $.Deferred,promise=deferred.promise();return 0===this.captions.length?"youtube"===this.player&&this.usingYouTubeCaptions?this.setupYouTubeCaptions().done((function(){deferred.resolve()})):"vimeo"===this.player&&this.usingVimeoCaptions?this.setupVimeoCaptions().done((function(){deferred.resolve()})):deferred.resolve():deferred.resolve(),promise}}(jQuery),function($){AblePlayer.prototype.initYouTubePlayer=function(){var thisObj,deferred,promise,youTubeId,googleApiPromise,json;return thisObj=this,promise=(deferred=new $.Deferred).promise(),youTubeId=this.youTubeDescId&&this.prefDesc?this.youTubeDescId:this.youTubeId,this.activeYouTubeId=youTubeId,AblePlayer.youtubeIframeAPIReady?this.finalizeYoutubeInit().then((function(){deferred.resolve()})):(AblePlayer.loadingYoutubeIframeAPI||$.getScript("https://www.youtube.com/iframe_api").fail((function(){deferred.fail()})),$("body").on("youtubeIframeAPIReady",(function(){thisObj.finalizeYoutubeInit().then((function(){deferred.resolve()}))}))),promise},AblePlayer.prototype.finalizeYoutubeInit=function(){var deferred,promise,thisObj,containerId,ccLoadPolicy,videoDimensions,autoplay;return promise=(deferred=new $.Deferred).promise(),thisObj=this,containerId=this.mediaId+"_youtube",this.$mediaContainer.prepend($("<div>").attr("id",containerId)),ccLoadPolicy=0,(videoDimensions=this.getYouTubeDimensions(this.activeYouTubeId,containerId))?(this.ytWidth=videoDimensions[0],this.ytHeight=videoDimensions[1],this.aspectRatio=thisObj.ytWidth/thisObj.ytHeight):(this.ytWidth=null,this.ytHeight=null),autoplay=this.okToPlay?1:0,this.youTubePlayer=new YT.Player(containerId,{videoId:this.activeYouTubeId,host:this.youTubeNoCookie?"https://www.youtube-nocookie.com":"https://www.youtube.com",width:this.ytWidth,height:this.ytHeight,playerVars:{autoplay:autoplay,enablejsapi:1,disableKb:1,playsinline:this.playsInline,start:this.startTime,controls:0,cc_load_policy:0,hl:this.lang,modestbranding:1,rel:0,html5:1,iv_load_policy:3},events:{onReady:function(){thisObj.swappingSrc&&(thisObj.swappingSrc=!1,thisObj.cueingPlaylistItem=!1,thisObj.playing&&thisObj.playMedia()),thisObj.userClickedPlaylist&&(thisObj.userClickedPlaylist=!1),void 0===thisObj.aspectRatio&&thisObj.resizeYouTubePlayer(thisObj.activeYouTubeId,containerId),deferred.resolve()},onError:function(x){deferred.fail()},onStateChange:function(x){thisObj.getPlayerState().then((function(playerState){"playing"===playerState?(thisObj.playing=!0,thisObj.startedPlaying=!0,thisObj.paused=!1):"ended"==playerState?thisObj.onMediaComplete():(thisObj.playing=!1,thisObj.paused=!0),thisObj.stoppingYouTube&&"paused"===playerState&&(void 0!==thisObj.$posterImg&&thisObj.$posterImg.show(),thisObj.stoppingYouTube=!1,thisObj.seeking=!1,thisObj.playing=!1,thisObj.paused=!0)}))},onPlaybackQualityChange:function(){},onApiChange:function(x){thisObj.initYouTubeCaptionModule()}}}),this.injectPoster(this.$mediaContainer,"youtube"),this.hasPlaylist||this.$media.remove(),promise},AblePlayer.prototype.getYouTubeDimensions=function(youTubeContainerId){var d,url,$iframe,width,height;return d=[],void 0!==this.playerMaxWidth?(d[0]=this.playerMaxWidth,void 0!==this.playerMaxHeight&&(d[1]=this.playerMaxHeight),d):void 0!==$("#"+youTubeContainerId)&&(width=($iframe=$("#"+youTubeContainerId)).width(),height=$iframe.height(),width>0&&height>0)&&(d[0]=width,d[1]=height,d)},AblePlayer.prototype.resizeYouTubePlayer=function(youTubeId,youTubeContainerId){var d,width,height;void 0!==this.aspectRatio?this.restoringAfterFullScreen?(this.youTubePlayer&&this.youTubePlayer.setSize(this.ytWidth,this.ytHeight),this.restoringAfterFullScreen=!1):(width=this.$ableWrapper.parent().width(),height=Math.round(width/this.aspectRatio),this.$ableWrapper.css({"max-width":width+"px",width:""}),this.youTubePlayer.setSize(width,height),this.fullscreen?this.youTubePlayer.setSize(width,height):this.youTubePlayer.setSize(this.ytWidth,this.ytHeight)):(d=this.getYouTubeDimensions(youTubeContainerId))&&(width=d[0],height=d[1],width>0&&height>0&&(this.aspectRatio=width/height,this.ytWidth=width,this.ytHeight=height,width!==this.$ableWrapper.width()&&(width=this.$ableWrapper.width(),height=Math.round(width/this.aspectRatio),this.youTubePlayer&&this.youTubePlayer.setSize(width,height))))},AblePlayer.prototype.setupYouTubeCaptions=function(){var deferred=new $.Deferred,promise=deferred.promise(),thisObj,googleApiPromise,youTubeId,i;return thisObj=this,youTubeId=this.youTubeDescId&&this.prefDesc?this.youTubeDescId:this.youTubeId,"undefined"!=typeof youTubeDataAPIKey?$.doWhen({when:function(){return googleApiReady},interval:100,attempts:1e3}).done((function(){deferred.resolve()})).fail((function(){console.log("Unable to initialize Google API. YouTube captions are currently unavailable.")})):deferred.resolve(),promise},AblePlayer.prototype.waitForGapi=function(){var thisObj,deferred,promise,maxWaitTime,maxTries,tries,timer,interval;return thisObj=this,promise=(deferred=new $.Deferred).promise(),maxWaitTime=5e3,maxTries=100,tries=0,interval=Math.floor(50),timer=setInterval((function(){tries++,googleApiReady||tries>=100?(clearInterval(timer),googleApiReady?deferred.resolve(!0):deferred.resolve(!1)):thisObj.waitForGapi()}),interval),promise},AblePlayer.prototype.getYouTubeCaptionTracks=function(youTubeId){var deferred=new $.Deferred,promise=deferred.promise(),thisObj,useGoogleApi,i,trackId,trackLang,trackName,trackLabel,trackKind,isDraft,isDefaultTrack;return thisObj=this,"undefined"!=typeof youTubeDataAPIKey?this.waitForGapi().then((function(waitResult){!0===(useGoogleApi=waitResult)?(gapi.client.setApiKey(youTubeDataAPIKey),gapi.client.load("youtube","v3").then((function(){var request;gapi.client.youtube.captions.list({part:"id, snippet",videoId:youTubeId}).then((function(json){if(json.result.items.length){for(thisObj.hasCaptions=!0,thisObj.usingYouTubeCaptions=!0,1===thisObj.prefCaptions?thisObj.captionsOn=!0:thisObj.captionsOn=!1,i=0;i<json.result.items.length;i++){trackName=json.result.items[i].snippet.name,trackLang=json.result.items[i].snippet.language,trackKind=json.result.items[i].snippet.trackKind,isDraft=json.result.items[i].snippet.isDraft;var srcUrl=thisObj.getYouTubeTimedTextUrl(youTubeId,trackName,trackLang);"ASR"===trackKind||isDraft||(trackLabel=""!==trackName?trackName:thisObj.getLanguageName(trackLang),isDefaultTrack=trackLang===thisObj.lang,thisObj.tracks.push({kind:"captions",src:srcUrl,language:trackLang,label:trackLabel,def:isDefaultTrack}))}thisObj.setupPopups("captions"),deferred.resolve()}else thisObj.hasCaptions=!1,thisObj.usingYouTubeCaptions=!1,deferred.resolve()}),(function(reason){console.log("Error retrieving captions."),console.log("Check your video on YouTube to be sure captions are available and published."),thisObj.hasCaptions=!1,thisObj.usingYouTubeCaptions=!1,deferred.resolve()}))}))):this.getYouTubeCaptionTracks2(youTubeId).then((function(){deferred.resolve()}))})):this.getYouTubeCaptionTracks2(youTubeId).then((function(){deferred.resolve()})),promise},AblePlayer.prototype.getYouTubeCaptionTracks2=function(youTubeId){var deferred=new $.Deferred,promise=deferred.promise(),thisObj,useGoogleApi,i,trackId,trackLang,trackName,trackLabel,trackKind,isDraft,isDefaultTrack;return thisObj=this,$.ajax({type:"get",url:"https://www.youtube.com/api/timedtext?type=list&v="+youTubeId,dataType:"xml",success:function(xml){var $tracks=$(xml).find("track");$tracks.length>0?(thisObj.hasCaptions=!0,thisObj.usingYouTubeCaptions=!0,1===thisObj.prefCaptions?thisObj.captionsOn=!0:thisObj.captionsOn=!1,$tracks.each((function(){trackId=$(this).attr("id"),trackLang=$(this).attr("lang_code"),""!==$(this).attr("name")?(trackName=$(this).attr("name"),trackLabel=trackName):(trackName="",trackLabel=$(this).attr("lang_translated")),""===trackLabel&&(trackLabel=thisObj.getLanguageName(trackLang)),isDefaultTrack=trackLang===thisObj.lang;var srcUrl=thisObj.getYouTubeTimedTextUrl(youTubeId,trackName,trackLang);thisObj.tracks.push({kind:"captions",src:srcUrl,language:trackLang,label:trackLabel,def:isDefaultTrack})})),thisObj.setupPopups("captions"),deferred.resolve()):(thisObj.hasCaptions=!1,thisObj.usingYouTubeCaptions=!1,deferred.resolve())},error:function(xhr,status){console.log("Error retrieving YouTube caption data for video "+youTubeId),deferred.resolve()}}),promise},AblePlayer.prototype.getYouTubeTimedTextUrl=function(youTubeId,trackName,trackLang){var url="https://www.youtube.com/api/timedtext?fmt=vtt";return url+="&v="+youTubeId,url+="&lang="+trackLang,""!==trackName&&(url+="&name="+trackName),url},AblePlayer.prototype.getYouTubeCaptionCues=function(youTubeId){var deferred,promise,thisObj,deferred,promise=(deferred=new $.Deferred).promise();return thisObj=this,this.tracks=[],this.tracks.push({kind:"captions",src:"some_file.vtt",language:"en",label:"Fake English captions"}),deferred.resolve(),promise},AblePlayer.prototype.initYouTubeCaptionModule=function(){var options,fontSize,displaySettings;if((options=this.youTubePlayer.getOptions()).length){for(var i=0;i<options.length;i++){if("cc"==options[i]){this.ytCaptionModule="cc",this.hasCaptions||(this.hasCaptions=!0,this.usingYouTubeCaptions=!0);break}if("captions"==options[i]){this.ytCaptionModule="captions",this.hasCaptions||(this.hasCaptions=!0,this.usingYouTubeCaptions=!0);break}}void 0!==this.ytCaptionModule&&(this.usingYouTubeCaptions?(this.youTubePlayer.setOption(this.ytCaptionModule,"track",{languageCode:this.captionLang}),this.youTubePlayer.setOption(this.ytCaptionModule,"fontSize",this.translatePrefs("size",this.prefCaptionsSize,"youtube"))):this.youTubePlayer.unloadModule(this.ytCaptionModule))}else this.hasCaptions=!1,this.usingYouTubeCaptions=!1;this.refreshControls("captions")},AblePlayer.prototype.getYouTubePosterUrl=function(youTubeId,width){var url="https://img.youtube.com/vi/"+youTubeId;return"120"==width?url+"/default.jpg":"320"==width?url+"/hqdefault.jpg":"480"==width?url+"/hqdefault.jpg":"640"==width&&url+"/sddefault.jpg"}}(jQuery),function($){window.AccessibleSlider=function(mediaType,div,orientation,length,min,max,bigInterval,label,className,trackingMedia,initialState){var thisObj,coords;thisObj=this,this.position=0,this.tracking=!1,this.trackDevice=null,this.keyTrackPosition=0,this.lastTrackPosition=0,this.nextStep=1,this.inertiaCount=0,this.bodyDiv=$(div),trackingMedia&&(this.loadedDiv=$("<div></div>"),this.playedDiv=$("<div></div>")),this.seekHead=$("<div>",{orientation:orientation,class:"able-"+className+"-head"}),"visible"===initialState?this.seekHead.attr("tabindex","0"):this.seekHead.attr("tabindex","-1"),this.seekHead.attr({role:"slider","aria-label":label,"aria-valuemin":min,"aria-valuemax":max}),this.timeTooltip=$("<div>"),this.bodyDiv.append(this.timeTooltip),this.timeTooltip.attr("role","tooltip"),this.timeTooltip.addClass("able-tooltip"),this.timeTooltip.hide(),this.bodyDiv.append(this.loadedDiv),this.bodyDiv.append(this.playedDiv),this.bodyDiv.append(this.seekHead),this.bodyDiv.wrap("<div></div>"),this.wrapperDiv=this.bodyDiv.parent(),"legacy"===this.skin&&("horizontal"===orientation?(this.wrapperDiv.width(length),this.loadedDiv.width(0)):(this.wrapperDiv.height(length),this.loadedDiv.height(0))),this.wrapperDiv.addClass("able-"+className+"-wrapper"),trackingMedia&&(this.loadedDiv.addClass("able-"+className+"-loaded"),this.playedDiv.width(0),this.playedDiv.addClass("able-"+className+"-played"),this.setDuration(max)),this.seekHead.on("mouseenter mouseleave mousemove mousedown mouseup focus blur touchstart touchmove touchend",(function(e){coords=thisObj.pointerEventToXY(e),"mouseenter"===e.type||"focus"===e.type?thisObj.overHead=!0:"mouseleave"===e.type||"blur"===e.type?(thisObj.overHead=!1,!thisObj.overBody&&thisObj.tracking&&"mouse"===thisObj.trackDevice&&thisObj.stopTracking(thisObj.pageXToPosition(coords.x))):"mousemove"===e.type||"touchmove"===e.type?thisObj.tracking&&"mouse"===thisObj.trackDevice&&thisObj.trackHeadAtPageX(coords.x):"mousedown"===e.type||"touchstart"===e.type?(thisObj.startTracking("mouse",thisObj.pageXToPosition(thisObj.seekHead.offset()+thisObj.seekHead.width()/2)),thisObj.bodyDiv.is(":focus")||thisObj.bodyDiv.focus(),e.preventDefault()):"mouseup"!==e.type&&"touchend"!==e.type||thisObj.tracking&&"mouse"===thisObj.trackDevice&&thisObj.stopTracking(thisObj.pageXToPosition(coords.x)),"mousemove"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type&&"touchstart"!==e.type&&"touchend"!==e.type&&thisObj.refreshTooltip()})),this.bodyDiv.on("mouseenter mouseleave mousemove mousedown mouseup keydown keyup touchstart touchmove touchend",(function(e){if(coords=thisObj.pointerEventToXY(e),"mouseenter"===e.type)thisObj.overBody=!0;else if("mouseleave"===e.type)thisObj.overBody=!1,thisObj.overBodyMousePos=null,!thisObj.overHead&&thisObj.tracking&&"mouse"===thisObj.trackDevice&&thisObj.stopTracking(thisObj.pageXToPosition(coords.x));else if("mousemove"===e.type||"touchmove"===e.type)thisObj.overBodyMousePos={x:coords.x,y:coords.y},thisObj.tracking&&"mouse"===thisObj.trackDevice&&thisObj.trackHeadAtPageX(coords.x);else if("mousedown"===e.type||"touchstart"===e.type)thisObj.startTracking("mouse",thisObj.pageXToPosition(coords.x)),thisObj.trackHeadAtPageX(coords.x),thisObj.seekHead.is(":focus")||thisObj.seekHead.focus(),e.preventDefault();else if("mouseup"===e.type||"touchend"===e.type)thisObj.tracking&&"mouse"===thisObj.trackDevice&&thisObj.stopTracking(thisObj.pageXToPosition(coords.x));else if("keydown"===e.type){if(36===e.which)thisObj.trackImmediatelyTo(0);else if(35===e.which)thisObj.trackImmediatelyTo(thisObj.duration);else if(37===e.which||40===e.which)thisObj.arrowKeyDown(-1);else if(39===e.which||38===e.which)thisObj.arrowKeyDown(1);else if(33===e.which&&bigInterval>0)thisObj.arrowKeyDown(bigInterval);else{if(!(34===e.which&&bigInterval>0))return;thisObj.arrowKeyDown(-bigInterval)}e.preventDefault()}else"keyup"===e.type&&e.which>=33&&e.which<=40&&(thisObj.tracking&&"keyboard"===thisObj.trackDevice&&thisObj.stopTracking(thisObj.keyTrackPosition),e.preventDefault());"mouseup"!==e.type&&"keydown"!==e.type&&"keydown"!==e.type&&thisObj.refreshTooltip()}))},AccessibleSlider.prototype.arrowKeyDown=function(multiplier){this.tracking&&"keyboard"===this.trackDevice?(this.keyTrackPosition=this.boundPos(this.keyTrackPosition+this.nextStep*multiplier),this.inertiaCount+=1,20===this.inertiaCount&&(this.inertiaCount=0,this.nextStep*=2),this.trackHeadAtPosition(this.keyTrackPosition)):(this.nextStep=1,this.inertiaCount=0,this.keyTrackPosition=this.boundPos(this.position+this.nextStep*multiplier),this.startTracking("keyboard",this.keyTrackPosition),this.trackHeadAtPosition(this.keyTrackPosition))},AccessibleSlider.prototype.pageXToPosition=function(pageX){var offset=pageX-this.bodyDiv.offset().left,position=this.duration*(offset/this.bodyDiv.width());return this.boundPos(position)},AccessibleSlider.prototype.boundPos=function(position){return Math.max(0,Math.min(position,this.duration))},AccessibleSlider.prototype.setDuration=function(duration){duration!==this.duration&&(this.duration=duration,this.resetHeadLocation(),this.seekHead.attr("aria-valuemax",duration))},AccessibleSlider.prototype.setWidth=function(width){this.wrapperDiv.width(width),this.resizeDivs(),this.resetHeadLocation()},AccessibleSlider.prototype.getWidth=function(){return this.wrapperDiv.width()},AccessibleSlider.prototype.resizeDivs=function(){this.playedDiv.width(this.bodyDiv.width()*(this.position/this.duration)),this.loadedDiv.width(this.bodyDiv.width()*this.buffered)},AccessibleSlider.prototype.resetHeadLocation=function(){var ratio=this.position/this.duration,center=this.bodyDiv.width()*ratio;this.seekHead.css("left",center-this.seekHead.width()/2),this.tracking&&this.stopTracking(this.position)},AccessibleSlider.prototype.setPosition=function(position,updateLive){this.position=position,this.resetHeadLocation(),this.refreshTooltip(),this.resizeDivs(),this.updateAriaValues(position,updateLive)},AccessibleSlider.prototype.setBuffered=function(ratio){isNaN(ratio)||(this.buffered=ratio,this.redrawDivs)},AccessibleSlider.prototype.startTracking=function(device,position){this.tracking||(this.trackDevice=device,this.tracking=!0,this.bodyDiv.trigger("startTracking",[position]))},AccessibleSlider.prototype.stopTracking=function(position){this.trackDevice=null,this.tracking=!1,this.bodyDiv.trigger("stopTracking",[position]),this.setPosition(position,!0)},AccessibleSlider.prototype.trackHeadAtPageX=function(pageX){var position=this.pageXToPosition(pageX),newLeft=pageX-this.bodyDiv.offset().left-this.seekHead.width()/2;newLeft=Math.max(0,Math.min(newLeft,this.bodyDiv.width()-this.seekHead.width())),this.lastTrackPosition=position,this.seekHead.css("left",newLeft),this.reportTrackAtPosition(position)},AccessibleSlider.prototype.trackHeadAtPosition=function(position){var ratio=position/this.duration,center=this.bodyDiv.width()*ratio;this.lastTrackPosition=position,this.seekHead.css("left",center-this.seekHead.width()/2),this.reportTrackAtPosition(position)},AccessibleSlider.prototype.reportTrackAtPosition=function(position){this.bodyDiv.trigger("tracking",[position]),this.updateAriaValues(position,!0)},AccessibleSlider.prototype.updateAriaValues=function(position,updateLive){var pHours=Math.floor(position/3600),pMinutes=Math.floor(position%3600/60),pSeconds=Math.floor(position%60),pHourWord,pMinuteWord=1===pMinutes?"minute":"minutes",pSecondWord=1===pSeconds?"second":"seconds",descriptionText;descriptionText=pHours>0?pHours+" "+(1===pHours?"hour":"hours")+", "+pMinutes+" "+pMinuteWord+", "+pSeconds+" "+pSecondWord:pMinutes>0?pMinutes+" "+pMinuteWord+", "+pSeconds+" "+pSecondWord:pSeconds+" "+pSecondWord,this.liveAriaRegion||(this.liveAriaRegion=$("<span>",{class:"able-offscreen","aria-live":"polite"}),this.wrapperDiv.append(this.liveAriaRegion)),updateLive&&this.liveAriaRegion.text()!==descriptionText&&this.liveAriaRegion.text(descriptionText),this.seekHead.attr("aria-valuetext",descriptionText),this.seekHead.attr("aria-valuenow",Math.floor(position).toString())},AccessibleSlider.prototype.trackImmediatelyTo=function(position){this.startTracking("keyboard",position),this.trackHeadAtPosition(position),this.keyTrackPosition=position},AccessibleSlider.prototype.refreshTooltip=function(){this.overHead?(this.timeTooltip.show(),this.tracking?this.timeTooltip.text(this.positionToStr(this.lastTrackPosition)):this.timeTooltip.text(this.positionToStr(this.position)),this.setTooltipPosition(this.seekHead.position().left+this.seekHead.width()/2)):this.overBody&&this.overBodyMousePos?(this.timeTooltip.show(),this.timeTooltip.text(this.positionToStr(this.pageXToPosition(this.overBodyMousePos.x))),this.setTooltipPosition(this.overBodyMousePos.x-this.bodyDiv.offset().left)):this.timeTooltip.hide()},AccessibleSlider.prototype.setTooltipPosition=function(x){this.timeTooltip.css({left:x-this.timeTooltip.width()/2-10,bottom:this.seekHead.height()+10})},AccessibleSlider.prototype.positionToStr=function(seconds){var dHours=Math.floor(seconds/3600),dMinutes=Math.floor(seconds/60)%60,dSeconds=Math.floor(seconds%60);return dSeconds<10&&(dSeconds="0"+dSeconds),dHours>0?(dMinutes<10&&(dMinutes="0"+dMinutes),dHours+":"+dMinutes+":"+dSeconds):dMinutes+":"+dSeconds},AccessibleSlider.prototype.pointerEventToXY=function(e){var out={x:0,y:0};if("touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"touchcancel"==e.type){var touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];out.x=touch.pageX,out.y=touch.pageY}else"mousedown"!=e.type&&"mouseup"!=e.type&&"mousemove"!=e.type&&"mouseover"!=e.type&&"mouseout"!=e.type&&"mouseenter"!=e.type&&"mouseleave"!=e.type||(out.x=e.pageX,out.y=e.pageY);return out}}(jQuery),function($){AblePlayer.prototype.addVolumeSlider=function($div){var thisObj,volumeSliderId,volumeHelpId,x,y,volumePct;thisObj=this,volumeSliderId=this.mediaId+"-volume-slider",volumeHelpId=this.mediaId+"-volume-help",this.volumeTrackHeight=50,this.volumeHeadHeight=7,this.volumeTickHeight=this.volumeTrackHeight/10,this.$volumeSlider=$("<div>",{id:volumeSliderId,class:"able-volume-slider","aria-hidden":"true"}).hide(),this.$volumeSliderTooltip=$("<div>",{class:"able-tooltip",role:"tooltip"}).hide(),this.$volumeSliderTrack=$("<div>",{class:"able-volume-track"}),this.$volumeSliderTrackOn=$("<div>",{class:"able-volume-track able-volume-track-on"}),this.$volumeSliderHead=$("<div>",{class:"able-volume-head",role:"slider","aria-orientation":"vertical","aria-label":this.tt.volumeUpDown,"aria-valuemin":0,"aria-valuemax":10,"aria-valuenow":this.volume,tabindex:-1}),this.$volumeSliderTrack.append(this.$volumeSliderTrackOn,this.$volumeSliderHead),this.$volumeAlert=$("<div>",{class:"able-offscreen","aria-live":"assertive","aria-atomic":"true"}),volumePct=parseInt(thisObj.volume)/10*100,this.$volumeHelp=$("<div>",{id:volumeHelpId,class:"able-volume-help"}).text(volumePct+"%, "+this.tt.volumeHelp),this.$volumeButton.attr({"aria-describedby":volumeHelpId}),this.$volumeSlider.append(this.$volumeSliderTooltip,this.$volumeSliderTrack,this.$volumeAlert,this.$volumeHelp),$div.append(this.$volumeSlider),this.refreshVolumeSlider(this.volume),this.$volumeSliderHead.on("mousedown",(function(e){e.preventDefault(),thisObj.draggingVolume=!0,thisObj.volumeHeadPositionTop=$(this).offset().top})),this.$mediaContainer.on("mouseover",(function(e){"youtube"==thisObj.player&&(thisObj.draggingVolume=!1)})),$(document).on("mouseup",(function(e){thisObj.draggingVolume=!1})),$(document).on("mousemove",(function(e){thisObj.draggingVolume&&(x=e.pageX,y=e.pageY,thisObj.moveVolumeHead(y))})),this.$volumeSliderHead.on("keydown",(function(e){if(37===e.which||40===e.which)thisObj.handleVolume("down");else if(39===e.which||38===e.which)thisObj.handleVolume("up");else{if(27!==e.which&&13!==e.which&&9!==e.which)return;thisObj.$volumeSlider.is(":visible")?(thisObj.closingVolume=!0,thisObj.hideVolumePopup()):thisObj.closingVolume||thisObj.showVolumePopup()}e.preventDefault()}))},AblePlayer.prototype.refreshVolumeSlider=function(volume){var volumePct,volumePctText,trackOnHeight,trackOnTop,headTop;volumePctText=(volumePct=volume/10*100)+"%",trackOnHeight=volume*this.volumeTickHeight,headTop=(trackOnTop=this.volumeTrackHeight-trackOnHeight)-this.volumeHeadHeight,this.$volumeSliderTrackOn&&this.$volumeSliderTrackOn.css({height:trackOnHeight+"px",top:trackOnTop+"px"}),this.$volumeSliderHead&&(this.$volumeSliderHead.attr({"aria-valuenow":volume,"aria-valuetext":volumePctText}),this.$volumeSliderHead.css({top:headTop+"px"})),this.$volumeAlert&&this.$volumeAlert.text(volumePct+"%")},AblePlayer.prototype.refreshVolumeButton=function(volume){var volumeName,volumePct,volumeLabel,volumeIconClass,volumeImg,newSvgData;volumeName=this.getVolumeName(volume),volumePct=volume/10*100,volumeLabel=this.tt.volume+" "+volumePct+"%","font"===this.iconType?(volumeIconClass="icon-volume-"+volumeName,this.$volumeButton.find("span").first().removeClass().addClass(volumeIconClass),this.$volumeButton.find("span.able-clipped").text(volumeLabel)):"image"===this.iconType?(volumeImg=this.imgPath+"volume-"+volumeName+".png",this.$volumeButton.find("img").attr("src",volumeImg)):"svg"===this.iconType&&("mute"!==volumeName&&(volumeName="volume-"+volumeName),newSvgData=this.getSvgData(volumeName),this.$volumeButton.find("svg").attr("viewBox",newSvgData[0]),this.$volumeButton.find("path").attr("d",newSvgData[1]))},AblePlayer.prototype.moveVolumeHead=function(y){var diff,direction,ticksDiff,newVolume,maxedOut,diff=this.volumeHeadPositionTop-y;if(Math.abs(diff)>this.volumeTickHeight){if("up"==(direction=diff>0?"up":"down")&&10==this.volume)return;if("down"==direction&&0==this.volume)return;ticksDiff=Math.round(Math.abs(diff)/this.volumeTickHeight),"up"==direction?(newVolume=this.volume+ticksDiff)>10&&(newVolume=10):(newVolume=this.volume-ticksDiff)<0&&(newVolume=0),this.setVolume(newVolume),this.refreshVolumeSlider(newVolume),this.refreshVolumeButton(newVolume),this.volumeHeadPositionTop=y}},AblePlayer.prototype.handleVolume=function(direction){var volume;void 0!==direction?(direction>=49&&direction<=57?volume=direction-48:(volume=this.getVolume(),"up"===direction&&volume<10?volume+=1:"down"===direction&&volume>0&&(volume-=1)),this.isMuted()&&volume>0?this.setMute(!1):0===volume?this.setMute(!0):(this.setVolume(volume),this.refreshVolumeSlider(volume),this.refreshVolumeButton(volume))):this.$volumeSlider.is(":visible")?this.hideVolumePopup():this.closingVolume||this.showVolumePopup()},AblePlayer.prototype.handleMute=function(){this.isMuted()?this.setMute(!1):this.setMute(!0)},AblePlayer.prototype.showVolumePopup=function(){this.closePopups(),this.$tooltipDiv.hide(),this.$volumeSlider.show().attr("aria-hidden","false"),this.$volumeButton.attr("aria-expanded","true"),this.$volumeSliderHead.attr("tabindex","0").focus()},AblePlayer.prototype.hideVolumePopup=function(){var thisObj=this;this.$volumeSlider.hide().attr("aria-hidden","true"),this.$volumeSliderHead.attr("tabindex","-1"),this.$volumeButton.attr("aria-expanded","false").focus(),setTimeout((function(){thisObj.closingVolume=!1}),1e3)},AblePlayer.prototype.isMuted=function(){return"html5"===this.player?this.media.muted:"jw"===this.player&&this.jwPlayer?this.jwPlayer.getMute():"youtube"===this.player?this.youTubePlayer.isMuted():void 0},AblePlayer.prototype.setMute=function(mute){mute?(this.lastVolume=this.volume,this.volume=0):void 0!==this.lastVolume&&(this.volume=this.lastVolume),"html5"===this.player?this.media.muted=mute:"jw"===this.player&&this.jwPlayer?this.jwPlayer.setMute(mute):"youtube"===this.player&&(mute?this.youTubePlayer.mute():this.youTubePlayer.unMute()),this.refreshVolumeSlider(this.volume),this.refreshVolumeButton(this.volume)},AblePlayer.prototype.setVolume=function(volume){"html5"===this.player?(this.media.volume=volume/10,this.hasSignLanguage&&this.signVideo&&(this.signVideo.volume=0)):"youtube"===this.player?(this.youTubePlayer.setVolume(10*volume),this.volume=volume):"vimeo"===this.player?this.vimeoPlayer.setVolume(volume/10).then((function(){})):"jw"===this.player&&this.jwPlayer&&this.jwPlayer.setVolume(10*volume),this.lastVolume=volume},AblePlayer.prototype.getVolume=function(volume){return"html5"===this.player?10*this.media.volume:"youtube"===this.player?this.youTubePlayer.getVolume()/10:"vimeo"===this.player?this.volume:"jw"===this.player&&this.jwPlayer?this.jwPlayer.getVolume()/10:void 0},AblePlayer.prototype.getVolumeName=function(volume){return 0==volume?"mute":10==volume?"loud":volume<5?"soft":"medium"}}(jQuery),function($){var focusableElementsSelector="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";window.AccessibleDialog=function(modalDiv,$returnElement,dialogRole,title,$descDiv,closeButtonLabel,width,fullscreen,escapeHook){this.title=title,this.closeButtonLabel=closeButtonLabel,this.focusedElementBeforeModal=$returnElement,this.escapeHook=escapeHook,this.baseId=$(modalDiv).attr("id")||Math.floor(1e9*Math.random()).toString();var thisObj=this,modal=modalDiv;if(this.modal=modal,modal.css({width:width||"50%",top:fullscreen?"0":"5%"}),modal.addClass("able-modal-dialog"),!fullscreen){var closeButton=$("<button>",{class:"modalCloseButton",title:thisObj.closeButtonLabel,"aria-label":thisObj.closeButtonLabel}).text("X");closeButton.keydown((function(e){32===e.which&&thisObj.hide()})).click((function(){thisObj.hide()}));var titleH1=$("<h1></h1>");titleH1.attr("id","modalTitle-"+this.baseId),titleH1.css("text-align","center"),titleH1.text(title),$descDiv.attr("id","modalDesc-"+this.baseId),modal.attr({"aria-labelledby":"modalTitle-"+this.baseId,"aria-describedby":"modalDesc-"+this.baseId}),modal.prepend(titleH1),modal.prepend(closeButton)}modal.attr({"aria-hidden":"true",role:dialogRole}),modal.keydown((function(e){if(27===e.which)thisObj.escapeHook?thisObj.escapeHook(e,this):(thisObj.hide(),e.preventDefault());else if(9===e.which){var parts,focusable=modal.find("*").filter(focusableElementsSelector).filter(":visible");if(0===focusable.length)return;var focused=$(":focus"),currentIndex=focusable.index(focused);e.shiftKey?0===currentIndex&&(focusable.get(focusable.length-1).focus(),e.preventDefault()):currentIndex===focusable.length-1&&(focusable.get(0).focus(),e.preventDefault())}e.stopPropagation()})),$("body > *").not(".able-modal-overlay").not(".able-modal-dialog").removeAttr("aria-hidden")},AccessibleDialog.prototype.show=function(){if(!this.overlay){var overlay=$("<div></div>").attr({class:"able-modal-overlay",tabindex:"-1"});this.overlay=overlay,$("body").append(overlay),overlay.on("mousedown.accessibleModal",(function(e){e.preventDefault()}))}var focusable;$("body > *").not(".able-modal-overlay").not(".able-modal-dialog").attr("aria-hidden","true"),this.overlay.css("display","block"),this.modal.css("display","block"),this.modal.attr({"aria-hidden":"false",tabindex:"-1"}),0===this.modal.find("*").filter(focusableElementsSelector).filter(":visible").length&&this.focusedElementBeforeModal.blur();var thisObj=this;setTimeout((function(){thisObj.modal.find("button.modalCloseButton").first().focus()}),300)},AccessibleDialog.prototype.hide=function(){this.overlay&&this.overlay.css("display","none"),this.modal.css("display","none"),this.modal.attr("aria-hidden","true"),$("body > *").not(".able-modal-overlay").not(".able-modal-dialog").removeAttr("aria-hidden"),this.focusedElementBeforeModal.focus()},AccessibleDialog.prototype.getInputs=function(){var inputs;return!!this.modal&&this.modal.find("input")}}(jQuery),function($){AblePlayer.prototype.getNextHeadingLevel=function($element){var $parents,$foundHeadings,numHeadings,headingType,headingNumber;return($parents=$element.parents()).each((function(){if($foundHeadings=$(this).children(":header"),numHeadings=$foundHeadings.length)return headingType=$foundHeadings.eq(numHeadings-1).prop("tagName"),!1})),void 0===headingType?headingNumber=1:(headingNumber=parseInt(headingType[1]),(headingNumber+=1)>6&&(headingNumber=6)),headingNumber},AblePlayer.prototype.countProperties=function(obj){var count,prop;for(prop in count=0,obj)obj.hasOwnProperty(prop)&&++count;return count},AblePlayer.prototype.formatSecondsAsColonTime=function(seconds,showFullTime){var dHours,dMinutes,dSeconds,parts,milliSeconds,numShort,i;if(showFullTime)if(2===(parts=seconds.toString().split(".")).length){if((milliSeconds=parts[1]).length<3)for(numShort=3-milliSeconds.length,i=1;i<=numShort;i++)milliSeconds+="0"}else milliSeconds="000";return dHours=Math.floor(seconds/3600),dMinutes=Math.floor(seconds/60)%60,(dSeconds=Math.floor(seconds%60))<10&&(dSeconds="0"+dSeconds),dHours>0?(dMinutes<10&&(dMinutes="0"+dMinutes),showFullTime?dHours+":"+dMinutes+":"+dSeconds+"."+milliSeconds:dHours+":"+dMinutes+":"+dSeconds):showFullTime?(dHours<1?dHours="00":dHours<10&&(dHours="0"+dHours),dMinutes<1?dMinutes="00":dMinutes<10&&(dMinutes="0"+dMinutes),dHours+":"+dMinutes+":"+dSeconds+"."+milliSeconds):dMinutes+":"+dSeconds},AblePlayer.prototype.getSecondsFromColonTime=function(timeStr){var timeParts,hours,minutes,seconds,newTime;return 3===(timeParts=timeStr.split(":")).length?3600*(hours=parseInt(timeParts[0]))+60*(minutes=parseInt(timeParts[1]))+(seconds=parseFloat(timeParts[2])):2===timeParts.length?60*(minutes=parseInt(timeParts[0]))+(seconds=parseFloat(timeParts[1])):1===timeParts.length?seconds=parseFloat(timeParts[0]):void 0},AblePlayer.prototype.capitalizeFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1)},AblePlayer.prototype.roundDown=function(value,decimals){return Number(Math.floor(value+"e"+decimals)+"e-"+decimals)},AblePlayer.prototype.hasAttr=function(object,attribute){var attr=object.attr(attribute);return void 0!==attr&&!1!==attr},Number.isInteger=Number.isInteger||function(value){return"number"==typeof value&&isFinite(value)&&Math.floor(value)===value}}(jQuery),function($){AblePlayer.prototype.initDescription=function(){var thisObj=this;if(this.refreshingDesc?this.prevDescFormat=this.useDescFormat:(this.descFile=this.$sources.first().attr("data-desc-src"),void 0!==this.descFile?this.hasOpenDesc=!0:this.youTubeDescId||this.vimeoDescId?this.hasOpenDesc=!0:this.hasOpenDesc=!1),this.prefDesc?this.hasOpenDesc&&this.hasClosedDesc?(this.useDescFormat=this.prefDescFormat,this.descOn=!0,this.prefDescPause=!1):this.hasOpenDesc?(this.useDescFormat="video",this.descOn=!0):this.hasClosedDesc&&(this.useDescFormat="text",this.descOn=!0):(this.useDescFormat=!1,this.descOn=!1),"text"===this.useDescFormat&&window.speechSynthesis){this.synth=window.speechSynthesis,this.descVoices=this.synth.getVoices(),this.descVoiceIndex=0;for(var i=0;i<this.descVoices.length;i++)if(2===this.captionLang.length){if(this.descVoices[i].lang.substr(0,2).toLowerCase()===this.captionLang.toLowerCase()){this.descVoiceIndex=i;break}}else if(this.descVoices[i].lang.toLowerCase()===this.captionLang.toLowerCase()){this.descVoiceIndex=i;break}}this.descOn?("video"===this.useDescFormat&&(this.usingAudioDescription()||this.swapDescription()),this.hasClosedDesc&&(this.prefVisibleDesc?(this.$descDiv.show(),this.$descDiv.removeClass("able-clipped")):this.$descDiv.addClass("able-clipped"),this.swappingSrc||this.showDescription(this.elapsed))):"video"===this.prevDescFormat?this.usingAudioDescription()&&this.swapDescription():"text"===this.prevDescFormat&&(this.$descDiv.hide(),this.$descDiv.removeClass("able-clipped")),this.refreshingDesc=!1},AblePlayer.prototype.usingAudioDescription=function(){return"youtube"===this.player?this.activeYouTubeId===this.youTubeDescId:"vimeo"===this.player?this.activeVimeoId===this.vimeoDescId:this.$sources.first().attr("data-desc-src")===this.$sources.first().attr("src")},AblePlayer.prototype.swapDescription=function(){var thisObj,i,origSrc,descSrc,srcType,newSource;if(thisObj=this,this.swapTime=this.elapsed,this.descOn?this.showAlert(this.tt.alertDescribedVersion):this.showAlert(this.tt.alertNonDescribedVersion),"html5"===this.player){if(this.usingAudioDescription()){for(i=0;i<this.$sources.length;i++)origSrc=this.$sources[i].getAttribute("data-orig-src"),srcType=this.$sources[i].getAttribute("type"),origSrc&&this.$sources[i].setAttribute("src",origSrc);this.swappingSrc=!0}else{for(i=0;i<this.$sources.length;i++)origSrc=this.$sources[i].getAttribute("src"),descSrc=this.$sources[i].getAttribute("data-desc-src"),srcType=this.$sources[i].getAttribute("type"),descSrc&&(this.$sources[i].setAttribute("src",descSrc),this.$sources[i].setAttribute("data-orig-src",origSrc));this.swappingSrc=!0}"html5"===this.player&&this.media.load()}else"youtube"===this.player?(this.usingAudioDescription()?(this.activeYouTubeId=this.youTubeId,this.showAlert(this.tt.alertNonDescribedVersion)):(this.activeYouTubeId=this.youTubeDescId,this.showAlert(this.tt.alertDescribedVersion)),void 0!==this.youTubePlayer&&this.setupAltCaptions().then((function(){thisObj.playing?thisObj.youTubePlayer.loadVideoById(thisObj.activeYouTubeId,thisObj.swapTime):thisObj.youTubePlayer.cueVideoById(thisObj.activeYouTubeId,thisObj.swapTime)}))):"vimeo"===this.player&&(this.usingAudioDescription()?(this.activeVimeoId=this.vimeoId,this.showAlert(this.tt.alertNonDescribedVersion)):(this.activeVimeoId=this.vimeoDescId,this.showAlert(this.tt.alertDescribedVersion)),this.vimeoPlayer.loadVideo(this.activeVimeoId).then((function(){thisObj.playing?thisObj.vimeoPlayer.setCurrentTime(thisObj.swapTime):thisObj.vimeoPlayer.pause()})))},AblePlayer.prototype.showDescription=function(now){if(!this.swappingSrc&&this.descOn){var thisObj,i,cues,d,thisDescription,descText,msg;thisObj=this;var flattenComponentForDescription=function(component){var result=[];if("string"===component.type)result.push(component.value);else for(var i=0;i<component.children.length;i++)result.push(flattenComponentForDescription(component.children[i]));return result.join("")};for(cues=this.selectedDescriptions?this.selectedDescriptions.cues:this.descriptions.length>=1?this.descriptions[0].cues:[],d=0;d<cues.length;d++)if(cues[d].start<=now&&cues[d].end>now){thisDescription=d;break}void 0!==thisDescription?this.currentDescription!==thisDescription&&(this.$status.removeAttr("aria-live"),descText=flattenComponentForDescription(cues[thisDescription].components),this.exposeTextDescriptions&&void 0!==this.synth&&void 0!==this.descVoiceIndex?((msg=new SpeechSynthesisUtterance).voice=this.descVoices[this.descVoiceIndex],msg.voiceURI="native",msg.volume=1,msg.rate=1.5,msg.pitch=1,msg.text=descText,msg.lang=this.captionLang,msg.onend=function(e){thisObj.pausedForDescription&&thisObj.playMedia()},this.synth.speak(msg),this.prefVisibleDesc&&this.$descDiv.html(descText).removeAttr("aria-live aria-atomic")):this.$descDiv.html(descText),this.prefDescPause&&this.exposeTextDescriptions&&(this.pauseMedia(),this.pausedForDescription=!0),this.currentDescription=thisDescription):(this.$descDiv.html(""),this.currentDescription=-1,this.$status.attr("aria-live","polite"))}}}(jQuery),function($){AblePlayer.prototype.getUserAgent=function(){this.userAgent={},this.userAgent.browser={},/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?(this.userAgent.browser.name="Firefox",this.userAgent.browser.version=RegExp.$1):/MSIE (\d+\.\d+);/.test(navigator.userAgent)?(this.userAgent.browser.name="Internet Explorer",this.userAgent.browser.version=RegExp.$1):/Trident.*rv[ :]*(\d+\.\d+)/.test(navigator.userAgent)?(this.userAgent.browser.name="Internet Explorer",this.userAgent.browser.version=RegExp.$1):/Edge[\/\s](\d+\.\d+)/.test(navigator.userAgent)?(this.userAgent.browser.name="Edge",this.userAgent.browser.version=RegExp.$1):/OPR\/(\d+\.\d+)/i.test(navigator.userAgent)?(this.userAgent.browser.name="Opera",this.userAgent.browser.version=RegExp.$1):/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)?(this.userAgent.browser.name="Chrome",/Chrome[\/\s](\d+\.\d+)/.test(navigator.userAgent)&&(this.userAgent.browser.version=RegExp.$1)):/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)?(this.userAgent.browser.name="Safari",/Version[\/\s](\d+\.\d+)/.test(navigator.userAgent)&&(this.userAgent.browser.version=RegExp.$1)):(this.userAgent.browser.name="Unknown",this.userAgent.browser.version="Unknown"),-1!=window.navigator.userAgent.indexOf("Windows NT 6.2")?this.userAgent.os="Windows 8":-1!=window.navigator.userAgent.indexOf("Windows NT 6.1")?this.userAgent.os="Windows 7":-1!=window.navigator.userAgent.indexOf("Windows NT 6.0")?this.userAgent.os="Windows Vista":-1!=window.navigator.userAgent.indexOf("Windows NT 5.1")?this.userAgent.os="Windows XP":-1!=window.navigator.userAgent.indexOf("Windows NT 5.0")?this.userAgent.os="Windows 2000":-1!=window.navigator.userAgent.indexOf("Mac")?this.userAgent.os="Mac/iOS":-1!=window.navigator.userAgent.indexOf("X11")?this.userAgent.os="UNIX":-1!=window.navigator.userAgent.indexOf("Linux")&&(this.userAgent.os="Linux"),this.debug&&(console.log("User agent:"+navigator.userAgent),console.log("Vendor: "+navigator.vendor),console.log("Browser: "+this.userAgent.browser.name),console.log("Version: "+this.userAgent.browser.version),console.log("OS: "+this.userAgent.os))},AblePlayer.prototype.isUserAgent=function(which){var userAgent=navigator.userAgent.toLowerCase();return this.debug&&console.log("User agent: "+userAgent),-1!==userAgent.indexOf(which.toLowerCase())},AblePlayer.prototype.isIOS=function(version){var userAgent,iOS;return userAgent=navigator.userAgent.toLowerCase(),!!(iOS=/ipad|iphone|ipod/.exec(userAgent))&&(void 0===version||-1!==userAgent.indexOf("os "+version))},AblePlayer.prototype.browserSupportsVolume=function(){var userAgent,noVolume;return userAgent=navigator.userAgent.toLowerCase(),!(noVolume=/ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(userAgent))||!("android"!==noVolume[0]||!/firefox/.test(userAgent))},AblePlayer.prototype.nativeFullscreenSupported=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}}(jQuery),function($){AblePlayer.prototype.seekTo=function(newTime){var thisObj=this,seekable;(this.seekFromTime=this.media.currentTime,this.seekToTime=newTime,this.seeking=!0,this.liveUpdatePending=!0,"html5"===this.player)?(this.startTime=newTime,(seekable=this.media.seekable).length>0&&this.startTime>=seekable.start(0)&&this.startTime<=seekable.end(0)&&(this.media.currentTime=this.startTime,this.hasSignLanguage&&this.signVideo&&(this.signVideo.currentTime=this.startTime))):"youtube"===this.player?(this.youTubePlayer.seekTo(newTime,!0),newTime>0&&void 0!==this.$posterImg&&this.$posterImg.hide()):"vimeo"===this.player&&this.vimeoPlayer.setCurrentTime(newTime).then((function(){thisObj.elapsed=newTime,thisObj.refreshControls("timeline")}));this.refreshControls("timeline")},AblePlayer.prototype.getMediaTimes=function(duration,elapsed){var deferred,promise,thisObj,mediaTimes;return mediaTimes={},promise=(deferred=new $.Deferred).promise(),thisObj=this,void 0!==duration&&void 0!==elapsed?(mediaTimes.duration=duration,mediaTimes.elapsed=elapsed,deferred.resolve(mediaTimes)):this.getDuration().then((function(duration){mediaTimes.duration=thisObj.roundDown(duration,6),thisObj.getElapsed().then((function(elapsed){mediaTimes.elapsed=thisObj.roundDown(elapsed,6),deferred.resolve(mediaTimes)}))})),promise},AblePlayer.prototype.getDuration=function(){var deferred,promise,thisObj,duration;(promise=(deferred=new $.Deferred).promise(),thisObj=this,"vimeo"===this.player)?this.vimeoPlayer?this.vimeoPlayer.getDuration().then((function(duration){void 0===duration||isNaN(duration)||-1===duration?deferred.resolve(0):deferred.resolve(duration)})):deferred.resolve(0):("html5"===this.player?duration=this.media.duration:"youtube"===this.player&&(duration=this.youTubePlayer?this.youTubePlayer.getDuration():0),void 0===duration||isNaN(duration)||-1===duration?deferred.resolve(0):deferred.resolve(duration));return promise},AblePlayer.prototype.getElapsed=function(){var deferred,promise,thisObj,elapsed;(promise=(deferred=new $.Deferred).promise(),thisObj=this,"vimeo"===this.player)?this.vimeoPlayer?this.vimeoPlayer.getCurrentTime().then((function(elapsed){void 0===elapsed||isNaN(elapsed)||-1===elapsed?deferred.resolve(0):deferred.resolve(elapsed)})):deferred.resolve(0):("html5"===this.player?elapsed=this.media.currentTime:"youtube"===this.player&&(elapsed=this.youTubePlayer?this.youTubePlayer.getCurrentTime():0),void 0===elapsed||isNaN(elapsed)||-1===elapsed?deferred.resolve(0):deferred.resolve(elapsed));return promise},AblePlayer.prototype.getPlayerState=function(){var deferred,promise,thisObj,duration,elapsed;if(promise=(deferred=new $.Deferred).promise(),thisObj=this,"html5"===this.player)this.media.ended?deferred.resolve("ended"):this.media.paused?deferred.resolve("paused"):4!==this.media.readyState?deferred.resolve("buffering"):deferred.resolve("playing");else if("youtube"===this.player&&this.youTubePlayer){var state=this.youTubePlayer.getPlayerState();-1===state||5===state?deferred.resolve("stopped"):0===state?deferred.resolve("ended"):1===state?deferred.resolve("playing"):2===state?deferred.resolve("paused"):3===state&&deferred.resolve("buffering")}else"vimeo"===this.player&&this.vimeoPlayer&&this.vimeoPlayer.getPaused().then((function(paused){paused?deferred.resolve("paused"):thisObj.vimeoPlayer.getEnded().then((function(ended){ended?deferred.resolve("ended"):deferred.resolve("playing")}))}));return promise},AblePlayer.prototype.isPlaybackRateSupported=function(){return"html5"===this.player?!!this.media.playbackRate:"youtube"===this.player?this.youTubePlayer.getAvailablePlaybackRates().length>1:"vimeo"===this.player?this.vimeoSupportsPlaybackRateChange:void 0},AblePlayer.prototype.setPlaybackRate=function(rate){rate=Math.max(.5,rate),"html5"===this.player?this.media.playbackRate=rate:"youtube"===this.player?this.youTubePlayer.setPlaybackRate(rate):"vimeo"===this.player&&this.vimeoPlayer.setPlaybackRate(rate),this.hasSignLanguage&&this.signVideo&&(this.signVideo.playbackRate=rate),this.playbackRate=rate,this.$speed.text(this.tt.speed+": "+rate.toFixed(2).toString()+"x")},AblePlayer.prototype.getPlaybackRate=function(){return"html5"===this.player?this.media.playbackRate:"youtube"===this.player?this.youTubePlayer.getPlaybackRate():void 0},AblePlayer.prototype.isPaused=function(){var state;if("vimeo"===this.player)return!this.playing;this.getPlayerState().then((function(state){return"paused"===state||"stopped"===state||"ended"===state}))},AblePlayer.prototype.pauseMedia=function(){var thisObj=this;"html5"===this.player?(this.media.pause(!0),this.hasSignLanguage&&this.signVideo&&this.signVideo.pause(!0)):"youtube"===this.player?this.youTubePlayer.pauseVideo():"vimeo"===this.player&&this.vimeoPlayer.pause()},AblePlayer.prototype.playMedia=function(){var thisObj=this;"html5"===this.player?(this.media.play(!0),this.hasSignLanguage&&this.signVideo&&this.signVideo.play(!0)):"youtube"===this.player?(this.youTubePlayer.playVideo(),void 0!==this.$posterImg&&this.$posterImg.hide(),this.stoppingYouTube=!1):"vimeo"===this.player&&this.vimeoPlayer.play(),this.startedPlaying=!0,this.hideControls&&(this.hidingControls=!0,this.invokeHideControlsTimeout())},AblePlayer.prototype.fadeControls=function(direction){var thisObj,mediaHeight,playerHeight,newMediaHeight,thisObj=this;"out"==direction?(newMediaHeight=(mediaHeight=this.$mediaContainer.height())+(playerHeight=this.$playerDiv.height()),this.$playerDiv.fadeTo(2e3,0,(function(){}))):"in"==direction&&this.$playerDiv.fadeTo(100,1)},AblePlayer.prototype.invokeHideControlsTimeout=function(){var thisObj=this;this.hideControlsTimeout=window.setTimeout((function(){void 0!==thisObj.playing&&!0===thisObj.playing&&thisObj.hideControls&&(thisObj.fadeControls("out"),thisObj.controlsHidden=!0)}),5e3),this.hideControlsTimeoutStatus="active"},AblePlayer.prototype.refreshControls=function(context,duration,elapsed){var thisObj,duration,elapsed,lastChapterIndex,displayElapsed,updateLive,textByState,timestamp,widthUsed,leftControls,rightControls,seekbarWidth,seekbarSpacer,captionsCount,buffered,newTop,statusBarHeight,speedHeight,statusBarWidthBreakpoint,newSvgData;context="init",thisObj=this,this.swappingSrc&&this.playing||void 0!==this.duration&&(this.useChapterTimes&&(this.chapterDuration=this.getChapterDuration(),this.chapterElapsed=this.getChapterElapsed()),!1===this.useFixedSeekInterval&&!1===this.seekIntervalCalculated&&this.duration>0&&this.setSeekInterval(),this.seekBar&&(this.useChapterTimes?(lastChapterIndex=this.selectedChapters.cues.length-1,this.selectedChapters.cues[lastChapterIndex]==this.currentChapter&&this.currentChapter.end!==this.duration?this.seekBar.setDuration(this.duration-this.currentChapter.start):this.seekBar.setDuration(this.chapterDuration)):void 0===this.duration||isNaN(this.duration)||-1===this.duration||this.seekBar.setDuration(this.duration),this.seekBar.tracking||(updateLive=this.liveUpdatePending||this.seekBar.seekHead.is($(document.activeElement)),this.liveUpdatePending=!1,this.useChapterTimes?this.seekBar.setPosition(this.chapterElapsed,updateLive):this.seekBar.setPosition(this.elapsed,updateLive)),displayElapsed=this.seekBar.tracking?this.seekBar.lastTrackPosition:this.useChapterTimes?this.chapterElapsed:this.elapsed),void 0!==this.$durationContainer&&(this.useChapterTimes?this.$durationContainer.text(" / "+this.formatSecondsAsColonTime(this.chapterDuration)):this.$durationContainer.text(" / "+this.formatSecondsAsColonTime(this.duration))),void 0!==this.$elapsedTimeContainer&&this.$elapsedTimeContainer.text(this.formatSecondsAsColonTime(displayElapsed)),"legacy"===this.skin&&this.seekBar&&(widthUsed=0,rightControls=(leftControls=this.seekBar.wrapperDiv.parent().prev("div.able-left-controls")).next("div.able-right-controls"),leftControls.children().each((function(){"button"==$(this).attr("role")&&(widthUsed+=$(this).outerWidth(!0))})),rightControls.children().each((function(){"button"==$(this).attr("role")&&(widthUsed+=$(this).outerWidth(!0))})),seekbarWidth=this.fullscreen?$(window).width()-widthUsed:this.$ableWrapper.width()-widthUsed,Math.abs(seekbarWidth-this.seekBar.getWidth())>5&&this.seekBar.setWidth(seekbarWidth)),"html5"===this.player?this.media.buffered.length>0&&(buffered=this.media.buffered.end(0),this.useChapterTimes?(buffered>this.chapterDuration&&(buffered=this.chapterDuration),this.seekBar&&this.seekBar.setBuffered(buffered/this.chapterDuration)):this.seekBar&&(isNaN(buffered)||this.seekBar.setBuffered(buffered/duration))):"youtube"===this.player?this.seekBar&&this.seekBar.setBuffered(this.youTubePlayer.getVideoLoadedFraction()):this.player,this.$descButton&&(this.descOn?(this.$descButton.removeClass("buttonOff").attr("aria-label",this.tt.turnOffDescriptions),this.$descButton.find("span.able-clipped").text(this.tt.turnOffDescriptions)):(this.$descButton.addClass("buttonOff").attr("aria-label",this.tt.turnOnDescriptions),this.$descButton.find("span.able-clipped").text(this.tt.turnOnDescriptions))),this.$ccButton&&(captionsCount=this.captions.length,this.captionsOn?(this.$ccButton.removeClass("buttonOff"),1===captionsCount&&(this.$ccButton.attr("aria-label",this.tt.hideCaptions),this.$ccButton.find("span.able-clipped").text(this.tt.hideCaptions))):(this.$ccButton.addClass("buttonOff"),1===captionsCount&&(this.$ccButton.attr("aria-label",this.tt.showCaptions),this.$ccButton.find("span.able-clipped").text(this.tt.showCaptions))),captionsCount>1&&(this.$ccButton.attr({"aria-label":this.tt.captions,"aria-haspopup":"true","aria-controls":this.mediaId+"-captions-menu"}),this.$ccButton.find("span.able-clipped").text(this.tt.captions))),this.$fullscreenButton&&(this.fullscreen?(this.$fullscreenButton.attr("aria-label",this.tt.exitFullScreen),"font"===this.iconType?(this.$fullscreenButton.find("span").first().removeClass("icon-fullscreen-expand").addClass("icon-fullscreen-collapse"),this.$fullscreenButton.find("span.able-clipped").text(this.tt.exitFullScreen)):"svg"===this.iconType?(newSvgData=this.getSvgData("fullscreen-collapse"),this.$fullscreenButton.find("svg").attr("viewBox",newSvgData[0]),this.$fullscreenButton.find("path").attr("d",newSvgData[1])):this.$fullscreenButton.find("img").attr("src",this.fullscreenCollapseButtonImg)):(this.$fullscreenButton.attr("aria-label",this.tt.enterFullScreen),"font"===this.iconType?(this.$fullscreenButton.find("span").first().removeClass("icon-fullscreen-collapse").addClass("icon-fullscreen-expand"),this.$fullscreenButton.find("span.able-clipped").text(this.tt.enterFullScreen)):"svg"===this.iconType?(newSvgData=this.getSvgData("fullscreen-expand"),this.$fullscreenButton.find("svg").attr("viewBox",newSvgData[0]),this.$fullscreenButton.find("path").attr("d",newSvgData[1])):this.$fullscreenButton.find("img").attr("src",this.fullscreenExpandButtonImg))),void 0!==this.$bigPlayButton&&void 0!==this.seekBar&&(this.paused&&!this.seekBar.tracking?(this.hideBigPlayButton||this.$bigPlayButton.show(),this.fullscreen?(this.$bigPlayButton.width($(window).width()),this.$bigPlayButton.height($(window).height())):(this.$bigPlayButton.width(this.$mediaContainer.width()),this.$bigPlayButton.height(this.$mediaContainer.height()))):this.$bigPlayButton.hide()),this.transcriptType&&(1===this.prefAutoScrollTranscript?(this.autoScrollTranscript=!0,this.$autoScrollTranscriptCheckbox.prop("checked",!0)):(this.autoScrollTranscript=!1,this.$autoScrollTranscriptCheckbox.prop("checked",!1)),this.autoScrollTranscript&&this.currentHighlight&&(newTop=Math.floor(this.$transcriptDiv.scrollTop()+$(this.currentHighlight).position().top-this.$transcriptDiv.height()/2+$(this.currentHighlight).height()/2))!==Math.floor(this.$transcriptDiv.scrollTop())&&(this.scrollingTranscript=!0,this.movingHighlight&&(this.$transcriptDiv.scrollTop(newTop),this.movingHighlight=!1))),this.$chaptersButton&&this.$chaptersButton.attr({"aria-label":this.tt.chapters,"aria-haspopup":"true","aria-controls":this.mediaId+"-chapters-menu"}),textByState={stopped:this.tt.statusStopped,paused:this.tt.statusPaused,playing:this.tt.statusPlaying,buffering:this.tt.statusBuffering,ended:this.tt.statusEnd},this.stoppingYouTube?(this.$status.text()!==this.tt.statusStopped&&this.$status.text(this.tt.statusStopped),this.$playpauseButton.find("span").first().hasClass("icon-pause")&&("font"===this.iconType?(this.$playpauseButton.find("span").first().removeClass("icon-pause").addClass("icon-play"),this.$playpauseButton.find("span.able-clipped").text(this.tt.play)):"svg"===this.iconType?(newSvgData=this.getSvgData("play"),this.$playpauseButton.find("svg").attr("viewBox",newSvgData[0]),this.$playpauseButton.find("path").attr("d",newSvgData[1])):this.$playpauseButton.find("img").attr("src",this.playButtonImg))):void 0!==this.$status&&void 0!==this.seekBar&&this.getPlayerState().then((function(currentState){thisObj.$status.text()===textByState[currentState]||thisObj.seekBar.tracking?(thisObj.statusDebounceStart=null,thisObj.debouncingStatus=!1,clearTimeout(thisObj.statusTimeout),thisObj.statusTimeout=null):(thisObj.swappingSrc?thisObj.debouncingStatus||(thisObj.statusMessageThreshold=2e3):thisObj.debouncingStatus||(thisObj.statusMessageThreshold=250),timestamp=(new Date).getTime(),thisObj.statusDebounceStart?timestamp-thisObj.statusDebounceStart>thisObj.statusMessageThreshold&&(thisObj.$status.text(textByState[currentState]),thisObj.statusDebounceStart=null,clearTimeout(thisObj.statusTimeout),thisObj.statusTimeout=null):(thisObj.statusDebounceStart=timestamp,thisObj.debouncingStatus=!0,thisObj.statusTimeout=setTimeout((function(){thisObj.debouncingStatus=!1,thisObj.refreshControls("init")}),thisObj.statusMessageThreshold))),thisObj.seekBar.tracking||thisObj.stoppingYouTube||("paused"===currentState||"stopped"===currentState||"ended"===currentState?(thisObj.$playpauseButton.attr("aria-label",thisObj.tt.play),"font"===thisObj.iconType?(thisObj.$playpauseButton.find("span").first().removeClass("icon-pause").addClass("icon-play"),thisObj.$playpauseButton.find("span.able-clipped").text(thisObj.tt.play)):"svg"===thisObj.iconType?(newSvgData=thisObj.getSvgData("play"),thisObj.$playpauseButton.find("svg").attr("viewBox",newSvgData[0]),thisObj.$playpauseButton.find("path").attr("d",newSvgData[1])):thisObj.$playpauseButton.find("img").attr("src",thisObj.playButtonImg)):(thisObj.$playpauseButton.attr("aria-label",thisObj.tt.pause),"font"===thisObj.iconType?(thisObj.$playpauseButton.find("span").first().removeClass("icon-play").addClass("icon-pause"),thisObj.$playpauseButton.find("span.able-clipped").text(thisObj.tt.pause)):"svg"===thisObj.iconType?(newSvgData=thisObj.getSvgData("pause"),thisObj.$playpauseButton.find("svg").attr("viewBox",newSvgData[0]),thisObj.$playpauseButton.find("path").attr("d",newSvgData[1])):thisObj.$playpauseButton.find("img").attr("src",thisObj.pauseButtonImg)))})),this.fullscreen||(statusBarWidthBreakpoint=300,statusBarHeight=this.$statusBarDiv.height(),(speedHeight=this.$statusBarDiv.find("span.able-speed").height())>statusBarHeight+5?(this.$statusBarDiv.find("span.able-speed").hide(),this.hidingSpeed=!0):(this.hidingSpeed&&(this.$statusBarDiv.find("span.able-speed").show(),this.hidingSpeed=!1),this.$statusBarDiv.width()<300?(this.$statusBarDiv.find("span.able-speed").hide(),this.hidingSpeed=!0):this.hidingSpeed&&(this.$statusBarDiv.find("span.able-speed").show(),this.hidingSpeed=!1))))},AblePlayer.prototype.getHiddenWidth=function($el){var $hiddenElement=$el.clone().appendTo("body"),width=$hiddenElement.outerWidth();return $hiddenElement.remove(),width},AblePlayer.prototype.handlePlay=function(e){this.paused?this.playMedia():this.pauseMedia()},AblePlayer.prototype.handleRestart=function(){this.seekTo(0)},AblePlayer.prototype.handlePrevTrack=function(){0===this.playlistIndex?this.playlistIndex=this.$playlist.length-1:this.playlistIndex--,this.cueingPlaylistItem=!0,this.cuePlaylistItem(this.playlistIndex)},AblePlayer.prototype.handleNextTrack=function(){this.playlistIndex===this.$playlist.length-1?this.playlistIndex=0:this.playlistIndex++,this.cueingPlaylistItem=!0,this.cuePlaylistItem(this.playlistIndex)},AblePlayer.prototype.handleRewind=function(){var targetTime;targetTime=this.elapsed-this.seekInterval,this.useChapterTimes?targetTime<this.currentChapter.start&&(targetTime=this.currentChapter.start):targetTime<0&&(targetTime=0),this.seekTo(targetTime)},AblePlayer.prototype.handleFastForward=function(){var targetTime,lastChapterIndex;lastChapterIndex=this.chapters.length-1,targetTime=this.elapsed+this.seekInterval,this.useChapterTimes?this.chapters[lastChapterIndex]==this.currentChapter?targetTime>this.duration||targetTime>this.currentChapter.end?targetTime=Math.min(this.duration,this.currentChapter.end):this.duration%targetTime<this.seekInterval&&(targetTime=Math.min(this.duration,this.currentChapter.end)):targetTime>this.currentChapter.end&&(targetTime=this.currentChapter.end):targetTime>this.duration&&(targetTime=this.duration),this.seekTo(targetTime)},AblePlayer.prototype.handleRateIncrease=function(){this.changeRate(1)},AblePlayer.prototype.handleRateDecrease=function(){this.changeRate(-1)},AblePlayer.prototype.changeRate=function(dir){var rates,currentRate,index,newRate,vimeoMin,vimeoMax;"html5"===this.player?this.setPlaybackRate(this.getPlaybackRate()+.25*dir):"youtube"===this.player?(rates=this.youTubePlayer.getAvailablePlaybackRates(),currentRate=this.getPlaybackRate(),-1===(index=rates.indexOf(currentRate))?console.log("ERROR: Youtube returning unknown playback rate "+currentRate.toString()):(index+=dir)<rates.length&&index>=0&&this.setPlaybackRate(rates[index])):"vimeo"===this.player&&(vimeoMin=.5,vimeoMax=2,1===dir?newRate=this.vimeoPlaybackRate+.5<=2?this.vimeoPlaybackRate+.5:2:-1===dir&&(newRate=this.vimeoPlaybackRate-.5>=.5?this.vimeoPlaybackRate-.5:.5),this.setPlaybackRate(newRate))},AblePlayer.prototype.handleCaptionToggle=function(){var captions;if(this.hidingPopup)return this.hidingPopup=!1,!1;if(1===(captions=this.captions.length?this.captions:[]).length){if(!0===this.captionsOn)this.captionsOn=!1,this.prefCaptions=0,this.updateCookie("prefCaptions"),this.usingYouTubeCaptions?this.youTubePlayer.unloadModule(this.ytCaptionModule):this.$captionsWrapper.hide();else{this.captionsOn=!0,this.prefCaptions=1,this.updateCookie("prefCaptions"),this.usingYouTubeCaptions?void 0!==this.ytCaptionModule&&this.youTubePlayer.loadModule(this.ytCaptionModule):this.$captionsWrapper.show();for(var i=0;i<captions.length;i++)!0===captions[i].def&&(this.selectedCaptions=captions[i]);this.selectedCaptions=this.captions[0],this.descriptions.length>=0&&(this.selectedDescriptions=this.descriptions[0])}this.refreshControls("captions")}else this.captionsPopup&&this.captionsPopup.is(":visible")?(this.captionsPopup.hide(),this.hidingPopup=!1,this.$ccButton.removeAttr("aria-expanded").focus()):(this.closePopups(),this.captionsPopup&&(this.captionsPopup.show(),this.$ccButton.attr("aria-expanded","true"),this.captionsPopup.css("top",this.$ccButton.position().top-this.captionsPopup.outerHeight()),this.captionsPopup.css("left",this.$ccButton.position().left),this.captionsPopup.find("li").removeClass("able-focus"),this.captionsPopup.find("li").first().focus().addClass("able-focus")))},AblePlayer.prototype.handleChapters=function(){if(this.hidingPopup)return this.hidingPopup=!1,!1;this.chaptersPopup.is(":visible")?(this.chaptersPopup.hide(),this.hidingPopup=!1,this.$chaptersButton.removeAttr("aria-expanded").focus()):(this.closePopups(),this.chaptersPopup.show(),this.$chaptersButton.attr("aria-expanded","true"),this.chaptersPopup.css("top",this.$chaptersButton.position().top-this.chaptersPopup.outerHeight()),this.chaptersPopup.css("left",this.$chaptersButton.position().left),this.chaptersPopup.find("li").removeClass("able-focus"),this.chaptersPopup.find('li[aria-checked="true"]').length?this.chaptersPopup.find('li[aria-checked="true"]').focus().addClass("able-focus"):this.chaptersPopup.find("li").first().addClass("able-focus").attr("aria-checked","true").focus())},AblePlayer.prototype.handleDescriptionToggle=function(){this.descOn=!this.descOn,this.prefDesc=+this.descOn,this.updateCookie("prefDesc"),this.$descDiv.is(":hidden")||this.$descDiv.hide(),this.refreshingDesc=!0,this.initDescription(),this.refreshControls("descriptions")},AblePlayer.prototype.handlePrefsClick=function(pref){var thisObj,prefsButtonPosition,prefsMenuRight,prefsMenuLeft;if(thisObj=this,this.hidingPopup)return this.hidingPopup=!1,!1;this.prefsPopup.is(":visible")?(this.prefsPopup.hide(),this.$prefsButton.removeAttr("aria-expanded"),this.prefsPopup.find("li").removeClass("able-focus").attr("tabindex","-1"),this.showingPrefsDialog||this.$prefsButton.focus(),setTimeout((function(){thisObj.hidingPopup=!1}),100)):(this.closePopups(),this.prefsPopup.show(),this.$prefsButton.attr("aria-expanded","true"),prefsButtonPosition=this.$prefsButton.position(),prefsMenuLeft=(prefsMenuRight=this.$ableDiv.width()-5)-this.prefsPopup.width(),this.prefsPopup.css("top",prefsButtonPosition.top-this.prefsPopup.outerHeight()),this.prefsPopup.css("left",prefsMenuLeft),this.prefsPopup.find("li").removeClass("able-focus").attr("tabindex","0"),this.prefsPopup.find("li").first().focus().addClass("able-focus"))},AblePlayer.prototype.handleHelpClick=function(){this.setFullscreen(!1),this.helpDialog.show()},AblePlayer.prototype.handleTranscriptToggle=function(){var thisObj=this;this.$transcriptDiv.is(":visible")?(this.$transcriptArea.hide(),this.$transcriptButton.addClass("buttonOff").attr("aria-label",this.tt.showTranscript),this.$transcriptButton.find("span.able-clipped").text(this.tt.showTranscript),this.prefTranscript=0,this.$transcriptButton.focus().addClass("able-focus"),setTimeout((function(){thisObj.closingTranscript=!1}),100)):(this.positionDraggableWindow("transcript"),this.$transcriptArea.show(),this.$transcriptPopup.hide(),this.$transcriptButton.removeClass("buttonOff").attr("aria-label",this.tt.hideTranscript),this.$transcriptButton.find("span.able-clipped").text(this.tt.hideTranscript),this.prefTranscript=1,this.focusNotClick=!0,this.$transcriptArea.find("button").first().focus(),setTimeout((function(){thisObj.focusNotClick=!1}),100)),this.updateCookie("prefTranscript")},AblePlayer.prototype.handleSignToggle=function(){var thisObj=this;this.$signWindow.is(":visible")?(this.$signWindow.hide(),this.$signButton.addClass("buttonOff").attr("aria-label",this.tt.showSign),this.$signButton.find("span.able-clipped").text(this.tt.showSign),this.prefSign=0,this.$signButton.focus().addClass("able-focus"),setTimeout((function(){thisObj.closingSign=!1}),100)):(this.positionDraggableWindow("sign"),this.$signWindow.show(),this.$signPopup.hide(),this.$signButton.removeClass("buttonOff").attr("aria-label",this.tt.hideSign),this.$signButton.find("span.able-clipped").text(this.tt.hideSign),this.prefSign=1,this.focusNotClick=!0,this.$signWindow.find("button").first().focus(),setTimeout((function(){thisObj.focusNotClick=!1}),100)),this.updateCookie("prefSign")},AblePlayer.prototype.isFullscreen=function(){return this.nativeFullscreenSupported()?!!(document.fullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement||document.mozFullScreenElement||document.msFullscreenElement):!!this.modalFullscreenActive},AblePlayer.prototype.setFullscreen=function(fullscreen){if(this.fullscreen!=fullscreen){var thisObj=this,$el=this.$ableWrapper,el=$el[0];if(this.nativeFullscreenSupported())fullscreen?(this.preFullScreenWidth=this.$ableWrapper.width(),this.preFullScreenHeight=this.$ableWrapper.height(),el.requestFullscreen?el.requestFullscreen():el.webkitRequestFullscreen?el.webkitRequestFullscreen():el.mozRequestFullScreen?el.mozRequestFullScreen():el.msRequestFullscreen&&el.msRequestFullscreen(),this.fullscreen=!0):(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.fullscreen=!1),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",(function(e){thisObj.fullscreen?thisObj.clickedFullscreenButton||(thisObj.fullscreen=!1,thisObj.restoringAfterFullScreen=!0,thisObj.resizePlayer(thisObj.preFullScreenWidth,thisObj.preFullScreenHeight)):(thisObj.restoringAfterFullScreen=!0,thisObj.resizePlayer(thisObj.preFullScreenWidth,thisObj.preFullScreenHeight)),setTimeout((function(){thisObj.clickedFullscreenButton=!1}),1e3)}));else{if(!this.fullscreenDialog){var $dialogDiv=$("<div>"),$fsDialogAlert=$("<p>",{class:"able-screenreader-alert"}).text(this.tt.fullscreen);$dialogDiv.append($fsDialogAlert),this.fullscreenDialog=new AccessibleDialog($dialogDiv,this.$fullscreenButton,"dialog","Fullscreen video player",$fsDialogAlert,this.tt.exitFullScreen,"100%",!0,(function(){thisObj.handleFullscreenToggle()})),$("body").append($dialogDiv)}var wasPaused=this.paused;if(fullscreen){this.modalFullscreenActive=!0,this.fullscreenDialog.show(),this.$modalFullscreenPlaceholder=$('<div class="placeholder">'),this.$modalFullscreenPlaceholder.insertAfter($el),$el.appendTo(this.fullscreenDialog.modal),$el===this.$ableColumnLeft&&$el.width("100%");var newHeight=$(window).height()-this.$playerDiv.height();this.$descDiv.is(":hidden")||(newHeight-=this.$descDiv.height()),this.resizePlayer($(window).width(),newHeight)}else this.modalFullscreenActive=!1,$el===this.$ableColumnLeft&&$el.width("50%"),$el.insertAfter(this.$modalFullscreenPlaceholder),this.$modalFullscreenPlaceholder.remove(),this.fullscreenDialog.hide(),this.resizePlayer(this.$ableWrapper.width(),this.$ableWrapper.height());!wasPaused&&this.paused&&this.playMedia()}this.refreshControls("fullscreen")}},AblePlayer.prototype.handleFullscreenToggle=function(){var stillPaused=this.paused;this.setFullscreen(!this.fullscreen),stillPaused?this.pauseMedia():stillPaused||this.playMedia(),this.fullscreen?(this.hideControls=!0,this.playing&&(this.fadeControls("out"),this.controlsHidden=!0)):(this.hideControls=this.hideControlsOriginal,this.hideControls||(this.controlsHidden&&(this.fadeControls("in"),this.controlsHidden=!1),"active"===this.hideControlsTimeoutStatus&&(window.clearTimeout(this.hideControlsTimeout),this.hideControlsTimeoutStatus="clear")))},AblePlayer.prototype.handleTranscriptLockToggle=function(val){this.autoScrollTranscript=val,this.prefAutoScrollTranscript=+val,this.updateCookie("prefAutoScrollTranscript"),this.refreshControls("transcript")},AblePlayer.prototype.showTooltip=function($tooltip){$tooltip.is(":animated")?$tooltip.stop(!0,!0).show().delay(4e3).fadeOut(1e3):$tooltip.stop().show().delay(4e3).fadeOut(1e3)},AblePlayer.prototype.showAlert=function(msg,location){var thisObj,$alertBox,$parentWindow,alertLeft,alertTop;thisObj=this,"transcript"===location?($alertBox=this.$transcriptAlert,$parentWindow=this.$transcriptArea):"sign"===location?($alertBox=this.$signAlert,$parentWindow=this.$signWindow):$alertBox="screenreader"===location?this.$srAlertBox:this.$alertBox,$alertBox.text(msg).show(),"transcript"==location||"sign"===location?(alertLeft=$parentWindow.width()>$alertBox.width()?$parentWindow.width()/2-$alertBox.width()/2:10,"sign"===location?alertTop=$parentWindow.height()/3*2:"transcript"===location&&(alertTop=this.$transcriptToolbar.height()+30),$alertBox.css({top:alertTop+"px",left:alertLeft+"px"})):"screenreader"!==location&&$alertBox.css({left:this.$playerDiv.width()/2-$alertBox.width()/2}),"screenreader"!==location&&setTimeout((function(){$alertBox.fadeOut(300)}),3e3)},AblePlayer.prototype.showedAlert=function(which){return"transcript"===which?!!this.showedTranscriptAlert:"sign"===which&&!!this.showedSignAlert},AblePlayer.prototype.resizePlayer=function(width,height){var captionSizeOkMin,captionSizeOkMax,captionSize,newCaptionSize,newLineHeight;this.fullscreen?(void 0!==this.$vidcapContainer&&(this.$ableWrapper.css({width:width+"px","max-width":""}),this.$vidcapContainer.css({height:height+"px",width:width}),this.$media.css({height:height+"px",width:width})),void 0!==this.$transcriptArea&&this.retrieveOffscreenWindow("transcript",width,height),void 0!==this.$signWindow&&this.retrieveOffscreenWindow("sign",width,height)):this.restoringAfterFullScreen&&(width=this.preFullScreenWidth,height=this.preFullScreenHeight,this.restoringAfterFullScreen=!1,this.$ableWrapper.css({"max-width":width+"px",width:""}),void 0!==this.$vidcapContainer&&this.$vidcapContainer.css({height:"",width:""}),this.$media.css({width:"100%",height:"auto"})),"youtube"===this.player&&this.youTubePlayer&&this.youTubePlayer.setSize(width,height),void 0!==this.$captionsDiv&&(captionSizeOkMin=400,captionSizeOkMax=1e3,captionSize=parseInt(this.prefCaptionsSize,10),newLineHeight=(newCaptionSize=width>1e3?1.5*captionSize:width<400?captionSize/1.5:captionSize)+25,this.$captionsDiv.css("font-size",newCaptionSize+"%"),this.$captionsWrapper.css("line-height",newLineHeight+"%")),this.refreshControls("captions")},AblePlayer.prototype.retrieveOffscreenWindow=function(which,width,height){var window,windowPos,windowTop,windowLeft,windowRight,windowWidth,windowBottom,windowHeight;"transcript"==which?window=this.$transcriptArea:"sign"==which&&(window=this.$signWindow),windowWidth=window.width(),windowHeight=window.height(),windowTop=(windowPos=window.position()).top,windowRight=(windowLeft=windowPos.left)+windowWidth,windowBottom=windowTop+windowHeight,windowTop<0&&(windowTop=10,window.css("top",windowTop)),windowLeft<0&&(windowLeft=10,window.css("left",windowLeft)),windowRight>width&&(windowLeft=width-20-windowWidth,window.css("left",windowLeft)),windowBottom>height&&(windowTop=height-10-windowHeight,window.css("top",windowTop))},AblePlayer.prototype.getHighestZIndex=function(){var max,$elements,z;return max=0,($elements=$("body *").not(".able-modal-dialog,.able-modal-dialog *,.able-modal-overlay,.able-modal-overlay *,.able-sign-window,.able-transcript-area")).each((function(){z=$(this).css("z-index"),Number.isInteger(+z)&&parseInt(z)>max&&(max=parseInt(z))})),max},AblePlayer.prototype.updateZIndex=function(which){var defHighZ,defLowZ,highestZ,transcriptZ,signZ,newHighZ,newLowZ;if(defHighZ=8e3,defLowZ=7e3,highestZ=this.getHighestZIndex(),void 0===this.$transcriptArea||void 0===this.$signWindow)return void 0!==this.$transcriptArea?(transcriptZ=parseInt(this.$transcriptArea.css("z-index")))>7e3&&this.$transcriptArea.css("z-index",7e3):void 0!==this.$signWindow&&(signZ=parseInt(this.$signWindow.css("z-index")))>8e3&&this.$signWindow.css("z-index",8e3),!1;if((transcriptZ=parseInt(this.$transcriptArea.css("z-index")))===(signZ=parseInt(this.$signWindow.css("z-index"))))newHighZ=8e3,newLowZ=7e3;else if(transcriptZ>signZ){if("transcript"===which)return!1;newHighZ=transcriptZ,newLowZ=signZ}else{if("sign"===which)return!1;newHighZ=signZ,newLowZ=transcriptZ}"transcript"===which?(this.$transcriptArea.css("z-index",newHighZ),this.$signWindow.css("z-index",newLowZ)):"sign"===which&&(this.$signWindow.css("z-index",newHighZ),this.$transcriptArea.css("z-index",newLowZ))},AblePlayer.prototype.syncTrackLanguages=function(source,language){var i,captions,descriptions,chapters,meta;for(i=0;i<this.captions.length;i++)this.captions[i].language===language&&(captions=this.captions[i]);for(i=0;i<this.chapters.length;i++)this.chapters[i].language===language&&(chapters=this.chapters[i]);for(i=0;i<this.descriptions.length;i++)this.descriptions[i].language===language&&(descriptions=this.descriptions[i]);for(i=0;i<this.meta.length;i++)this.meta[i].language===language&&(meta=this.meta[i]);this.transcriptLang=language,"init"===source||"captions"===source?(this.captionLang=language,this.selectedCaptions=captions,this.selectedChapters=chapters,this.selectedDescriptions=descriptions,this.selectedMeta=meta,this.transcriptCaptions=captions,this.transcriptChapters=chapters,this.transcriptDescriptions=descriptions,this.updateChaptersList()):"transcript"===source&&(this.transcriptCaptions=captions,this.transcriptChapters=chapters,this.transcriptDescriptions=descriptions),this.updateTranscript()}}(jQuery),function($){AblePlayer.prototype.updateCaption=function(time){this.usingYouTubeCaptions||void 0===this.$captionsWrapper||(this.captionsOn?(this.$captionsWrapper.show(),void 0!==time&&this.showCaptions(time)):this.$captionsWrapper&&(this.$captionsWrapper.hide(),this.prefCaptions=0))},AblePlayer.prototype.updateCaptionsMenu=function(lang){this.captionsPopup.find("li").attr("aria-checked","false"),void 0===lang?this.captionsPopup.find("li").last().attr("aria-checked","true"):this.captionsPopup.find("li[lang="+lang+"]").attr("aria-checked","true")},AblePlayer.prototype.getCaptionClickFunction=function(track){var thisObj=this;return function(){thisObj.selectedCaptions=track,thisObj.captionLang=track.language,thisObj.currentCaption=-1,thisObj.usingYouTubeCaptions?thisObj.captionsOn?void 0!==thisObj.ytCaptionModule&&thisObj.youTubePlayer.setOption(thisObj.ytCaptionModule,"track",{languageCode:thisObj.captionLang}):(thisObj.resettingYouTubeCaptions=!0,thisObj.youTubePlayer.loadModule(thisObj.ytCaptionModule)):thisObj.usingVimeoCaptions?thisObj.vimeoPlayer.enableTextTrack(thisObj.captionLang).then((function(track){})).catch((function(error){switch(error.name){case"InvalidTrackLanguageError":case"InvalidTrackError":console.log("No "+track.kind+" track is available in the specified language ("+track.label+")");break;default:console.log("Error loading "+track.label+" "+track.kind+" track")}})):(thisObj.syncTrackLanguages("captions",thisObj.captionLang),thisObj.swappingSrc||(thisObj.updateCaption(thisObj.elapsed),thisObj.showDescription(thisObj.elapsed))),thisObj.captionsOn=!0,thisObj.hidingPopup=!0,thisObj.captionsPopup.hide(),setTimeout((function(){thisObj.hidingPopup=!1}),100),thisObj.updateCaptionsMenu(thisObj.captionLang),thisObj.$ccButton.focus(),thisObj.prefCaptions=1,thisObj.updateCookie("prefCaptions"),thisObj.refreshControls("captions")}},AblePlayer.prototype.getCaptionOffFunction=function(){var thisObj=this;return function(){"youtube"==thisObj.player?thisObj.youTubePlayer.unloadModule(thisObj.ytCaptionModule):thisObj.usingVimeoCaptions&&thisObj.vimeoPlayer.disableTextTrack(),thisObj.captionsOn=!1,thisObj.currentCaption=-1,thisObj.hidingPopup=!0,thisObj.captionsPopup.hide(),setTimeout((function(){thisObj.hidingPopup=!1}),100),thisObj.updateCaptionsMenu(),thisObj.$ccButton.focus(),thisObj.prefCaptions=0,thisObj.updateCookie("prefCaptions"),this.swappingSrc||(thisObj.refreshControls("captions"),thisObj.updateCaption())}},AblePlayer.prototype.showCaptions=function(now){var c,thisCaption,captionText,cues;for(cues=this.selectedCaptions?this.selectedCaptions.cues:this.captions.length>=1?this.captions[0].cues:[],c=0;c<cues.length;c++)if(cues[c].start<=now&&cues[c].end>now){thisCaption=c;break}void 0!==thisCaption?this.currentCaption!==thisCaption&&(captionText=this.flattenCueForCaption(cues[thisCaption]).replace("\n","<br>"),this.$captionsDiv.html(captionText),this.currentCaption=thisCaption,0===captionText.length?this.$captionsDiv.css("display","none"):this.$captionsDiv.css("display","inline-block")):(this.$captionsDiv.html(""),this.currentCaption=-1)},AblePlayer.prototype.flattenCueForCaption=function(cue){var result=[],flattenComponent=function(component){var result=[],ii;if("string"===component.type)result.push(component.value);else if("v"===component.type)for(result.push("("+component.value+")"),ii=0;ii<component.children.length;ii++)result.push(flattenComponent(component.children[ii]));else if("i"===component.type){for(result.push("<em>"),ii=0;ii<component.children.length;ii++)result.push(flattenComponent(component.children[ii]));result.push("</em>")}else if("b"===component.type){for(result.push("<strong>"),ii=0;ii<component.children.length;ii++)result.push(flattenComponent(component.children[ii]));result.push("</strong>")}else for(ii=0;ii<component.children.length;ii++)result.push(flattenComponent(component.children[ii]));return result.join("")};if(void 0!==cue.components)for(var ii=0;ii<cue.components.children.length;ii++)result.push(flattenComponent(cue.components.children[ii]));return result.join("")},AblePlayer.prototype.getCaptionsOptions=function(pref){var options=[];switch(pref){case"prefCaptionsFont":options[0]=["serif",this.tt.serif],options[1]=["sans-serif",this.tt.sans],options[2]=["cursive",this.tt.cursive],options[3]=["fantasy",this.tt.fantasy],options[4]=["monospace",this.tt.monospace];break;case"prefCaptionsColor":case"prefCaptionsBGColor":options[0]=["white",this.tt.white],options[1]=["yellow",this.tt.yellow],options[2]=["green",this.tt.green],options[3]=["cyan",this.tt.cyan],options[4]=["blue",this.tt.blue],options[5]=["magenta",this.tt.magenta],options[6]=["red",this.tt.red],options[7]=["black",this.tt.black];break;case"prefCaptionsSize":options[0]="75%",options[1]="100%",options[2]="125%",options[3]="150%",options[4]="200%";break;case"prefCaptionsOpacity":options[0]="0%",options[1]="25%",options[2]="50%",options[3]="75%",options[4]="100%";break;case"prefCaptionsStyle":options[0]=this.tt.captionsStylePopOn,options[1]=this.tt.captionsStyleRollUp;break;case"prefCaptionsPosition":options[0]="overlay",options[1]="below"}return options},AblePlayer.prototype.translatePrefs=function(pref,value,outputFormat){if("youtube"==outputFormat&&"size"===pref)switch(value){case"75%":return-1;case"100%":return 0;case"125%":return 1;case"150%":return 2;case"200%":return 3}return!1},AblePlayer.prototype.stylizeCaptions=function($element,pref){var property,newValue,opacity,lineHeight;void 0!==$element&&("prefCaptionsPosition"==pref?this.positionCaptions():void 0!==pref?("prefCaptionsFont"===pref?property="font-family":"prefCaptionsSize"===pref?property="font-size":"prefCaptionsColor"===pref?property="color":"prefCaptionsBGColor"===pref?property="background-color":"prefCaptionsOpacity"===pref&&(property="opacity"),newValue="prefCaptionsOpacity"===pref?parseFloat($("#"+this.mediaId+"_"+pref).val())/100:$("#"+this.mediaId+"_"+pref).val(),$element.css(property,newValue)):(opacity=parseFloat(this.prefCaptionsOpacity)/100,$element.css({"font-family":this.prefCaptionsFont,color:this.prefCaptionsColor,"background-color":this.prefCaptionsBGColor,opacity:opacity}),$element===this.$captionsDiv&&void 0!==this.$captionsWrapper&&this.$captionsWrapper.css({"font-size":this.prefCaptionsSize}),"below"===this.prefCaptionsPosition?void 0!==this.$captionsWrapper&&this.$captionsWrapper.css({"background-color":this.prefCaptionsBGColor,opacity:"1"}):"overlay"===this.prefCaptionsPosition&&void 0!==this.$captionsWrapper&&this.$captionsWrapper.css({"background-color":"transparent",opacity:""}),this.positionCaptions()))},AblePlayer.prototype.positionCaptions=function(position){void 0===position&&(position=this.prefCaptionsPosition),void 0!==this.$captionsWrapper&&("below"==position?(this.$captionsWrapper.removeClass("able-captions-overlay").addClass("able-captions-below"),this.$captionsWrapper.css({"background-color":this.prefCaptionsBGColor,opacity:"1"})):(this.$captionsWrapper.removeClass("able-captions-below").addClass("able-captions-overlay"),this.$captionsWrapper.css({"background-color":"transparent",opacity:""})))}}(jQuery),function($){AblePlayer.prototype.populateChaptersDiv=function(){var headingLevel,headingType,headingId,$chaptersHeading,$chaptersList;$("#"+this.chaptersDivLocation)&&(this.$chaptersDiv=$("#"+this.chaptersDivLocation),this.$chaptersDiv.addClass("able-chapters-div"),this.chaptersTitle&&(headingType="h"+(headingLevel=this.getNextHeadingLevel(this.$chaptersDiv)).toString(),headingId=this.mediaId+"-chapters-heading",$chaptersHeading=$("<"+headingType+">",{class:"able-chapters-heading",id:headingId}).text(this.chaptersTitle),this.$chaptersDiv.append($chaptersHeading)),this.$chaptersNav=$("<nav>"),this.chaptersTitle?this.$chaptersNav.attr("aria-labelledby",headingId):this.$chaptersNav.attr("aria-label",this.tt.chapters),this.$chaptersDiv.append(this.$chaptersNav),this.updateChaptersList())},AblePlayer.prototype.updateChaptersList=function(){var thisObj,cues,$chaptersList,c,thisChapter,$chapterItem,$chapterButton,buttonId,hasDefault,getClickFunction,$clickedItem,$chaptersList,thisChapterIndex;if(thisObj=this,!this.$chaptersNav)return!1;if(void 0===this.useChapterTimes&&("chapter"===this.seekbarScope&&this.selectedChapters.cues.length?this.useChapterTimes=!0:this.useChapterTimes=!1),(cues=this.useChapterTimes?this.selectedChapters.cues:this.chapters.length>=1?this.chapters[0].cues:[]).length>0){for($chaptersList=$("<ul>"),c=0;c<cues.length;c++)thisChapter=c,$chapterItem=$("<li></li>"),getClickFunction=function(time){return function(){thisObj.seekTrigger="chapter",$clickedItem=$(this).closest("li"),$chaptersList=$(this).closest("ul").find("li"),thisChapterIndex=$chaptersList.index($clickedItem),$chaptersList.removeClass("able-current-chapter").attr("aria-selected",""),$clickedItem.addClass("able-current-chapter").attr("aria-selected","true"),thisObj.updateChapter(time),thisObj.seekTo(time)}},($chapterButton=$("<button>",{type:"button",val:thisChapter}).text(this.flattenCueForCaption(cues[thisChapter]))).on("click",getClickFunction(cues[thisChapter].start)),$chapterButton.on("focus",(function(){$(this).closest("ul").find("li").removeClass("able-focus"),$(this).closest("li").addClass("able-focus")})),$chapterItem.on("hover",(function(){$(this).closest("ul").find("li").removeClass("able-focus"),$(this).addClass("able-focus")})),$chapterItem.on("mouseleave",(function(){$(this).removeClass("able-focus")})),$chapterButton.on("blur",(function(){$(this).closest("li").removeClass("able-focus")})),$chapterItem.append($chapterButton),$chaptersList.append($chapterItem),this.defaultChapter===cues[thisChapter].id&&($chapterButton.attr("aria-selected","true").parent("li").addClass("able-current-chapter"),this.currentChapter=cues[thisChapter],hasDefault=!0);hasDefault||(this.currentChapter=cues[0],$chaptersList.find("button").first().attr("aria-selected","true").parent("li").addClass("able-current-chapter")),this.$chaptersNav.html($chaptersList)}return!1},AblePlayer.prototype.seekToChapter=function(chapterId){for(var i=0;i<this.selectedChapters.cues.length;){if(this.selectedChapters.cues[i].id==chapterId){this.seekTo(this.selectedChapters.cues[i].start),this.updateChapter(this.selectedChapters.cues[i].start);break}i++}},AblePlayer.prototype.updateChapter=function(now){if(void 0!==this.selectedChapters){var chapters,i,thisChapterIndex,chapterLabel;for(chapters=this.selectedChapters.cues,i=0;i<chapters.length;i++)if(chapters[i].start<=now&&chapters[i].end>now){thisChapterIndex=i;break}void 0!==thisChapterIndex&&this.currentChapter!==chapters[thisChapterIndex]&&(this.currentChapter=chapters[thisChapterIndex],this.useChapterTimes&&(this.chapterDuration=this.getChapterDuration(),this.seekIntervalCalculated=!1),void 0!==this.$chaptersDiv&&(this.$chaptersDiv.find("ul").find("li").removeClass("able-current-chapter").attr("aria-selected",""),this.$chaptersDiv.find("ul").find("li").eq(thisChapterIndex).addClass("able-current-chapter").attr("aria-selected","true")))}},AblePlayer.prototype.getChapterDuration=function(){var lastChapterIndex,chapterEnd;return void 0===this.currentChapter?0:void 0===this.duration?0:(lastChapterIndex=this.selectedChapters.cues.length-1,this.selectedChapters.cues[lastChapterIndex]==this.currentChapter&&this.currentChapter.end!==this.duration?(chapterEnd=this.duration,this.currentChapter.end=this.duration):chapterEnd=this.currentChapter.end,chapterEnd-this.currentChapter.start)},AblePlayer.prototype.getChapterElapsed=function(){return void 0===this.currentChapter?0:this.elapsed>this.currentChapter.start?this.elapsed-this.currentChapter.start:0},AblePlayer.prototype.convertChapterTimeToVideoTime=function(chapterTime){if(void 0!==this.currentChapter){var newTime=this.currentChapter.start+chapterTime;return newTime>this.currentChapter.end?this.currentChapter.end:newTime}return chapterTime},AblePlayer.prototype.getChapterClickFunction=function(time){var thisObj=this;return function(){thisObj.seekTrigger="chapter",thisObj.seekTo(time),thisObj.hidingPopup=!0,thisObj.chaptersPopup.hide(),setTimeout((function(){thisObj.hidingPopup=!1}),100),thisObj.$chaptersButton.focus()}}}(jQuery),function($){AblePlayer.prototype.updateMeta=function(time){this.hasMeta&&("text"===this.metaType?(this.$metaDiv.show(),this.showMeta(time||this.elapsed)):this.showMeta(time||this.elapsed))},AblePlayer.prototype.showMeta=function(now){var tempSelectors,m,thisMeta,cues,cueText,cueLines,i,line,showDuration,focusTarget;for(tempSelectors=[],cues=this.meta.length>=1?this.meta:[],m=0;m<cues.length;m++)if(cues[m].start<=now&&cues[m].end>now){thisMeta=m;break}if(void 0!==thisMeta){if(this.currentMeta!==thisMeta)if("text"===this.metaType)this.$metaDiv.html(this.flattenCueForMeta(cues[thisMeta]).replace("\n","<br>"));else if("selector"===this.metaType){for(cueLines=(cueText=this.flattenCueForMeta(cues[thisMeta])).split("\n"),i=0;i<cueLines.length;i++)"pause"===(line=$.trim(cueLines[i])).toLowerCase().trim()?(this.hideBigPlayButton=!0,this.pauseMedia()):"focus:"==line.toLowerCase().substring(0,6)?(focusTarget=line.substring(6).trim(),$(focusTarget).length&&$(focusTarget).focus()):$(line).length&&(this.currentMeta=thisMeta,void 0===(showDuration=parseInt($(line).attr("data-duration")))||isNaN(showDuration)?$(line).show():$(line).show().delay(showDuration).fadeOut(),this.visibleSelectors.push(line),tempSelectors.push(line));if(this.visibleSelectors&&this.visibleSelectors.length&&this.visibleSelectors.length!==tempSelectors.length)for(i=this.visibleSelectors.length-1;i>=0;i--)-1==$.inArray(this.visibleSelectors[i],tempSelectors)&&($(this.visibleSelectors[i]).hide(),this.visibleSelectors.splice(i,1))}}else{if(void 0!==this.$metaDiv&&this.$metaDiv.html(""),this.visibleSelectors&&this.visibleSelectors.length){for(i=0;i<this.visibleSelectors.length;i++)$(this.visibleSelectors[i]).hide();this.visibleSelectors=[]}this.currentMeta=-1}},AblePlayer.prototype.flattenCueForMeta=function(cue){for(var result=[],flattenComponent=function(component){var result=[],ii;if("string"===component.type)result.push(component.value);else if("v"===component.type)for(result.push("["+component.value+"]"),ii=0;ii<component.children.length;ii++)result.push(flattenComponent(component.children[ii]));else for(ii=0;ii<component.children.length;ii++)result.push(flattenComponent(component.children[ii]));return result.join("")},ii=0;ii<cue.components.children.length;ii++)result.push(flattenComponent(cue.components.children[ii]));return result.join("")}}(jQuery),function($){AblePlayer.prototype.setupTranscript=function(){var deferred=new $.Deferred,promise=deferred.promise();return this.transcriptType||!this.captions.length||this.usingYouTubeCaptions||this.usingVimeoCaptions||(this.transcriptType="popup"),this.transcriptType?"popup"===this.transcriptType||"external"===this.transcriptType?(this.injectTranscriptArea(),deferred.resolve()):"manual"===this.transcriptType&&(this.setupManualTranscript(),deferred.resolve()):deferred.resolve(),promise},AblePlayer.prototype.injectTranscriptArea=function(){var thisObj,$autoScrollLabel,$languageSelectWrapper,$languageSelectLabel,i,$option;if(thisObj=this,this.$transcriptArea=$("<div>",{class:"able-transcript-area",role:"dialog","aria-label":this.tt.transcriptTitle}),this.$transcriptToolbar=$("<div>",{class:"able-window-toolbar able-"+this.toolbarIconColor+"-controls"}),this.$transcriptDiv=$("<div>",{class:"able-transcript"}),this.$autoScrollTranscriptCheckbox=$("<input>",{id:"autoscroll-transcript-checkbox",type:"checkbox"}),$autoScrollLabel=$("<label>",{for:"autoscroll-transcript-checkbox"}).text(this.tt.autoScroll),this.$transcriptToolbar.append($autoScrollLabel,this.$autoScrollTranscriptCheckbox),this.captions.length>1)for($languageSelectWrapper=$("<div>",{class:"transcript-language-select-wrapper"}),$languageSelectLabel=$("<label>",{for:"transcript-language-select"}).text(this.tt.language),this.$transcriptLanguageSelect=$("<select>",{id:"transcript-language-select"}),i=0;i<this.captions.length;i++)$option=$("<option></option>",{value:this.captions[i].language,lang:this.captions[i].language}).text(this.captions[i].label),this.captions[i].def&&$option.prop("selected",!0),this.$transcriptLanguageSelect.append($option);$languageSelectWrapper&&($languageSelectWrapper.append($languageSelectLabel,this.$transcriptLanguageSelect),this.$transcriptToolbar.append($languageSelectWrapper)),this.$transcriptArea.append(this.$transcriptToolbar,this.$transcriptDiv),this.transcriptDivLocation?$("#"+this.transcriptDivLocation).append(this.$transcriptArea):this.$ableWrapper.append(this.$transcriptArea),this.transcriptDivLocation||(this.initDragDrop("transcript"),1===this.prefTranscript&&this.positionDraggableWindow("transcript",this.getDefaultWidth("transcript"))),this.prefTranscript||this.transcriptDivLocation||this.$transcriptArea.hide()},AblePlayer.prototype.addTranscriptAreaEvents=function(){var thisObj=this;this.$autoScrollTranscriptCheckbox.click((function(){thisObj.handleTranscriptLockToggle(thisObj.$autoScrollTranscriptCheckbox.prop("checked"))})),this.$transcriptDiv.on("mousewheel DOMMouseScroll click scroll",(function(e){thisObj.scrollingTranscript||(thisObj.autoScrollTranscript=!1,thisObj.refreshControls("transcript")),thisObj.scrollingTranscript=!1})),void 0!==this.$transcriptLanguageSelect&&(this.$transcriptLanguageSelect.on("click mousedown",(function(e){e.stopPropagation()})),this.$transcriptLanguageSelect.on("change",(function(){var language=thisObj.$transcriptLanguageSelect.val();thisObj.syncTrackLanguages("transcript",language)})))},AblePlayer.prototype.transcriptSrcHasRequiredParts=function(){return!!($("#"+this.transcriptSrc).length&&(this.$transcriptArea=$("#"+this.transcriptSrc),this.$transcriptArea.find(".able-window-toolbar").length&&(this.$transcriptToolbar=this.$transcriptArea.find(".able-window-toolbar").eq(0),this.$transcriptArea.find(".able-transcript").length&&(this.$transcriptDiv=this.$transcriptArea.find(".able-transcript").eq(0),this.$transcriptArea.find(".able-transcript-seekpoint").length))))&&(this.$transcriptSeekpoints=this.$transcriptArea.find(".able-transcript-seekpoint"),!0)},AblePlayer.prototype.setupManualTranscript=function(){this.$autoScrollTranscriptCheckbox=$('<input id="autoscroll-transcript-checkbox" type="checkbox">'),this.$transcriptToolbar.append($('<label for="autoscroll-transcript-checkbox">'+this.tt.autoScroll+": </label>"),this.$autoScrollTranscriptCheckbox)},AblePlayer.prototype.updateTranscript=function(){if(this.transcriptType){if("external"===this.transcriptType||"popup"===this.transcriptType){var chapters,captions,descriptions;if(this.transcriptLang?captions=this.transcriptCaptions.cues:this.transcriptCaptions?(this.transcriptLang=this.transcriptCaptions.language,captions=this.transcriptCaptions.cues):this.selectedCaptions&&(this.transcriptLang=this.captionLang,captions=this.selectedCaptions.cues),this.transcriptChapters)chapters=this.transcriptChapters.cues;else if(this.chapters.length>0){if(this.transcriptLang)for(var i=0;i<this.chapters.length;i++)this.chapters[i].language===this.transcriptLang&&(chapters=this.chapters[i].cues);void 0===chapters&&(chapters=this.chapters[0].cues||[])}if(this.transcriptDescriptions)descriptions=this.transcriptDescriptions.cues;else if(this.descriptions.length>0){if(this.transcriptLang)for(var i=0;i<this.descriptions.length;i++)this.descriptions[i].language===this.transcriptLang&&(descriptions=this.descriptions[i].cues);descriptions||(descriptions=this.descriptions[0].cues||[])}var div=this.generateTranscript(chapters||[],captions||[],descriptions||[]);this.$transcriptDiv.html(div),this.$transcriptLanguageSelect&&(this.$transcriptLanguageSelect.find("option:selected").prop("selected",!1),this.$transcriptLanguageSelect.find("option[lang="+this.transcriptLang+"]").prop("selected",!0))}var thisObj=this;1===this.prefTabbable&&this.$transcriptDiv.find("span.able-transcript-seekpoint").attr("tabindex","0"),this.$transcriptArea.length>0&&this.$transcriptArea.find("span.able-transcript-seekpoint").click((function(e){thisObj.seekTrigger="transcript";var spanStart=parseFloat($(this).attr("data-start"));spanStart+=.01,thisObj.seekingFromTranscript?thisObj.seekingFromTranscript=!1:(thisObj.seekingFromTranscript=!0,thisObj.seekTo(spanStart))}))}},AblePlayer.prototype.highlightTranscript=function(currentTime){if(this.transcriptType){var start,end,isChapterHeading,thisObj=this;currentTime=parseFloat(currentTime),this.$transcriptArea.find("span.able-transcript-seekpoint").each((function(){if(start=parseFloat($(this).attr("data-start")),end=parseFloat($(this).attr("data-end")),isChapterHeading=!!$(this).parent().hasClass("able-transcript-chapter-heading"),currentTime>=start&&currentTime<=end&&!isChapterHeading)return $(this).hasClass("able-highlight")||(thisObj.$transcriptArea.find(".able-highlight").removeClass("able-highlight"),$(this).addClass("able-highlight"),thisObj.movingHighlight=!0),!1})),thisObj.currentHighlight=thisObj.$transcriptArea.find(".able-highlight"),0===thisObj.currentHighlight.length&&(thisObj.currentHighlight=null)}},AblePlayer.prototype.generateTranscript=function(chapters,captions,descriptions){var thisObj=this,$main=$('<div class="able-transcript-container"></div>'),transcriptTitle;if($main.attr("lang",this.transcriptLang),transcriptTitle=void 0!==this.transcriptTitle?this.transcriptTitle:this.lyricsMode?this.tt.lyricsTitle:this.tt.transcriptTitle,void 0===this.transcriptDivLocation){var headingNumber=this.playerHeadingLevel,chapterHeadingNumber=(headingNumber+=1)+1;if(headingNumber<=6)var transcriptHeading="h"+headingNumber.toString();else var transcriptHeading="div";var $transcriptHeadingTag=$("<"+transcriptHeading+">");$transcriptHeadingTag.addClass("able-transcript-heading"),headingNumber>6&&$transcriptHeadingTag.attr({role:"heading","aria-level":headingNumber}),$transcriptHeadingTag.text(transcriptTitle),$transcriptHeadingTag.attr("lang",this.lang),$main.append($transcriptHeadingTag)}for(var nextChapter=0,nextCap=0,nextDesc=0,addChapter=function(div,chap){if(chapterHeadingNumber<=6)var chapterHeading="h"+chapterHeadingNumber.toString();else var chapterHeading="div";var $chapterHeadingTag=$("<"+chapterHeading+">",{class:"able-transcript-chapter-heading"});chapterHeadingNumber>6&&$chapterHeadingTag.attr({role:"heading","aria-level":chapterHeadingNumber});for(var flattenComponentForChapter=function(comp){var result=[];if("string"===comp.type)result.push(comp.value);else for(var i=0;i<comp.children.length;i++)result=result.concat(flattenComponentForChapter(comp.children[i]));return result},$chapSpan=$("<span>",{class:"able-transcript-seekpoint"}),i=0;i<chap.components.children.length;i++)for(var results=flattenComponentForChapter(chap.components.children[i]),jj=0;jj<results.length;jj++)$chapSpan.append(results[jj]);$chapSpan.attr("data-start",chap.start.toString()),$chapSpan.attr("data-end",chap.end.toString()),$chapterHeadingTag.append($chapSpan),div.append($chapterHeadingTag)},addDescription=function(div,desc){var $descDiv=$("<div>",{class:"able-transcript-desc"}),$descHiddenSpan=$("<span>",{class:"able-hidden"});$descHiddenSpan.attr("lang",thisObj.lang),$descHiddenSpan.text(thisObj.tt.prefHeadingDescription+": "),$descDiv.append($descHiddenSpan);for(var flattenComponentForDescription=function(comp){var result=[];if("string"===comp.type)result.push(comp.value);else for(var i=0;i<comp.children.length;i++)result=result.concat(flattenComponentForDescription(comp.children[i]));return result},$descSpan=$("<span>",{class:"able-transcript-seekpoint"}),i=0;i<desc.components.children.length;i++)for(var results=flattenComponentForDescription(desc.components.children[i]),jj=0;jj<results.length;jj++)$descSpan.append(results[jj]);$descSpan.attr("data-start",desc.start.toString()),$descSpan.attr("data-end",desc.end.toString()),$descDiv.append($descSpan),div.append($descDiv)},addCaption=function(div,cap){for(var $capSpan=$("<span>",{class:"able-transcript-seekpoint able-transcript-caption"}),flattenComponentForCaption=function(comp){var result=[],parts=0,flattenString=function(str){var flatStr;parts++;var result=[];if(""===str)return result;var openBracket=str.indexOf("["),closeBracket=str.indexOf("]"),openParen=str.indexOf("("),closeParen=str.indexOf(")"),hasBrackets=-1!==openBracket&&-1!==closeBracket,hasParens=-1!==openParen&&-1!==closeParen;if(hasParens||hasBrackets){if(parts>1)var silentSpanBreak="<br/>";else var silentSpanBreak="";var silentSpanOpen=silentSpanBreak+'<span class="able-unspoken">',silentSpanClose="</span>";hasParens&&hasBrackets&&(openBracket<openParen?hasParens=!1:hasBrackets=!1)}return hasParens?(flatStr=str.substring(0,openParen),flatStr+=silentSpanOpen,flatStr+=str.substring(openParen,closeParen+1),flatStr+=silentSpanClose,flatStr+=flattenString(str.substring(closeParen+1)),result.push(flatStr)):hasBrackets?(flatStr=str.substring(0,openBracket),flatStr+=silentSpanOpen,flatStr+=str.substring(openBracket,closeBracket+1),flatStr+=silentSpanClose,flatStr+=flattenString(str.substring(closeBracket+1)),result.push(flatStr)):result.push(str),result};if("string"===comp.type)result=result.concat(flattenString(comp.value));else if("v"===comp.type){var $vSpan=$("<span>",{class:"able-unspoken"});$vSpan.text("("+comp.value+")"),result.push($vSpan);for(var i=0;i<comp.children.length;i++)for(var subResults=flattenComponentForCaption(comp.children[i]),jj=0;jj<subResults.length;jj++)result.push(subResults[jj])}else if("b"===comp.type||"i"===comp.type){if("b"===comp.type)var $tag=$("<strong>");else if("i"===comp.type)var $tag=$("<em>");for(var i=0;i<comp.children.length;i++)for(var subResults=flattenComponentForCaption(comp.children[i]),jj=0;jj<subResults.length;jj++)$tag.append(subResults[jj]);"b"!==comp.type&&"i"!=comp.type||result.push($tag," ")}else for(var i=0;i<comp.children.length;i++)result=result.concat(flattenComponentForCaption(comp.children[i]));return result},i=0;i<cap.components.children.length;i++)for(var results=flattenComponentForCaption(cap.components.children[i]),jj=0;jj<results.length;jj++){var result=results[jj];"string"==typeof result&&(thisObj.lyricsMode?result=result.replace("\n","<br>")+"<br>":result+=" "),$capSpan.append(result)}$capSpan.attr("data-start",cap.start.toString()),$capSpan.attr("data-end",cap.end.toString()),div.append($capSpan),div.append(" \n")};nextChapter<chapters.length||nextDesc<descriptions.length||nextCap<captions.length;){if(nextChapter<chapters.length&&nextDesc<descriptions.length&&nextCap<captions.length)var firstStart=Math.min(chapters[nextChapter].start,descriptions[nextDesc].start,captions[nextCap].start);else if(nextChapter<chapters.length&&nextDesc<descriptions.length)var firstStart=Math.min(chapters[nextChapter].start,descriptions[nextDesc].start);else if(nextChapter<chapters.length&&nextCap<captions.length)var firstStart=Math.min(chapters[nextChapter].start,captions[nextCap].start);else if(nextDesc<descriptions.length&&nextCap<captions.length)var firstStart=Math.min(descriptions[nextDesc].start,captions[nextCap].start);else var firstStart=null;null!==firstStart?void 0!==chapters[nextChapter]&&chapters[nextChapter].start===firstStart?(addChapter($main,chapters[nextChapter]),nextChapter+=1):void 0!==descriptions[nextDesc]&&descriptions[nextDesc].start===firstStart?(addDescription($main,descriptions[nextDesc]),nextDesc+=1):(addCaption($main,captions[nextCap]),nextCap+=1):nextChapter<chapters.length?(addChapter($main,chapters[nextChapter]),nextChapter+=1):nextDesc<descriptions.length?(addDescription($main,descriptions[nextDesc]),nextDesc+=1):nextCap<captions.length&&(addCaption($main,captions[nextCap]),nextCap+=1)}var $components=$main.children(),spanCount=0,openBlock=!0;return $components.each((function(){$(this).hasClass("able-transcript-caption")?(-1===$(this).text().indexOf("[")&&-1===$(this).text().indexOf("(")||spanCount>0&&($main.find(".able-block-temp").removeClass("able-block-temp").wrapAll('<div class="able-transcript-block"></div>'),spanCount=0),$(this).addClass("able-block-temp"),spanCount++):spanCount>0&&($main.find(".able-block-temp").removeClass("able-block-temp").wrapAll('<div class="able-transcript-block"></div>'),spanCount=0)})),$main}}(jQuery),function($){AblePlayer.prototype.showSearchResults=function(){var thisObj=this;if(this.searchDiv&&this.searchString&&$("#"+this.SearchDiv)){var searchStringHtml="<p>"+this.tt.resultsSummary1+" ";searchStringHtml+='<span id="able-search-term-echo">'+this.searchString+"</span>",searchStringHtml+="</p>";var resultsArray=this.searchFor(this.searchString);if(resultsArray.length>0){var $resultsSummary=$("<p>",{class:"able-search-results-summary"}),resultsSummaryText=this.tt.resultsSummary2;resultsSummaryText+=" <strong>"+resultsArray.length+"</strong> ",resultsSummaryText+=this.tt.resultsSummary3+" ",resultsSummaryText+=this.tt.resultsSummary4,$resultsSummary.html(resultsSummaryText);for(var $resultsList=$("<ul>"),i=0;i<resultsArray.length;i++){var resultId="aria-search-result-"+i,$resultsItem=$("<li>",{}),itemStartTime=this.secondsToTime(resultsArray[i].start),itemLabel=this.tt.searchButtonLabel+" "+itemStartTime.title,itemStartSpan=$("<button>",{class:"able-search-results-time","data-start":resultsArray[i].start,title:itemLabel,"aria-label":itemLabel,"aria-describedby":resultId});itemStartSpan.text(itemStartTime.value),itemStartSpan.on("click",(function(e){thisObj.seekTrigger="search";var spanStart=parseFloat($(this).attr("data-start"));spanStart+=.01,thisObj.seeking=!0,thisObj.seekTo(spanStart)}));var itemText=$("<span>",{class:"able-search-result-text",id:resultId});itemText.html("..."+resultsArray[i].caption+"..."),$resultsItem.append(itemStartSpan,itemText),$resultsList.append($resultsItem)}$("#"+this.searchDiv).append(searchStringHtml,$resultsSummary,$resultsList)}else{var noResults=$("<p>").text(this.tt.noResultsFound);$("#"+this.searchDiv).append(noResults)}}},AblePlayer.prototype.searchFor=function(searchString){var captionLang,captions,results,caption,c,i,j;results=[];var searchTerms=searchString.split(" ");if(this.captions.length>0){for(i=0;i<this.captions.length;i++)this.captions[i].language===this.searchLang&&(captionLang=this.searchLang,captions=this.captions[i].cues);if(captions.length>0)for(c=0,i=0;i<captions.length;i++)if(-1!==$.inArray(captions[i].components.children[0].type,["string","i","b","u","v","c"]))for(caption=this.flattenCueForCaption(captions[i]),j=0;j<searchTerms.length;j++)if(-1!==caption.indexOf(searchTerms[j])){results[c]=[],results[c].start=captions[i].start,results[c].lang=captionLang,results[c].caption=this.highlightSearchTerm(searchTerms,j,caption),c++;break}}return results},AblePlayer.prototype.highlightSearchTerm=function(searchTerms,index,resultString){var i,searchTerm,termIndex,termLength,str1,str2,str3;for(i=index;i<searchTerms.length;i++)searchTerm=searchTerms[i],-1!==(termIndex=resultString.indexOf(searchTerm))&&((termLength=searchTerm.length)>0?(str1=resultString.substring(0,termIndex),str2='<span class="able-search-term">'+searchTerm+"</span>",str3=resultString.substring(termIndex+termLength),resultString=str1+str2+str3):(str1='<span class="able-search-term">'+searchTerm+"</span>",str2=resultString.substring(termIndex+termLength),resultString=str1+str2));return resultString},AblePlayer.prototype.secondsToTime=function(totalSeconds){var totalSeconds=Math.floor(totalSeconds),hours=parseInt(totalSeconds/3600,10)%24,minutes=parseInt(totalSeconds/60,10)%60,seconds=totalSeconds%60,value="",title="";hours>0&&(value+=hours+":",title+=1==hours?"1 "+this.tt.hour+" ":hours+" "+this.tt.hours+" "),minutes<10?(value+="0"+minutes+":",minutes>0&&(title+=1==minutes?"1 "+this.tt.minute+" ":minutes+" "+this.tt.minutes+" ")):(value+=minutes+":",title+=minutes+" "+this.tt.minutes+" "),seconds<10?(value+="0"+seconds,seconds>0&&(title+=1==seconds?"1 "+this.tt.second+" ":seconds+" "+this.tt.seconds+" ")):(value+=seconds,title+=seconds+" "+this.tt.seconds+" ");var time=[];return time.value=value,time.title=title,time}}(jQuery),function($){AblePlayer.prototype.onMediaUpdateTime=function(duration,elapsed){var thisObj=this;this.getMediaTimes(duration,elapsed).then((function(mediaTimes){thisObj.duration=mediaTimes.duration,thisObj.elapsed=mediaTimes.elapsed,thisObj.swappingSrc&&void 0!==thisObj.swapTime?thisObj.swapTime===thisObj.elapsed&&thisObj.playing&&(thisObj.playMedia(),thisObj.swappingSrc=!1,thisObj.swapTime=null):(1===thisObj.prefHighlight&&thisObj.highlightTranscript(thisObj.elapsed),thisObj.updateCaption(thisObj.elapsed),thisObj.showDescription(thisObj.elapsed),thisObj.updateChapter(thisObj.elapsed),thisObj.updateMeta(thisObj.elapsed),thisObj.refreshControls("timeline",thisObj.duration,thisObj.elapsed))}))},AblePlayer.prototype.onMediaPause=function(){this.controlsHidden&&(this.fadeControls("in"),this.controlsHidden=!1),"active"===this.hideControlsTimeoutStatus&&(window.clearTimeout(this.hideControlsTimeout),this.hideControlsTimeoutStatus="clear"),this.refreshControls("playpause")},AblePlayer.prototype.onMediaComplete=function(){this.hasPlaylist&&!this.cueingPlaylistItem&&(this.playlistIndex===this.$playlist.length-1?this.loop?(this.playlistIndex=0,this.cueingPlaylistItem=!0,this.cuePlaylistItem(0)):(this.playing=!1,this.paused=!0):(this.playlistIndex++,this.cueingPlaylistItem=!0,this.cuePlaylistItem(this.playlistIndex))),this.refreshControls("init")},AblePlayer.prototype.onMediaNewSourceLoad=function(){this.cueingPlaylistItem&&(this.cueingPlaylistItem=!1),!0===this.swappingSrc&&(this.swapTime>0?this.seekTo(this.swapTime):(this.playing&&this.playMedia(),this.swappingSrc=!1)),this.refreshControls("init")},AblePlayer.prototype.onWindowResize=function(){var newWidth,newHeight;this.fullscreen?(newWidth=$(window).width(),newHeight=this.isUserAgent("Firefox")||this.isUserAgent("Trident")||this.isUserAgent("Edge")?window.innerHeight-this.$playerDiv.outerHeight()-20:window.outerHeight>=window.innerHeight?window.innerHeight-this.$playerDiv.outerHeight():window.outerHeight,this.$descDiv.is(":hidden")||(newHeight-=this.$descDiv.height()),this.positionCaptions("overlay")):this.restoringAfterFullScreen?(newWidth=this.preFullScreenWidth,newHeight=this.preFullScreenHeight):(newWidth=this.$ableWrapper.width(),newHeight=void 0!==this.aspectRatio?Math.round(newWidth/this.aspectRatio):this.$ableWrapper.height(),this.positionCaptions());this.resizePlayer(newWidth,newHeight)},AblePlayer.prototype.addSeekbarListeners=function(){var thisObj=this;this.seekBar.bodyDiv.on("startTracking",(function(e){thisObj.pausedBeforeTracking=thisObj.paused,thisObj.pauseMedia()})).on("tracking",(function(e,position){thisObj.highlightTranscript(position),thisObj.updateCaption(position),thisObj.showDescription(position),thisObj.updateChapter(thisObj.convertChapterTimeToVideoTime(position)),thisObj.updateMeta(position),thisObj.refreshControls("init")})).on("stopTracking",(function(e,position){thisObj.useChapterTimes?thisObj.seekTo(thisObj.convertChapterTimeToVideoTime(position)):thisObj.seekTo(position),thisObj.pausedBeforeTracking||setTimeout((function(){thisObj.playMedia()}),200)}))},AblePlayer.prototype.onClickPlayerButton=function(el){var whichButton,prefsPopup;"play"===(whichButton=$(el).attr("class").split(" ")[0].substr(20))?(this.clickedPlay=!0,this.handlePlay()):"restart"===whichButton?(this.seekTrigger="restart",this.handleRestart()):"previous"===whichButton?(this.userClickedPlaylist=!0,this.seekTrigger="previous",this.buttonWithFocus="previous",this.handlePrevTrack()):"next"===whichButton?(this.userClickedPlaylist=!0,this.seekTrigger="next",this.buttonWithFocus="next",this.handleNextTrack()):"rewind"===whichButton?(this.seekTrigger="rewind",this.handleRewind()):"forward"===whichButton?(this.seekTrigger="forward",this.handleFastForward()):"mute"===whichButton?this.handleMute():"volume"===whichButton?this.handleVolume():"faster"===whichButton?this.handleRateIncrease():"slower"===whichButton?this.handleRateDecrease():"captions"===whichButton?this.handleCaptionToggle():"chapters"===whichButton?this.handleChapters():"descriptions"===whichButton?this.handleDescriptionToggle():"sign"===whichButton?this.closingSign||this.handleSignToggle():"preferences"===whichButton?"menu"===$(el).attr("data-prefs-popup")?this.handlePrefsClick():(this.showingPrefsDialog=!0,this.closePopups(),"keyboard"===(prefsPopup=$(el).attr("data-prefs-popup"))?this.keyboardPrefsDialog.show():"captions"===prefsPopup?this.captionPrefsDialog.show():"descriptions"===prefsPopup?this.descPrefsDialog.show():"transcript"===prefsPopup&&this.transcriptPrefsDialog.show(),this.showingPrefsDialog=!1):"help"===whichButton?this.handleHelpClick():"transcript"===whichButton?this.closingTranscript||this.handleTranscriptToggle():"fullscreen"===whichButton&&(this.clickedFullscreenButton=!0,this.handleFullscreenToggle())},AblePlayer.prototype.okToHandleKeyPress=function(){var activeElement=AblePlayer.getActiveDOMElement();return"INPUT"!==$(activeElement).prop("tagName")},AblePlayer.prototype.onPlayerKeyPress=function(e){var which,$thisElement;return(which=e.which)>=65&&which<=90&&(which+=32),$thisElement=$(document.activeElement),27===which&&(console.log("onPlayerKeyPress, you pressed Escape"),$.contains(this.$transcriptArea[0],$thisElement[0]))?(console.log("element is part of the transcript area"),this.handleTranscriptToggle(),!1):this.okToHandleKeyPress()?void($(":focus").is("[contenteditable]")||$(":focus").is("input")||$(":focus").is("textarea")&&!this.stenoMode||$(":focus").is("select")||e.target.hasAttribute("contenteditable")||"INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName&&!this.stenoMode||"SELECT"===e.target.tagName||(27===which?(console.log("You pushed ESC"),this.closePopups()):32===which?"button"===$thisElement.attr("role")&&(e.preventDefault(),$thisElement.click()):112===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handlePlay()):115===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handleRestart()):109===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handleMute()):118===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handleVolume()):which>=49&&which<=57?this.usingModifierKeys(e)&&(e.preventDefault(),this.handleVolume(which)):99===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handleCaptionToggle()):100===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handleDescriptionToggle()):102===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handleFastForward()):114===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handleRewind()):98===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handlePrevTrack()):110===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handleNextTrack()):101===which?this.usingModifierKeys(e)&&(e.preventDefault(),this.handlePrefsClick()):13===which&&("button"===$thisElement.attr("role")||"SPAN"===$thisElement.prop("tagName")?$thisElement.click():"LI"===$thisElement.prop("tagName")&&$thisElement.click()))):(console.log("NOT ok!"),!1)},AblePlayer.prototype.addHtml5MediaListeners=function(){var thisObj=this;this.$media.on("emptied",(function(){})).on("loadedmetadata",(function(){thisObj.duration=thisObj.media.duration,thisObj.onMediaNewSourceLoad()})).on("canplay",(function(){})).on("canplaythrough",(function(){thisObj.playbackRate&&thisObj.setPlaybackRate(thisObj.playbackRate),thisObj.userClickedPlaylist&&(thisObj.startedPlaying||thisObj.playMedia(),thisObj.userClickedPlaylist=!1),"restart"==thisObj.seekTrigger||"chapter"==thisObj.seekTrigger||"transcript"==thisObj.seekTrigger||"search"==thisObj.seekTrigger?thisObj.playMedia():thisObj.startedPlaying?thisObj.hasPlaylist?(thisObj.playlistIndex!==thisObj.$playlist.length||thisObj.loop)&&thisObj.playMedia():thisObj.getPlayerState().then((function(currentState){!thisObj.swappingSrc||"stopped"!==currentState&&"paused"!==currentState||(thisObj.startedPlaying=!1,thisObj.swapTime>0?thisObj.seekTo(thisObj.swapTime):thisObj.playMedia())})):thisObj.startTime>0?thisObj.seeking?(thisObj.seeking=!1,(thisObj.autoplay||thisObj.okToPlay)&&thisObj.playMedia()):thisObj.seekTo(thisObj.startTime):thisObj.defaultChapter&&void 0!==thisObj.selectedChapters?thisObj.seekToChapter(thisObj.defaultChapter):(thisObj.autoplay||thisObj.okToPlay)&&thisObj.playMedia()})).on("play",(function(){thisObj.refreshControls("playpause")})).on("playing",(function(){thisObj.playing=!0,thisObj.paused=!1,thisObj.refreshControls("playpause")})).on("ended",(function(){thisObj.playing=!1,thisObj.paused=!0,thisObj.onMediaComplete()})).on("progress",(function(){thisObj.refreshControls("timeline")})).on("waiting",(function(){})).on("durationchange",(function(){thisObj.refreshControls("timeline")})).on("timeupdate",(function(){thisObj.onMediaUpdateTime()})).on("pause",(function(){thisObj.clickedPlay?(thisObj.playing=!1,thisObj.paused=!0):thisObj.hasPlaylist||thisObj.swappingSrc||(thisObj.playing=!1,thisObj.paused=!0),thisObj.clickedPlay=!1,thisObj.onMediaPause()})).on("ratechange",(function(){})).on("volumechange",(function(){thisObj.volume=thisObj.getVolume(),thisObj.debug&&console.log("media volume change to "+thisObj.volume+" ("+thisObj.volumeButton+")")})).on("error",(function(){if(thisObj.debug)switch(thisObj.media.error.code){case 1:console.log("HTML5 Media Error: MEDIA_ERR_ABORTED");break;case 2:console.log("HTML5 Media Error: MEDIA_ERR_NETWORK ");break;case 3:console.log("HTML5 Media Error: MEDIA_ERR_DECODE ");break;case 4:console.log("HTML5 Media Error: MEDIA_ERR_SRC_NOT_SUPPORTED ")}}))},AblePlayer.prototype.addVimeoListeners=function(){var thisObj=this;this.vimeoPlayer.on("loaded",(function(vimeoId){thisObj.onMediaNewSourceLoad()})),this.vimeoPlayer.on("play",(function(data){thisObj.playing=!0,thisObj.startedPlaying=!0,thisObj.paused=!1,thisObj.refreshControls("playpause")})),this.vimeoPlayer.on("ended",(function(data){thisObj.playing=!1,thisObj.paused=!0,thisObj.onMediaComplete()})),this.vimeoPlayer.on("bufferstart",(function(){})),this.vimeoPlayer.on("bufferend",(function(){})),this.vimeoPlayer.on("progress",(function(data){})),this.vimeoPlayer.on("seeking",(function(data){})),this.vimeoPlayer.on("seeked",(function(data){})),this.vimeoPlayer.on("timeupdate",(function(data){thisObj.onMediaUpdateTime(data.duration,data.seconds)})),this.vimeoPlayer.on("pause",(function(data){thisObj.clickedPlay?(thisObj.playing=!1,thisObj.paused=!0):thisObj.hasPlaylist||thisObj.swappingSrc||(thisObj.playing=!1,thisObj.paused=!0),thisObj.clickedPlay=!1,thisObj.onMediaPause(),thisObj.refreshControls("playpause")})),this.vimeoPlayer.on("playbackratechange",(function(data){thisObj.vimeoPlaybackRate=data.playbackRate})),this.vimeoPlayer.on("texttrackchange",(function(data){})),this.vimeoPlayer.on("volumechange",(function(data){thisObj.volume=10*data.volume})),this.vimeoPlayer.on("error",(function(data){}))},AblePlayer.prototype.addEventListeners=function(){var thisObj,whichButton,thisElement;if(thisObj=this,$(window).resize((function(){thisObj.onWindowResize()})),window.MutationObserver){var target=this.$ableDiv[0],observer,config={attributes:!0,childList:!0,characterData:!0};new MutationObserver((function(mutations){mutations.forEach((function(mutation){"attributes"===mutation.type&&"style"===mutation.attributeName&&thisObj.$ableDiv.is(":visible")&&thisObj.refreshControls("init")}))})).observe(target,config)}void 0!==this.seekBar?this.addSeekbarListeners():setTimeout((function(){void 0!==thisObj.seekBar&&thisObj.addSeekbarListeners()}),2e3),this.$controllerDiv.find('div[role="button"]').on("click",(function(e){e.stopPropagation(),thisObj.onClickPlayerButton(this)})),$(document).on("click",(function(e){if(0!==e.button)return!1;($(".able-popup:visible").length||$(".able-volume-popup:visible"))&&thisObj.closePopups()})),this.$ableDiv.on("mousemove",(function(){thisObj.controlsHidden?(thisObj.fadeControls("in"),thisObj.controlsHidden=!1,"active"===thisObj.hideControlsTimeoutStatus&&(window.clearTimeout(thisObj.hideControlsTimeout),thisObj.hideControlsTimeoutStatus="clear"),thisObj.hideControls&&thisObj.invokeHideControlsTimeout()):"active"===thisObj.hideControlsTimeoutStatus&&(window.clearTimeout(thisObj.hideControlsTimeout),thisObj.hideControlsTimeoutStatus="clear",thisObj.hideControls&&thisObj.invokeHideControlsTimeout())})),$(document).keydown((function(e){thisObj.controlsHidden?(thisObj.fadeControls("in"),thisObj.controlsHidden=!1,"active"===thisObj.hideControlsTimeoutStatus&&(window.clearTimeout(thisObj.hideControlsTimeout),thisObj.hideControlsTimeoutStatus="clear"),thisObj.hideControls&&thisObj.invokeHideControlsTimeout()):"active"===thisObj.hideControlsTimeoutStatus&&(window.clearTimeout(thisObj.hideControlsTimeout),thisObj.hideControlsTimeoutStatus="clear",thisObj.hideControls&&thisObj.invokeHideControlsTimeout())})),this.$ableDiv.keydown((function(e){AblePlayer.nextIndex>1&&thisObj.onPlayerKeyPress(e)})),this.$transcriptArea&&this.$transcriptArea.on("keydown",(function(e){AblePlayer.nextIndex>1&&thisObj.onPlayerKeyPress(e)})),this.$playlist&&this.$playlist.click((function(e){thisObj.userClickedPlaylist||(thisObj.userClickedPlaylist=!0,thisObj.playlistIndex=$(this).index(),thisObj.cuePlaylistItem(thisObj.playlistIndex))})),this.$media.click((function(){thisObj.handlePlay()})),"html5"===this.player?this.addHtml5MediaListeners():"vimeo"===this.player?this.addVimeoListeners():"youtube"===this.player&&setInterval((function(){thisObj.onMediaUpdateTime()}),300)}}(jQuery),function($){AblePlayer.prototype.initDragDrop=function(which){var thisObj,$window,$toolbar,windowName,$resizeHandle,resizeZIndex;thisObj=this,"transcript"===which?($window=this.$transcriptArea,windowName="transcript-window",$toolbar=this.$transcriptToolbar):"sign"===which&&($window=this.$signWindow,windowName="sign-window",$toolbar=this.$signToolbar),$toolbar.addClass("able-draggable"),$resizeHandle=$("<div>",{class:"able-resizable"}),resizeZIndex=parseInt($window.css("z-index"))+100,$resizeHandle.css("z-index",resizeZIndex),$window.append($resizeHandle),$toolbar.on("mousedown mouseup touchstart touchend",(function(e){return e.stopPropagation(),"mousedown"===e.type||"touchstart"===e.type?thisObj.windowMenuClickRegistered||(thisObj.windowMenuClickRegistered=!0,thisObj.startMouseX=e.pageX,thisObj.startMouseY=e.pageY,thisObj.dragDevice="mouse",thisObj.startDrag(which,$window)):"mouseup"!==e.type&&"touchend"!==e.type||thisObj.dragging&&"mouse"===thisObj.dragDevice&&thisObj.endDrag(which),!1})),$resizeHandle.on("mousedown mouseup touchstart touchend",(function(e){return e.stopPropagation(),"mousedown"===e.type||"touchstart"===e.type?thisObj.windowMenuClickRegistered||(thisObj.windowMenuClickRegistered=!0,thisObj.startMouseX=e.pageX,thisObj.startMouseY=e.pageY,thisObj.startResize(which,$window)):"mouseup"!==e.type&&"touchend"!==e.type||thisObj.resizing&&thisObj.endResize(which),!1})),$window.on("click",(function(){thisObj.windowMenuClickRegistered||thisObj.finishingDrag||thisObj.updateZIndex(which),thisObj.finishingDrag=!1})),this.addWindowMenu(which,$window,windowName)},AblePlayer.prototype.addWindowMenu=function(which,$window,windowName){var thisObj,$windowAlert,menuId,$newButton,$buttonIcon,buttonImgSrc,$buttonImg,$buttonLabel,tooltipId,$tooltip,$popup,label,position,buttonHeight,buttonWidth,tooltipY,tooltipX,tooltipStyle,tooltip,$optionList,menuBaseId,options,i,$optionItem,option,menuId;thisObj=this,this.windowMenuClickRegistered=!1,this.finishingDrag=!1,($windowAlert=$('<div role="alert"></div>')).addClass("able-alert"),$windowAlert.hide(),$windowAlert.appendTo(this.$activeWindow),$windowAlert.css({top:$window.offset().top}),menuId=this.mediaId+"-"+windowName+"-menu",$newButton=$("<button>",{type:"button",tabindex:"0","aria-label":this.tt.windowButtonLabel,"aria-haspopup":"true","aria-controls":menuId,class:"able-button-handler-preferences"}),"font"===this.iconType?($buttonIcon=$("<span>",{class:"icon-preferences","aria-hidden":"true"}),$newButton.append($buttonIcon)):(buttonImgSrc=this.rootPath+"button-icons/"+this.toolbarIconColor+"/preferences.png",$buttonImg=$("<img>",{src:buttonImgSrc,alt:"",role:"presentation"}),$newButton.append($buttonImg)),$buttonLabel=$("<span>",{class:"able-clipped"}).text(this.tt.windowButtonLabel),$newButton.append($buttonLabel),tooltipId=this.mediaId+"-"+windowName+"-tooltip",$tooltip=$("<div>",{class:"able-tooltip",id:tooltipId}).hide(),$newButton.on("mouseenter focus",(function(e){var label=$(this).attr("aria-label"),position=$(this).position(),buttonHeight=$(this).height(),buttonWidth=$(this).width(),tooltipY,tooltipX=0,tooltipStyle={left:"",right:"0px",top:position.top-buttonHeight-5+"px"},tooltip=AblePlayer.localGetElementById($newButton[0],tooltipId).text(label).css(tooltipStyle);thisObj.showTooltip(tooltip),$(this).on("mouseleave blur",(function(){AblePlayer.localGetElementById($newButton[0],tooltipId).text("").hide()}))})),$popup=this.setupPopups(windowName),"transcript"===which?(this.$transcriptAlert=$windowAlert,this.$transcriptPopupButton=$newButton,this.$transcriptPopup=$popup,this.$transcriptToolbar.prepend($windowAlert,$newButton,$tooltip,$popup)):"sign"===which&&(this.$signAlert=$windowAlert,this.$signPopupButton=$newButton,this.$signPopup=$popup,this.$signToolbar.append($windowAlert,$newButton,$tooltip,$popup)),$newButton.on("click mousedown keydown",(function(e){return!thisObj.focusNotClick&&(thisObj.dragging?(thisObj.dragKeys(which,e),!1):(e.stopPropagation(),thisObj.windowMenuClickRegistered||thisObj.finishingDrag||thisObj.handleWindowButtonClick(which,e),void(thisObj.finishingDrag=!1)))})),this.addResizeDialog(which,$window)},AblePlayer.prototype.addResizeDialog=function(which,$window){var thisObj,$windowPopup,$windowButton,widthId,heightId,startingWidth,startingHeight,aspectRatio,$resizeForm,$resizeWrapper,$resizeWidthDiv,$resizeWidthInput,$resizeWidthLabel,$resizeHeightDiv,$resizeHeightInput,$resizeHeightLabel,tempWidth,tempHeight,$saveButton,$cancelButton,newWidth,newHeight,resizeDialog;thisObj=this,"transcript"===which?($windowPopup=this.$transcriptPopup,$windowButton=this.$transcriptPopupButton):"sign"===which&&($windowPopup=this.$signPopup,$windowButton=this.$signPopupButton),widthId=this.mediaId+"-resize-"+which+"-width",heightId=this.mediaId+"-resize-"+which+"-height",startingWidth=$window.width(),startingHeight=$window.height(),aspectRatio=startingWidth/startingHeight,$resizeForm=$("<div></div>",{class:"able-resize-form"}),$resizeWrapper=$("<div></div>"),$resizeWidthDiv=$("<div></div>"),$resizeWidthInput=$("<input>",{type:"text",id:widthId,value:startingWidth}),$resizeWidthLabel=$("<label>",{for:widthId}).text(this.tt.width),$resizeHeightDiv=$("<div></div>"),$resizeHeightInput=$("<input>",{type:"text",id:heightId,value:startingHeight}),$resizeHeightLabel=$("<label>",{for:heightId}).text(this.tt.height),"sign"===which&&($resizeHeightInput.prop("readonly",!0),$resizeWidthInput.on("input",(function(){tempWidth=$(this).val(),tempHeight=Math.round(tempWidth/aspectRatio,0),$resizeHeightInput.val(tempHeight)}))),$saveButton=$('<button class="modal-button">'+this.tt.save+"</button>"),$cancelButton=$('<button class="modal-button">'+this.tt.cancel+"</button>"),$saveButton.on("click",(function(){newWidth=$("#"+widthId).val(),newHeight=$("#"+heightId).val(),newWidth===startingWidth&&newHeight===startingHeight||(thisObj.resizeObject(which,newWidth,newHeight),thisObj.updateCookie(which)),resizeDialog.hide(),$windowPopup.hide(),$windowButton.focus()})),$cancelButton.on("click",(function(){resizeDialog.hide(),$windowPopup.hide(),$windowButton.focus()})),$resizeWidthDiv.append($resizeWidthLabel,$resizeWidthInput),$resizeHeightDiv.append($resizeHeightLabel,$resizeHeightInput),$resizeWrapper.append($resizeWidthDiv,$resizeHeightDiv),$resizeForm.append($resizeWrapper,"<hr>",$saveButton,$cancelButton),$("body").append($resizeForm),resizeDialog=new AccessibleDialog($resizeForm,$windowButton,"alert",this.tt.windowResizeHeading,$resizeWrapper,this.tt.closeButtonLabel,"20em"),"transcript"===which?this.transcriptResizeDialog=resizeDialog:"sign"===which&&(this.signResizeDialog=resizeDialog)},AblePlayer.prototype.handleWindowButtonClick=function(which,e){var thisObj,$windowPopup,$windowButton,$toolbar,popupTop;if(thisObj=this,this.focusNotClick)return!1;if("transcript"===which?($windowPopup=this.$transcriptPopup,$windowButton=this.$transcriptPopupButton,$toolbar=this.$transcriptToolbar):"sign"===which&&($windowPopup=this.$signPopup,$windowButton=this.$signPopupButton,$toolbar=this.$signToolbar),"keydown"===e.type)if(32===e.which||13===e.which)this.windowMenuClickRegistered=!0;else{if(27!==e.which)return!1;$windowPopup.is(":visible")?$windowPopup.hide("fast",(function(){thisObj.windowMenuClickRegistered=!1,$windowPopup.find("li").removeClass("able-focus").attr("tabindex","-1"),$windowButton.focus()})):"sign"===which?this.handleSignToggle():"transcript"===which&&this.handleTranscriptToggle()}else this.windowMenuClickRegistered=!0;$windowPopup.is(":visible")?($windowPopup.hide(200,"",(function(){thisObj.windowMenuClickRegistered=!1})),$windowPopup.find("li").removeClass("able-focus"),$windowButton.attr("aria-expanded","false").focus()):(this.updateZIndex(which),popupTop=$windowButton.position().top+$windowButton.outerHeight(),$windowPopup.css("top",popupTop),$windowPopup.show(200,"",(function(){$windowButton.attr("aria-expanded","true"),$(this).find("li").first().focus().addClass("able-focus"),thisObj.windowMenuClickRegistered=!1})))},AblePlayer.prototype.handleMenuChoice=function(which,choice,e){var thisObj,$window,$windowPopup,$windowButton,resizeDialog,width,height,$thisRadio;if(thisObj=this,"transcript"===which?($window=this.$transcriptArea,$windowPopup=this.$transcriptPopup,$windowButton=this.$transcriptPopupButton,resizeDialog=this.transcriptResizeDialog):"sign"===which&&($window=this.$signWindow,$windowPopup=this.$signPopup,$windowButton=this.$signPopupButton,resizeDialog=this.signResizeDialog),this.$activeWindow=$window,"keydown"===e.type)return 27===e.which?($windowPopup.hide("fast",(function(){thisObj.windowMenuClickRegistered=!1,$windowPopup.find("li").removeClass("able-focus").attr("tabindex","-1"),$windowButton.focus()})),!1):("close"!==choice&&(this.$activeWindow=$window),!1);if($windowPopup.hide("fast",(function(){thisObj.windowMenuClickRegistered=!1,$windowPopup.find("li").removeClass("able-focus").attr("tabindex","-1")})),"close"!==choice&&$windowButton.focus(),"move"===choice)this.$activeWindow.attr("role","application"),this.showedAlert(which)||(this.showAlert(this.tt.windowMoveAlert,which),"transcript"===which?this.showedTranscriptAlert=!0:"sign"===which&&(this.showedSignAlert=!0)),"keydown"===e.type?this.dragDevice="keyboard":this.dragDevice="mouse",this.startDrag(which,$window),$windowPopup.hide().parent().focus();else if("resize"==choice){var resizeFields=resizeDialog.getInputs();resizeFields&&(resizeFields[0].value=$window.width(),resizeFields[1].value=$window.height()),resizeDialog.show()}else"close"==choice&&("transcript"===which?(this.closingTranscript=!0,this.handleTranscriptToggle()):"sign"===which&&(this.closingSign=!0,this.handleSignToggle()))},AblePlayer.prototype.startDrag=function(which,$element){var thisObj,$windowPopup,zIndex,startPos,newX,newY;return thisObj=this,this.$activeWindow||(this.$activeWindow=$element),this.dragging=!0,"transcript"===which?$windowPopup=this.$transcriptPopup:"sign"===which&&($windowPopup=this.$signPopup),this.showedAlert(which)||(this.showAlert(this.tt.windowMoveAlert,which),"transcript"===which?this.showedTranscriptAlert=!0:"sign"===which&&(this.showedSignAlert=!0)),$windowPopup.is(":visible")&&$windowPopup.hide(),this.updateZIndex(which),startPos=this.$activeWindow.position(),this.dragStartX=startPos.left,this.dragStartY=startPos.top,void 0===this.startMouseX?(this.dragDevice="keyboard",this.dragKeyX=this.dragStartX,this.dragKeyY=this.dragStartY,this.startingDrag=!0):(this.dragDevice="mouse",this.dragOffsetX=this.startMouseX-this.dragStartX,this.dragOffsetY=this.startMouseY-this.dragStartY),this.$activeWindow.addClass("able-drag").css({position:"absolute",top:this.dragStartY+"px",left:this.dragStartX+"px"}).focus(),"mouse"===this.dragDevice?$(document).on("mousemove touchmove",(function(e){thisObj.dragging&&(newX=e.pageX-thisObj.dragOffsetX,newY=e.pageY-thisObj.dragOffsetY,thisObj.resetDraggedObject(newX,newY))})):"keyboard"===this.dragDevice&&this.$activeWindow.on("keydown",(function(e){thisObj.dragging&&thisObj.dragKeys(which,e)})),!1},AblePlayer.prototype.dragKeys=function(which,e){var key,keySpeed,thisObj=this;if(this.startingDrag)return this.startingDrag=!1,!1;switch(keySpeed=10,key=e.which){case 37:case 63234:this.dragKeyX-=10;break;case 38:case 63232:this.dragKeyY-=10;break;case 39:case 63235:this.dragKeyX+=10;break;case 40:case 63233:this.dragKeyY+=10;break;case 13:case 27:return this.endDrag(which),!1;default:return!1}return this.resetDraggedObject(this.dragKeyX,this.dragKeyY),e.preventDefault&&e.preventDefault(),!1},AblePlayer.prototype.resetDraggedObject=function(x,y){this.$activeWindow.css({left:x+"px",top:y+"px"})},AblePlayer.prototype.resizeObject=function(which,width,height){var innerHeight;this.$activeWindow.css({width:width+"px",height:height+"px"}),"transcript"===which&&(innerHeight=height-50,this.$transcriptDiv.css("height",innerHeight+"px"))},AblePlayer.prototype.endDrag=function(which){var thisObj,$window,$windowPopup,$windowButton;thisObj=this,"transcript"===which?($windowPopup=this.$transcriptPopup,$windowButton=this.$transcriptPopupButton):"sign"===which&&($windowPopup=this.$signPopup,$windowButton=this.$signPopupButton),$(document).off("mousemove mouseup touchmove touchup"),this.$activeWindow.off("keydown").removeClass("able-drag"),this.$activeWindow.attr("role","dialog"),this.$activeWindow=null,"keyboard"===this.dragDevice&&$windowButton.focus(),this.dragging=!1,this.updateCookie(which),this.startMouseX=void 0,this.startMouseY=void 0,this.windowMenuClickRegistered=!1,this.finishingDrag=!0,setTimeout((function(){thisObj.finishingDrag=!1}),100)},AblePlayer.prototype.isCloseToCorner=function($window,mouseX,mouseY){var tolerance,position,top,left,width,height,bottom,right;return tolerance=10,top=(position=$window.offset()).top,left=position.left,width=$window.width(),bottom=top+(height=$window.height()),right=left+width,Math.abs(bottom-mouseY)<=10&&Math.abs(right-mouseX)<=10},AblePlayer.prototype.startResize=function(which,$element){var thisObj,$windowPopup,zIndex,startPos,newWidth,newHeight;return thisObj=this,this.$activeWindow=$element,this.resizing=!0,"transcript"===which?$windowPopup=this.$transcriptPopup:"sign"===which&&($windowPopup=this.$signPopup),$windowPopup.is(":visible")&&$windowPopup.hide().parent().focus(),startPos=this.$activeWindow.position(),this.dragKeyX=this.dragStartX,this.dragKeyY=this.dragStartY,this.dragStartWidth=this.$activeWindow.width(),this.dragStartHeight=this.$activeWindow.height(),$(document).on("mousemove touchmove",(function(e){thisObj.resizing&&(newWidth=thisObj.dragStartWidth+(e.pageX-thisObj.startMouseX),newHeight=thisObj.dragStartHeight+(e.pageY-thisObj.startMouseY),thisObj.resizeObject(which,newWidth,newHeight))})),!1},AblePlayer.prototype.endResize=function(which){var $window,$windowPopup,$windowButton;"transcript"===which?($windowPopup=this.$transcriptPopup,$windowButton=this.$transcriptPopupButton):"sign"===which&&($windowPopup=this.$signPopup,$windowButton=this.$signPopupButton),$(document).off("mousemove mouseup touchmove touchup"),this.$activeWindow.off("keydown"),$windowButton.show().focus(),this.resizing=!1,this.$activeWindow.removeClass("able-resize"),this.updateCookie(which),this.windowMenuClickRegistered=!1,this.finishingDrag=!0,setTimeout((function(){this.finishingDrag=!1}),100)}}(jQuery),function($){AblePlayer.prototype.initSignLanguage=function(){"html5"===this.player?(this.signFile=this.$sources.first().attr("data-sign-src"),this.signFile?this.isIOS()?(this.hasSignLanguage=!1,this.debug&&console.log("Sign language has been disabled due to IOS restrictions")):(this.debug&&console.log("This video has an accompanying sign language video: "+this.signFile),this.hasSignLanguage=!0,this.injectSignPlayerCode()):this.hasSignLanguage=!1):this.hasSignLanguage=!1},AblePlayer.prototype.injectSignPlayerCode=function(){var thisObj,signVideoId,signVideoWidth,i,signSrc,srcType,$signSource;for(thisObj=this,signVideoWidth=this.getDefaultWidth("sign"),signVideoId=this.mediaId+"-sign",this.$signVideo=$("<video>",{id:signVideoId,tabindex:"-1"}),this.signVideo=this.$signVideo[0],i=0;i<this.$sources.length;i++){if(signSrc=this.$sources[i].getAttribute("data-sign-src"),srcType=this.$sources[i].getAttribute("type"),!signSrc){this.hasSignLanguage=!1;break}$signSource=$("<source>",{src:signSrc,type:srcType}),this.$signVideo.append($signSource)}this.$signWindow=$("<div>",{class:"able-sign-window",role:"dialog","aria-label":this.tt.sign}),this.$signToolbar=$("<div>",{class:"able-window-toolbar able-"+this.toolbarIconColor+"-controls"}),this.$signWindow.append(this.$signToolbar,this.$signVideo),this.$ableWrapper.append(this.$signWindow),this.initDragDrop("sign"),1===this.prefSign?this.positionDraggableWindow("sign",this.getDefaultWidth("sign")):this.$signWindow.hide()}}(jQuery),function($){var isoLangs={ab:{name:"Abkhaz",nativeName:""},aa:{name:"Afar",nativeName:"Afaraf"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},sq:{name:"Albanian",nativeName:"Shqip"},am:{name:"Amharic",nativeName:""},ar:{name:"Arabic",nativeName:""},an:{name:"Aragonese",nativeName:"Aragons"},hy:{name:"Armenian",nativeName:""},as:{name:"Assamese",nativeName:""},av:{name:"Avaric",nativeName:" ,  "},ae:{name:"Avestan",nativeName:"avesta"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"azrbaycan dili"},bm:{name:"Bambara",nativeName:"bamanankan"},ba:{name:"Bashkir",nativeName:" "},eu:{name:"Basque",nativeName:"euskara, euskera"},be:{name:"Belarusian",nativeName:""},bn:{name:"Bengali",nativeName:""},bh:{name:"Bihari",nativeName:""},bi:{name:"Bislama",nativeName:"Bislama"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},br:{name:"Breton",nativeName:"brezhoneg"},bg:{name:"Bulgarian",nativeName:" "},my:{name:"Burmese",nativeName:""},ca:{name:"Catalan",nativeName:"Catal"},ch:{name:"Chamorro",nativeName:"Chamoru"},ce:{name:"Chechen",nativeName:" "},ny:{name:"Chichewa",nativeName:"chiChea, chinyanja"},zh:{name:"Chinese",nativeName:" (Zhngwn), , "},cv:{name:"Chuvash",nativeName:" "},kw:{name:"Cornish",nativeName:"Kernewek"},co:{name:"Corsican",nativeName:"corsu, lingua corsa"},cr:{name:"Cree",nativeName:""},hr:{name:"Croatian",nativeName:"hrvatski"},cs:{name:"Czech",nativeName:"esky, etina"},da:{name:"Danish",nativeName:"dansk"},dv:{name:"Divehi",nativeName:""},nl:{name:"Dutch",nativeName:"Nederlands, Vlaams"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},et:{name:"Estonian",nativeName:"eesti, eesti keel"},ee:{name:"Ewe",nativeName:"Eegbe"},fo:{name:"Faroese",nativeName:"froyskt"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fi:{name:"Finnish",nativeName:"suomi, suomen kieli"},fr:{name:"French",nativeName:"franais, langue franaise"},ff:{name:"Fula",nativeName:"Fulfulde, Pulaar, Pular"},gl:{name:"Galician",nativeName:"Galego"},ka:{name:"Georgian",nativeName:""},de:{name:"German",nativeName:"Deutsch"},el:{name:"Greek",nativeName:""},gn:{name:"Guaran",nativeName:"Avae"},gu:{name:"Gujarati",nativeName:""},ht:{name:"Haitian",nativeName:"Kreyl ayisyen"},ha:{name:"Hausa",nativeName:"Hausa, "},he:{name:"Hebrew",nativeName:""},hz:{name:"Herero",nativeName:"Otjiherero"},hi:{name:"Hindi",nativeName:", "},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hu:{name:"Hungarian",nativeName:"Magyar"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Originally called Occidental; then Interlingue after WWII"},ga:{name:"Irish",nativeName:"Gaeilge"},ig:{name:"Igbo",nativeName:"Ass Igbo"},ik:{name:"Inupiaq",nativeName:"Iupiaq, Iupiatun"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"slenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:""},ja:{name:"Japanese",nativeName:" ()"},jv:{name:"Javanese",nativeName:"basa Jawa"},kl:{name:"Kalaallisut",nativeName:"kalaallisut, kalaallit oqaasii"},kn:{name:"Kannada",nativeName:""},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:", "},kk:{name:"Kazakh",nativeName:" "},km:{name:"Khmer",nativeName:""},ki:{name:"Kikuyu",nativeName:"Gky"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},ky:{name:"Kyrgyz",nativeName:" "},kv:{name:"Komi",nativeName:" "},kg:{name:"Kongo",nativeName:"KiKongo"},ko:{name:"Korean",nativeName:" (),  ()"},ku:{name:"Kurdish",nativeName:"Kurd, "},kj:{name:"Kuanyama",nativeName:"Kuanyama"},la:{name:"Latin",nativeName:"latine, lingua latina"},lb:{name:"Luxembourgish",nativeName:"Ltzebuergesch"},lg:{name:"Luganda",nativeName:"Luganda"},li:{name:"Limburgish",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Lingla"},lo:{name:"Lao",nativeName:""},lt:{name:"Lithuanian",nativeName:"lietuvi kalba"},lu:{name:"Luba-Katanga",nativeName:""},lv:{name:"Latvian",nativeName:"latvieu valoda"},gv:{name:"Manx",nativeName:"Gaelg, Gailck"},mk:{name:"Macedonian",nativeName:" "},mg:{name:"Malagasy",nativeName:"Malagasy fiteny"},ms:{name:"Malay",nativeName:"bahasa Melayu,  "},ml:{name:"Malayalam",nativeName:""},mt:{name:"Maltese",nativeName:"Malti"},mi:{name:"Mori",nativeName:"te reo Mori"},mr:{name:"Marathi",nativeName:""},mh:{name:"Marshallese",nativeName:"Kajin Maje"},mn:{name:"Mongolian",nativeName:""},na:{name:"Nauru",nativeName:"Ekakair Naoero"},nv:{name:"Navajo",nativeName:"Din bizaad, Dinkeh"},nb:{name:"Norwegian Bokml",nativeName:"Norsk bokml"},nd:{name:"North Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:""},ng:{name:"Ndonga",nativeName:"Owambo"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},ii:{name:"Nuosu",nativeName:" Nuosuhxop"},nr:{name:"South Ndebele",nativeName:"isiNdebele"},oc:{name:"Occitan",nativeName:"Occitan"},oj:{name:"Ojibwe",nativeName:""},cu:{name:"Church Slavonic",nativeName:" "},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:""},os:{name:"Ossetian",nativeName:" "},pa:{name:"Punjabi",nativeName:", "},pi:{name:"Pli",nativeName:""},fa:{name:"Persian",nativeName:""},pl:{name:"Polish",nativeName:"polski"},ps:{name:"Pashto",nativeName:""},pt:{name:"Portuguese",nativeName:"Portugus"},qu:{name:"Quechua",nativeName:"Runa Simi, Kichwa"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"kiRundi"},ro:{name:"Romanian",nativeName:"romn"},ru:{name:"Russian",nativeName:" "},sa:{name:"Sanskrit",nativeName:""},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:",  "},se:{name:"Northern Sami",nativeName:"Davvismegiella"},sm:{name:"Samoan",nativeName:"gagana faa Samoa"},sg:{name:"Sango",nativeName:"yng t sng"},sr:{name:"Serbian",nativeName:" "},gd:{name:"Gaelic",nativeName:"Gidhlig"},sn:{name:"Shona",nativeName:"chiShona"},si:{name:"Sinhalese",nativeName:""},sk:{name:"Slovak",nativeName:"slovenina"},sl:{name:"Slovene",nativeName:"slovenina"},so:{name:"Somali",nativeName:"Soomaaliga, af Soomaali"},st:{name:"Southern Sotho",nativeName:"Sesotho"},es:{name:"Spanish",nativeName:"espaol, castellano"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sw:{name:"Swahili",nativeName:"Kiswahili"},ss:{name:"Swati",nativeName:"SiSwati"},sv:{name:"Swedish",nativeName:"svenska"},ta:{name:"Tamil",nativeName:""},te:{name:"Telugu",nativeName:""},tg:{name:"Tajik",nativeName:", toik, "},th:{name:"Thai",nativeName:""},ti:{name:"Tigrinya",nativeName:""},bo:{name:"Tibetan",nativeName:""},tk:{name:"Turkmen",nativeName:"Trkmen, "},tl:{name:"Tagalog",nativeName:"Wikang Tagalog,  "},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"Trke"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:", tatara, "},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uyghur",nativeName:"Uyurq, "},uk:{name:"Ukrainian",nativeName:""},ur:{name:"Urdu",nativeName:""},uz:{name:"Uzbek",nativeName:"zbek, , "},ve:{name:"Venda",nativeName:"Tshivena"},vi:{name:"Vietnamese",nativeName:"Ting Vit"},vo:{name:"Volapk",nativeName:"Volapk"},wa:{name:"Walloon",nativeName:"Walon"},cy:{name:"Welsh",nativeName:"Cymraeg"},wo:{name:"Wolof",nativeName:"Wollof"},fy:{name:"Western Frisian",nativeName:"Frysk"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:""},yo:{name:"Yoruba",nativeName:"Yorb"},za:{name:"Zhuang",nativeName:"Sa cue, Saw cuengh"},"ar-dz":{name:"Arabic (Algeria)",nativeName:" ()"},"ar-bh":{name:"Arabic (Bahrain)",nativeName:" ()"},"ar-eg":{name:"Arabic (Egypt)",nativeName:" ()"},"ar-iq":{name:"Arabic (Iraq)",nativeName:" ()"},"ar-jo":{name:"Arabic (Jordan)",nativeName:" ()"},"ar-kw":{name:"Arabic (Kuwait)",nativeName:" ()"},"ar-lb":{name:"Arabic (Lebanon)",nativeName:" ()"},"ar-ly":{name:"Arabic (Libya)",nativeName:" ()"},"ar-ma":{name:"Arabic (Morocco)",nativeName:" ( )"},"ar-om":{name:"Arabic (Oman)",nativeName:" ()"},"ar-qa":{name:"Arabic (Qatar)",nativeName:" ()"},"ar-sa":{name:"Arabic (Saudi Arabia)",nativeName:" (  )"},"ar-sy":{name:"Arabic (Syria)",nativeName:" ()"},"ar-tn":{name:"Arabic (Tunisia)",nativeName:" ()"},"ar-ae":{name:"Arabic (U.A.E.)",nativeName:" (  )"},"ar-ye":{name:"Arabic (Yemen)",nativeName:" ()"},"de-at":{name:"German (Austria)",nativeName:"Deutsch (sterreich)"},"de-li":{name:"German (Liechtenstein)",nativeName:"Deutsch (Liechtenstein)"},"de-lu":{name:"German (Luxembourg)",nativeName:"Deutsch (Luxemburg)"},"de-ch":{name:"German (Switzerland)",nativeName:"Deutsch (Schweiz)"},"en-au":{name:"English (Australia)",nativeName:"English (Australia)"},"en-bz":{name:"English (Belize)",nativeName:"English (Belize)"},"en-ca":{name:"English (Canada)",nativeName:"English (Canada)"},"en-ie":{name:"English (Ireland)",nativeName:"English (Ireland)"},"en-jm":{name:"English (Jamaica)",nativeName:"English (Jamaica)"},"en-nz":{name:"English (New Zealand)",nativeName:""},"en-za":{name:"English (South Africa)",nativeName:"English (South Africa)"},"en-tt":{name:"English (Trinidad)",nativeName:"English (Trinidad y Tobago)"},"en-gb":{name:"English (United Kingdom)",nativeName:"English (United Kingdom)"},"en-us":{name:"English (United States)",nativeName:"English (United States)"},"es-ar":{name:"Spanish (Argentina)",nativeName:"Espaol (Argentina)"},"es-bo":{name:"Spanish (Bolivia)",nativeName:"Espaol (Bolivia)"},"es-cl":{name:"Spanish (Chile)",nativeName:"Espaol (Chile)"},"es-co":{name:"Spanish (Colombia)",nativeName:"Espaol (Colombia)"},"es-cr":{name:"Spanish (Costa Rica)",nativeName:"Espaol (Costa Rica)"},"es-do":{name:"Spanish (Dominican Republic)",nativeName:"Espaol (Repblica Dominicana)"},"es-ec":{name:"Spanish (Ecuador)",nativeName:"Espaol (Ecuador)"},"es-sv":{name:"Spanish (El Salvador)",nativeName:"Espaol (El Salvador)"},"es-gt":{name:"Spanish (Guatemala)",nativeName:"Espaol (Guatemala)"},"es-hn":{name:"Spanish (Honduras)",nativeName:"Espaol (Honduras)"},"es-mx":{name:"Spanish (Mexico)",nativeName:"Espaol (Mxico)"},"es-ni":{name:"Spanish (Nicaragua)",nativeName:"Espaol (Nicaragua)"},"es-pa":{name:"Spanish (Panama)",nativeName:"Espaol (Panam)"},"es-py":{name:"Spanish (Paraguay)",nativeName:"Espaol (Paraguay)"},"es-pe":{name:"Spanish (Peru)",nativeName:"Espaol (Per)"},"es-pr":{name:"Spanish (Puerto Rico)",nativeName:"Espaol (Puerto Rico)"},"es-uy":{name:"Spanish (Uruguay)",nativeName:"Espaol (Uruguay)"},"es-ve":{name:"Spanish (Venezuela)",nativeName:"Espaol (Venezuela)"},"fr-be":{name:"French (Belgium)",nativeName:"franais (Belgique)"},"fr-ca":{name:"French (Canada)",nativeName:"franais (Canada)"},"fr-lu":{name:"French (Luxembourg)",nativeName:"franais (Luxembourg)"},"fr-ch":{name:"French (Switzerland)",nativeName:"franais (Suisse)"},"it-ch":{name:"Italian (Switzerland)",nativeName:"italiano (Svizzera)"},"nl-be":{name:"Dutch (Belgium)",nativeName:"Nederlands (Belgi)"},"pt-br":{name:"Portuguese (Brazil)",nativeName:"Portugus (Brasil)"},"sv-fi":{name:"Swedish (Finland)",nativeName:"svenska (Finland)"},"zh-hk":{name:"Chinese (Hong Kong)",nativeName:"()"},"zh-cn":{name:"Chinese (PRC)",nativeName:"()"},"zh-sg":{name:"Chinese (Singapore)",nativeName:"()"},"zh-tw":{name:"Chinese Traditional (Taiwan)",nativeName:""}};AblePlayer.prototype.getLanguageName=function(key){var lang=isoLangs[key];return lang?lang.name:void 0},AblePlayer.prototype.getLanguageNativeName=function(key){var lang=isoLangs[key];return lang?lang.nativeName:void 0}}(jQuery),function($){AblePlayer.prototype.getSupportedLangs=function(){var langs;return["ca","de","en","es","fr","he","it","ja","nb","nl","pt-br","tr","zh-tw"]},AblePlayer.prototype.getTranslationText=function(){var deferred,thisObj,lang,thisObj,msg,translationFile,collapsedLang;return deferred=$.Deferred(),thisObj=this,lang=$("body").attr("lang")?$("body").attr("lang").toLowerCase():$("html").attr("lang")?$("html").attr("lang").toLowerCase():null,this.forceLang||lang&&lang!==this.lang&&(-1!==$.inArray(lang,this.getSupportedLangs())?this.lang=lang:(msg=lang+" is not currently supported. Using default language ("+this.lang+")",this.debug&&console.log(msg))),this.searchLang||(this.searchLang=this.lang),translationFile=this.rootPath+"translations/"+this.lang+".js",this.importTranslationFile(translationFile).then((function(result){collapsedLang=thisObj.lang.replace("-",""),thisObj.tt=eval(collapsedLang),deferred.resolve()})),deferred.promise()},AblePlayer.prototype.importTranslationFile=function(translationFile){var deferred=$.Deferred();return $.getScript(translationFile).done((function(translationVar,textStatus){deferred.resolve(translationVar)})).fail((function(jqxhr,settings,exception){deferred.fail()})),deferred.promise()}}(jQuery),function($){AblePlayer.prototype.computeEndTime=function(startTime,durationTime){var SECONDS=0,MINUTES=1,HOURS=2,startParts=startTime.split(":").reverse().map((function(value){return parseFloat(value)})),durationParts=durationTime.split(":").reverse().map((function(value){return parseFloat(value)})),endTime;return startParts.reduce((function(acc,val,index){var sum=val+durationParts[index];return 0===index&&(sum>60&&(durationParts[index+1]+=1,sum-=60),sum=sum.toFixed(3)),1===index&&sum>60&&(durationParts[index+1]+=1,sum-=60),sum<10&&(sum="0"+sum),acc.push(sum),acc}),[]).reverse().join(":")},AblePlayer.prototype.ttml2webvtt=function(contents){var thisObj=this,xml=thisObj.convert.xml2json(contents,{ignoreComment:!0,alwaysChildren:!0,compact:!0,spaces:2}),vttHeader="WEBVTT\n\n\n",captions,vttCaptions;return JSON.parse(xml).tt.body.div.p.reduce((function(acc,value,index){var text=value._text,isArray=Array.isArray(text),attributes=value._attributes,endTime=thisObj.computeEndTime(attributes.begin,attributes.dur),caption;return acc+(thisObj.computeEndTime(attributes.begin,"00:00:0")+" --\x3e "+thisObj.computeEndTime(attributes.begin,attributes.dur)+"\n"+(isArray?text.join("\n"):text)+"\n\n")}),vttHeader)}}(jQuery),function($){$.doWhen=function(options){return $.Deferred((function(dfd){var opt=$.extend({},{when:null,exec:function(){},interval:100,attempts:100,delayed:0},options,{checkId:null}),startChecking=function(){if(!0===opt.when())return opt.exec.call(dfd.promise()),void dfd.resolve();opt.checkId=setInterval((function(){0===opt.attempts?(clearInterval(opt.checkId),dfd.reject()):(--opt.attempts,!0===opt.when()&&(opt.attempts=0,clearInterval(opt.checkId),opt.exec.call(dfd.promise()),dfd.resolve()))}),opt.interval)};opt.delayed>0?setTimeout(startChecking,Number(opt.delayed)):startChecking()})).promise()}}(jQuery),function($){AblePlayer.prototype.injectVTS=function(){var thisObj,tracks,$heading,$instructions,$p1,$p2,$ul,$li1,$li2,$li3,$fieldset,$legend,i,$radioDiv,radioId,$label,$radio,$saveButton,$savedTable;if(thisObj=this,$("#able-vts").length&&this.vtsTracks.length){for(i in this.langs=[],this.getAllLangs(this.vtsTracks),this.vtsLang=this.lang,$heading=$("<h2>").text("Video Transcript Sorter"),$("#able-vts").append($heading),this.$vtsAlert=$("<div>",{id:"able-vts-alert","aria-live":"polite","aria-atomic":"true"}),$("#able-vts").append(this.$vtsAlert),$instructions=$("<div>",{id:"able-vts-instructions"}),$p1=$("<p>").text("Use the Video Transcript Sorter to perform any of the following tasks:"),$ul=$("<ul>"),$li1=$("<li>").text("Reorder chapters, descriptions, captions, and/or subtitles so they appear in the proper sequence in Able Player's auto-generated transcript."),$li2=$("<li>").text("Modify content or start/end times (all are directly editable within the table)."),$li3=$("<li>").text("Insert new content, such as chapters or descriptions."),$p2=$("<p>").text('When finished editing, click the "Save Changes" button. This will auto-generate new content for all relevant timed text files (chapters, descriptions, captions, and/or subtitles), which can be copied and pasted into separate WebVTT files for use by Able Player.'),$ul.append($li1,$li2,$li3),$instructions.append($p1,$ul,$p2),$("#able-vts").append($instructions),$fieldset=$("<fieldset>"),$legend=$("<legend>").text("Select a language"),$fieldset.append($legend),this.langs)radioId="vts-lang-radio-"+this.langs[i],$radioDiv=$("<div>",{}),$radio=$("<input>",{type:"radio",name:"vts-lang",id:radioId,value:this.langs[i]}).on("click",(function(){thisObj.vtsLang=$(this).val(),thisObj.showVtsAlert("Loading "+thisObj.getLanguageName(thisObj.vtsLang)+" tracks"),thisObj.injectVtsTable("update",thisObj.vtsLang)})),this.langs[i]==this.lang&&$radio.prop("checked",!0),$label=$("<label>",{for:radioId}).text(this.getLanguageName(this.langs[i])),$radioDiv.append($radio,$label),$fieldset.append($radioDiv);var kindOptions,beforeEditing,editedCell,editedContent,i,closestKind;$("#able-vts").append($fieldset),$saveButton=$("<button>",{type:"button",id:"able-vts-save",value:"save"}).text("Save Changes"),$("#able-vts").append($saveButton),this.injectVtsTable("add",this.vtsLang),kindOptions=["captions","chapters","descriptions","subtitles"],$('td[contenteditable="true"]').on("focus",(function(){beforeEditing=$(this).text()})).on("blur",(function(){beforeEditing!=$(this).text()&&(editedCell=$(this).index(),editedContent=$(this).text(),1===editedCell?-1===$.inArray(editedContent,kindOptions)&&("s"===editedContent.substr(0,1)?$(this).text("subtitles"):"d"===editedContent.substr(0,1)?$(this).text("descriptions"):"ch"===editedContent.substr(0,2)?$(this).text("chapters"):$(this).text("captions")):2!==editedCell&&3!==editedCell||$(this).text(thisObj.formatTimestamp(editedContent)))})).on("keydown",(function(e){e.stopPropagation()})),$("#able-vts-save").on("click",(function(e){e.stopPropagation(),"save"==$(this).attr("value")?($(this).attr("value","cancel").text("Return to Editor"),$savedTable=$("#able-vts table"),$("#able-vts-instructions").hide(),$("#able-vts > fieldset").hide(),$("#able-vts table").remove(),$("#able-vts-icon-credit").remove(),thisObj.parseVtsOutput($savedTable)):($(this).attr("value","save").text("Save Changes"),$("#able-vts-output").remove(),$("#able-vts-instructions").show(),$("#able-vts > fieldset").show(),$("#able-vts").append($savedTable),$("#able-vts").append(thisObj.getIconCredit()),thisObj.showVtsAlert("Cancelling saving. Any edits you made have been restored in the VTS table."))}))}},AblePlayer.prototype.setupVtsTracks=function(kind,lang,label,src,contents){var srcFile,vtsCues;srcFile=this.getFilenameFromPath(src),vtsCues=this.parseVtsTracks(contents),this.vtsTracks.push({kind:kind,language:lang,label:label,srcFile:srcFile,cues:vtsCues})},AblePlayer.prototype.getFilenameFromPath=function(path){var lastSlash;return-1===(lastSlash=path.lastIndexOf("/"))?path:path.substr(lastSlash+1)},AblePlayer.prototype.getFilenameFromTracks=function(kind,lang){for(var i=0;i<this.vtsTracks.length;i++)if(this.vtsTracks[i].kind===kind&&this.vtsTracks[i].language===lang)return this.vtsTracks[i].srcFile;return!1},AblePlayer.prototype.parseVtsTracks=function(contents){var rows,timeParts,cues,i,j,thisRow,nextRow,content,blankRow;for(rows=contents.split("\n"),cues=[],i=0;i<rows.length;)if(-1!==(thisRow=rows[i]).indexOf(" --\x3e ")){if(timeParts=thisRow.trim().split(" "),this.isValidTimestamp(timeParts[0])&&this.isValidTimestamp(timeParts[2])){for(content="",j=i+1,blankRow=!1;j<rows.length&&!blankRow;)(nextRow=rows[j].trim()).length>0?content.length>0?content+="\n"+nextRow:content+=nextRow:blankRow=!0,j++;cues.push({start:timeParts[0],end:timeParts[2],content:content}),i=j}}else i++;return cues},AblePlayer.prototype.isValidTimestamp=function(timestamp){return!!/^[0-9:,.]*$/.test(timestamp)},AblePlayer.prototype.formatTimestamp=function(timestamp){var firstPart,lastPart,firstPart=timestamp.substr(0,timestamp.lastIndexOf(".")+1),lastPart;if((lastPart=timestamp.substr(timestamp.lastIndexOf(".")+1)).length>3)lastPart=lastPart.substr(0,3);else if(lastPart.length<3)for(;lastPart.length<3;)lastPart+="0";return firstPart+lastPart},AblePlayer.prototype.injectVtsTable=function(action,lang){var $table,headers,i,$tr,$th,$td,rows,rowNum,rowId;for("update"===action&&($("#able-vts table").remove(),$("#able-vts-icon-credit").remove()),$table=$("<table>",{lang:lang}),$tr=$("<tr>",{lang:"en"}),headers=["Row #","Kind","Start","End","Content","Actions"],i=0;i<headers.length;i++)$th=$("<th>",{scope:"col"}).text(headers[i]),"Actions"===headers[i]&&$th.addClass("actions"),$tr.append($th);for($table.append($tr),rows=this.getAllRows(lang),i=0;i<rows.length;i++)$tr=$("<tr>",{id:rowId="able-vts-row-"+(rowNum=i+1),class:"kind-"+rows[i].kind}),$td=$("<td>").text(rowNum),$tr.append($td),$td=$("<td>",{contenteditable:"true"}).text(rows[i].kind),$tr.append($td),$td=$("<td>",{contenteditable:"true"}).text(rows[i].start),$tr.append($td),$td=$("<td>",{contenteditable:"true"}).text(rows[i].end),$tr.append($td),$td=$("<td>",{contenteditable:"true"}).text(rows[i].content),$tr.append($td),$td=this.addVtsActionButtons(rowNum,rows.length),$tr.append($td),$table.append($tr);$("#able-vts").append($table),$("#able-vts").append(this.getIconCredit())},AblePlayer.prototype.addVtsActionButtons=function(rowNum,numRows){var thisObj,$td,buttons,i,button,$button,$svg,$g,pathString,pathString2,$path,$path2;for(thisObj=this,$td=$("<td>"),buttons=["up","down","insert","delete"],i=0;i<buttons.length;i++)"up"===(button=buttons[i])?rowNum>1&&($button=$("<button>",{id:"able-vts-button-up-"+rowNum,title:"Move up","aria-label":"Move Row "+rowNum+" up"}).on("click",(function(el){thisObj.onClickVtsActionButton(el.currentTarget)})),$svg=$("<svg>",{focusable:"false","aria-hidden":"true",x:"0px",y:"0px",width:"254.296px",height:"254.296px",viewBox:"0 0 254.296 254.296",style:"enable-background:new 0 0 254.296 254.296"}),$path=$("<path>",{d:pathString="M249.628,176.101L138.421,52.88c-6.198-6.929-16.241-6.929-22.407,0l-0.381,0.636L4.648,176.101c-6.198,6.897-6.198,18.052,0,24.981l0.191,0.159c2.892,3.305,6.865,5.371,11.346,5.371h221.937c4.577,0,8.613-2.161,11.41-5.594l0.064,0.064C255.857,194.153,255.857,182.998,249.628,176.101z"}),$g=$("<g>").append($path),$svg.append($g),$button.append($svg),$button.html($button.html()),$td.append($button)):"down"===button?rowNum<numRows&&($button=$("<button>",{id:"able-vts-button-down-"+rowNum,title:"Move down","aria-label":"Move Row "+rowNum+" down"}).on("click",(function(el){thisObj.onClickVtsActionButton(el.currentTarget)})),$svg=$("<svg>",{focusable:"false","aria-hidden":"true",x:"0px",y:"0px",width:"292.362px",height:"292.362px",viewBox:"0 0 292.362 292.362",style:"enable-background:new 0 0 292.362 292.362"}),$path=$("<path>",{d:pathString="M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z"}),$g=$("<g>").append($path),$svg.append($g),$button.append($svg),$button.html($button.html()),$td.append($button)):"insert"===button?($button=$("<button>",{id:"able-vts-button-insert-"+rowNum,title:"Insert row below","aria-label":"Insert row before Row "+rowNum}).on("click",(function(el){thisObj.onClickVtsActionButton(el.currentTarget)})),$svg=$("<svg>",{focusable:"false","aria-hidden":"true",x:"0px",y:"0px",width:"401.994px",height:"401.994px",viewBox:"0 0 401.994 401.994",style:"enable-background:new 0 0 401.994 401.994"}),$path=$("<path>",{d:pathString="M394,154.175c-5.331-5.33-11.806-7.994-19.417-7.994H255.811V27.406c0-7.611-2.666-14.084-7.994-19.414C242.488,2.666,236.02,0,228.398,0h-54.812c-7.612,0-14.084,2.663-19.414,7.993c-5.33,5.33-7.994,11.803-7.994,19.414v118.775H27.407c-7.611,0-14.084,2.664-19.414,7.994S0,165.973,0,173.589v54.819c0,7.618,2.662,14.086,7.992,19.411c5.33,5.332,11.803,7.994,19.414,7.994h118.771V374.59c0,7.611,2.664,14.089,7.994,19.417c5.33,5.325,11.802,7.987,19.414,7.987h54.816c7.617,0,14.086-2.662,19.417-7.987c5.332-5.331,7.994-11.806,7.994-19.417V255.813h118.77c7.618,0,14.089-2.662,19.417-7.994c5.329-5.325,7.994-11.793,7.994-19.411v-54.819C401.991,165.973,399.332,159.502,394,154.175z"}),$g=$("<g>").append($path),$svg.append($g),$button.append($svg),$button.html($button.html()),$td.append($button)):"delete"===button&&($button=$("<button>",{id:"able-vts-button-delete-"+rowNum,title:"Delete row ","aria-label":"Delete Row "+rowNum}).on("click",(function(el){thisObj.onClickVtsActionButton(el.currentTarget)})),$svg=$("<svg>",{focusable:"false","aria-hidden":"true",x:"0px",y:"0px",width:"508.52px",height:"508.52px",viewBox:"0 0 508.52 508.52",style:"enable-background:new 0 0 508.52 508.52"}),$path=$("<path>",{d:pathString="M397.281,31.782h-63.565C333.716,14.239,319.478,0,301.934,0h-95.347c-17.544,0-31.782,14.239-31.782,31.782h-63.565c-17.544,0-31.782,14.239-31.782,31.782h349.607C429.063,46.021,414.825,31.782,397.281,31.782z"}),$path2=$("<path>",{d:pathString2="M79.456,476.737c0,17.544,14.239,31.782,31.782,31.782h286.042c17.544,0,31.782-14.239,31.782-31.782V95.347H79.456V476.737z M333.716,174.804c0-8.772,7.151-15.891,15.891-15.891c8.74,0,15.891,7.119,15.891,15.891v254.26c0,8.74-7.151,15.891-15.891,15.891c-8.74,0-15.891-7.151-15.891-15.891V174.804zM238.369,174.804c0-8.772,7.119-15.891,15.891-15.891c8.74,0,15.891,7.119,15.891,15.891v254.26c0,8.74-7.151,15.891-15.891,15.891c-8.772,0-15.891-7.151-15.891-15.891V174.804z M143.021,174.804c0-8.772,7.119-15.891,15.891-15.891c8.772,0,15.891,7.119,15.891,15.891v254.26c0,8.74-7.119,15.891-15.891,15.891c-8.772,0-15.891-7.151-15.891-15.891V174.804z"}),$g=$("<g>").append($path,$path2),$svg.append($g),$button.append($svg),$button.html($button.html()),$td.append($button));return $td},AblePlayer.prototype.updateVtsActionButtons=function($buttons,nextRowNum){var i,$thisButton,id,label,newId,newLabel;for(i=0;i<$buttons.length;i++)id=($thisButton=$buttons.eq(i)).attr("id"),label=$thisButton.attr("aria-label"),newId=id.replace(/[0-9]+/g,nextRowNum),newLabel=label.replace(/[0-9]+/g,nextRowNum),$thisButton.attr("id",newId),$thisButton.attr("aria-label",newLabel)},AblePlayer.prototype.getIconCredit=function(){var credit;return credit='<div id="able-vts-icon-credit">Action buttons made by <a href="https://www.flaticon.com/authors/elegant-themes">Elegant Themes</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a> are licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a></div>'},AblePlayer.prototype.getAllLangs=function(tracks){var i;for(i in tracks)tracks[i].hasOwnProperty("language")&&-1===$.inArray(tracks[i].language,this.langs)&&(this.langs[this.langs.length]=tracks[i].language)},AblePlayer.prototype.getAllRows=function(lang){var i,track,c,cues;for(cues=[],i=0;i<this.vtsTracks.length;i++)if((track=this.vtsTracks[i]).language==lang)for(c in track.cues)cues.push({kind:track.kind,lang:lang,id:track.cues[c].id,start:track.cues[c].start,end:track.cues[c].end,content:track.cues[c].content});return cues.sort((function(a,b){return a.start>b.start?1:-1})),cues},AblePlayer.prototype.onClickVtsActionButton=function(el){var idParts,action,rowNum;action=(idParts=$(el).attr("id").split("-"))[3],rowNum=idParts[4],"up"==action?this.moveRow(rowNum,"up"):"down"==action?this.moveRow(rowNum,"down"):"insert"==action?this.insertRow(rowNum):"delete"==action&&this.deleteRow(rowNum)},AblePlayer.prototype.insertRow=function(rowNum){var $table,$rows,numRows,newRowNum,newRowId,newTimes,$tr,$td,$select,options,i,$option,newKind,newClass,$parentRow,i,nextRowNum,$buttons;for(numRows=($rows=($table=$("#able-vts table")).find("tr")).length-1,newRowNum=parseInt(rowNum)+1,$tr=$("<tr>",{id:newRowId="able-vts-row-"+newRowNum}),$td=$("<td>").text(newRowNum),$tr.append($td),newKind=null,$select=$("<select>",{id:"able-vts-kind-"+newRowNum,"aria-label":"What kind of track is this?",placeholder:"Select a kind"}).on("change",(function(){newKind=$(this).val(),newClass="kind-"+newKind,$parentRow=$(this).closest("tr"),$(this).parent().text(newKind),$parentRow.addClass(newClass)})),options=["","captions","chapters","descriptions","subtitles"],i=0;i<options.length;i++)$option=$("<option>",{value:options[i]}).text(options[i]),$select.append($option);for($td=$("<td>").append($select),$tr.append($td),$td=$("<td>",{contenteditable:"true"}),$tr.append($td),$td=$("<td>",{contenteditable:"true"}),$tr.append($td),$td=$("<td>",{contenteditable:"true"}),$tr.append($td),$td=this.addVtsActionButtons(newRowNum,numRows),$tr.append($td),$table.find("tr").eq(rowNum).after($tr),i=newRowNum;i<=numRows;i++)nextRowNum=i+1,$rows.eq(i).attr("id","able-vts-row-"+nextRowNum),$rows.eq(i).find("td").eq(0).text(nextRowNum),$buttons=$rows.eq(i).find("button"),this.updateVtsActionButtons($buttons,nextRowNum);this.adjustTimes(newRowNum),this.showVtsAlert("A new row "+newRowNum+" has been inserted"),$select.focus()},AblePlayer.prototype.deleteRow=function(rowNum){var $table,$rows,numRows,i,nextRowNum,$buttons;for(($table=$("#able-vts table"))[0].deleteRow(rowNum),numRows=($rows=$table.find("tr")).length-1,i=rowNum;i<=numRows;i++)nextRowNum=i,$rows.eq(i).attr("id","able-vts-row-"+nextRowNum),$rows.eq(i).find("td").eq(0).text(nextRowNum),$buttons=$rows.eq(i).find("button"),this.updateVtsActionButtons($buttons,nextRowNum);this.showVtsAlert("Row "+rowNum+" has been deleted")},AblePlayer.prototype.moveRow=function(rowNum,direction){var $rows,$thisRow,otherRowNum,$otherRow,newTimes,msg;$rows=$("#able-vts table").find("tr"),$thisRow=$("#able-vts table").find("tr").eq(rowNum),"up"==direction?(otherRowNum=parseInt(rowNum)-1,($otherRow=$("#able-vts table").find("tr").eq(otherRowNum)).before($thisRow)):"down"==direction&&(otherRowNum=parseInt(rowNum)+1,($otherRow=$("#able-vts table").find("tr").eq(otherRowNum)).after($thisRow)),$thisRow.attr("id","able-vts-row-"+otherRowNum),$thisRow.find("td").eq(0).text(otherRowNum),this.updateVtsActionButtons($thisRow.find("button"),otherRowNum),$otherRow.attr("id","able-vts-row-"+rowNum),$otherRow.find("td").eq(0).text(rowNum),this.updateVtsActionButtons($otherRow.find("button"),rowNum),this.adjustTimes(otherRowNum),msg="Row "+rowNum+" has been moved "+direction,msg+=" and is now Row "+otherRowNum,this.showVtsAlert(msg)},AblePlayer.prototype.adjustTimes=function(rowNum){var minDuration,$rows,prevRowNum,nextRowNum,$row,$prevRow,$nextRow,kind,prevKind,nextKind,start,prevStart,nextStart,end,prevEnd,nextEnd;(minDuration=[]).captions=.001,minDuration.descriptions=.001,minDuration.chapters=.001,kind=($row=($rows=$("#able-vts table").find("tr")).eq(rowNum)).is('[class^="kind-"]')?this.getKindFromClass($row.attr("class")):"captions",start=this.getSecondsFromColonTime($row.find("td").eq(2).text()),end=this.getSecondsFromColonTime($row.find("td").eq(3).text()),rowNum>1?(prevRowNum=rowNum-1,prevKind=($prevRow=$rows.eq(prevRowNum)).is('[class^="kind-"]')?this.getKindFromClass($prevRow.attr("class")):null,prevStart=this.getSecondsFromColonTime($prevRow.find("td").eq(2).text()),prevEnd=this.getSecondsFromColonTime($prevRow.find("td").eq(3).text())):(prevRowNum=null,$prevRow=null,prevKind=null,prevStart=null,prevEnd=null),rowNum<$rows.length-1?(nextRowNum=rowNum+1,nextKind=($nextRow=$rows.eq(nextRowNum)).is('[class^="kind-"]')?this.getKindFromClass($nextRow.attr("class")):null,nextStart=this.getSecondsFromColonTime($nextRow.find("td").eq(2).text()),nextEnd=this.getSecondsFromColonTime($nextRow.find("td").eq(3).text())):(nextRowNum=null,$nextRow=null,nextKind=null,nextStart=null,nextEnd=null),isNaN(start)?(null==prevKind&&(prevKind="captions",$prevRow.attr("class","kind-captions"),$prevRow.find("td").eq(1).html("captions")),"captions"===prevKind?(start=(parseFloat(prevEnd)+.001).toFixed(3),end=nextStart?(parseFloat(nextStart)-.001).toFixed(3):(parseFloat(start)+minDuration[kind]).toFixed(3)):"chapters"===prevKind?(start=(parseFloat(prevStart)+.001).toFixed(3),end=nextStart?(parseFloat(nextStart)-.001).toFixed(3):(parseFloat(start)+minDurartion[kind]).toFixed(3)):"descriptions"===prevKind&&(start=(parseFloat(prevStart)+minDuration.descriptions).toFixed(3),end=(parseFloat(start)+minDuration.descriptions).toFixed(3))):prevStart?prevStart<start?start<nextStart||(nextStart=(parseFloat(start)+minDuration[kind]).toFixed(3),nextEnd=(parseFloat(nextStart)+minDuration[nextKind]).toFixed(3)):(start=(parseFloat(prevStart)+minDuration[prevKind]).toFixed(3),end=(parseFloat(start)+minDuration[kind]).toFixed(3)):start<nextStart||(nextStart=(parseFloat(start)+minDuration[kind]).toFixed(3),nextEnd=(parseFloat(nextStart)+minDuration[nextKind]).toFixed(3)),end-start<minDuration[kind]&&(end=(parseFloat(start)+minDuration[kind]).toFixed(3),nextStart&&(nextStart=(parseFloat(end)+.001).toFixed(3))),$row.find("td").eq(2).text(this.formatSecondsAsColonTime(start,!0)),$row.find("td").eq(3).text(this.formatSecondsAsColonTime(end,!0)),$prevRow&&($prevRow.find("td").eq(2).text(this.formatSecondsAsColonTime(prevStart,!0)),$prevRow.find("td").eq(3).text(this.formatSecondsAsColonTime(prevEnd,!0))),$nextRow&&($nextRow.find("td").eq(2).text(this.formatSecondsAsColonTime(nextStart,!0)),$nextRow.find("td").eq(3).text(this.formatSecondsAsColonTime(nextEnd,!0)))},AblePlayer.prototype.getKindFromClass=function(myclass){var kindStart,kindEnd,kindLength,kind;return kindStart=myclass.indexOf("kind-")+5,kindLength=-1==(kindEnd=myclass.indexOf(" ",kindStart))?myclass.length-kindStart:kindEnd-kindStart,kind=myclass.substr(kindStart,kindLength)},AblePlayer.prototype.showVtsAlert=function(message){this.$vtsAlert.text(message).show().delay(3e3).fadeOut("slow")},AblePlayer.prototype.parseVtsOutput=function($table){var lang,i,kinds,kind,vtt,$rows,start,end,content,$output;for(lang=$table.attr("lang"),kinds=["captions","chapters","descriptions","subtitles"],vtt={},i=0;i<kinds.length;i++)vtt[kind=kinds[i]]="WEBVTT\n\n";if(($rows=$table.find("tr")).length>0)for(i=0;i<$rows.length;i++)kind=$rows.eq(i).find("td").eq(1).text(),-1!==$.inArray(kind,kinds)&&(start=$rows.eq(i).find("td").eq(2).text(),end=$rows.eq(i).find("td").eq(3).text(),content=$rows.eq(i).find("td").eq(4).text(),void 0!==start&&void 0!==end&&(vtt[kind]+=start+" --\x3e "+end+"\n","undefined"!==content&&(vtt[kind]+=content),vtt[kind]+="\n\n"));for($output=$("<div>",{id:"able-vts-output"}),$("#able-vts").append($output),i=0;i<kinds.length;i++)vtt[kind=kinds[i]].length>8&&this.showWebVttOutput(kind,vtt[kind],lang)},AblePlayer.prototype.showWebVttOutput=function(kind,vttString,lang){var $heading,filename,$p,pText,$textarea;$heading=$("<h3>").text(kind.charAt(0).toUpperCase()+kind.slice(1)),pText="If you made changes, copy/paste the following content ",(filename=this.getFilenameFromTracks(kind,lang))?(pText+="to replace the original content of your "+this.getLanguageName(lang)+" ",pText+="<em>"+kind+"</em> WebVTT file (<strong>"+filename+"</strong>)."):pText+="into a new "+this.getLanguageName(lang)+" <em>"+kind+"</em> WebVTT file.",$p=$("<p>",{class:"able-vts-output-instructions"}).html(pText),$textarea=$("<textarea>").text(vttString),$("#able-vts-output").append($heading,$p,$textarea)}}(jQuery),function($){AblePlayer.prototype.initVimeoPlayer=function(){var thisObj,deferred,promise,containerId,vimeoId,autoplay,videoDimensions,options;return thisObj=this,promise=(deferred=new $.Deferred).promise(),containerId=this.mediaId+"_vimeo",this.$mediaContainer.prepend($("<div>").attr("id",containerId)),vimeoId=this.vimeoDescId&&this.prefDesc?this.vimeoDescId:this.vimeoId,this.activeVimeoId=vimeoId,autoplay=this.autoplay&&this.okToPlay?"true":"false",(videoDimensions=this.getVimeoDimensions(this.activeVimeoId,containerId))?(this.vimeoWidth=videoDimensions[0],this.vimeoHeight=videoDimensions[1],this.aspectRatio=thisObj.ytWidth/thisObj.ytHeight):(this.vimeoWidth=null,this.vimeoHeight=null),options={id:vimeoId,width:this.vimeoWidth,controls:!1},this.vimeoPlayer=new Vimeo.Player(containerId,options),this.vimeoPlayer.ready().then((function(){thisObj.hasPlaylist||(thisObj.$media.remove(),thisObj.vimeoPlaybackRate=1,thisObj.vimeoPlayer.setPlaybackRate(thisObj.vimeoPlaybackRate).then((function(playbackRate){thisObj.vimeoSupportsPlaybackRateChange=!0})).catch((function(error){thisObj.vimeoSupportsPlaybackRateChange=!1})),deferred.resolve())})),promise},AblePlayer.prototype.getVimeoPaused=function(){var deferred,promise;return promise=(deferred=new $.Deferred).promise(),this.vimeoPlayer.getPaused().then((function(paused){deferred.resolve(paused)})),promise},AblePlayer.prototype.getVimeoEnded=function(){var deferred,promise;return promise=(deferred=new $.Deferred).promise(),this.vimeoPlayer.getEnded().then((function(ended){deferred.resolve(ended)})),promise},AblePlayer.prototype.getVimeoState=function(){var thisObj,deferred,promise,promises,gettingPausedPromise,gettingEndedPromise;return thisObj=this,promise=(deferred=new $.Deferred).promise(),promises=[],gettingPausedPromise=this.vimeoPlayer.getPaused(),gettingEndedPromise=this.vimeoPlayer.getEnded(),promises.push(gettingPausedPromise),promises.push(gettingEndedPromise),gettingPausedPromise.then((function(paused){deferred.resolve(paused)})),gettingEndedPromise.then((function(ended){deferred.resolve(ended)})),$.when.apply($,promises).then((function(){deferred.resolve()})),promise},AblePlayer.prototype.getVimeoDimensions=function(vimeoContainerId){var d,url,$iframe,width,height;return d=[],void 0!==this.playerMaxWidth?(d[0]=this.playerMaxWidth,void 0!==this.playerMaxHeight&&(d[1]=this.playerMaxHeight),d):void 0!==$("#"+vimeoContainerId)&&(width=($iframe=$("#"+vimeoContainerId)).width(),height=$iframe.height(),width>0&&height>0)&&(d[0]=width,d[1]=height,d)},AblePlayer.prototype.resizeVimeoPlayer=function(youTubeId,youTubeContainerId){var d,width,height;void 0!==this.aspectRatio?this.restoringAfterFullScreen?(this.youTubePlayer&&this.youTubePlayer.setSize(this.ytWidth,this.ytHeight),this.restoringAfterFullScreen=!1):(width=this.$ableWrapper.parent().width(),height=Math.round(width/this.aspectRatio),this.$ableWrapper.css({"max-width":width+"px",width:""}),this.youTubePlayer.setSize(width,height),this.fullscreen?this.youTubePlayer.setSize(width,height):this.youTubePlayer.setSize(this.ytWidth,this.ytHeight)):(d=this.getYouTubeDimensions(youTubeId,youTubeContainerId))&&(width=d[0],height=d[1],width>0&&height>0&&(this.aspectRatio=width/height,this.ytWidth=width,this.ytHeight=height,width!==this.$ableWrapper.width()&&(width=this.$ableWrapper.width(),height=Math.round(width/this.aspectRatio),this.youTubePlayer&&this.youTubePlayer.setSize(width,height))))},AblePlayer.prototype.setupVimeoCaptions=function(){var deferred=new $.Deferred,promise=deferred.promise(),thisObj,googleApiPromise,youTubeId,i;return thisObj=this,youTubeId=this.youTubeDescId&&this.prefDesc?this.youTubeDescId:this.youTubeId,"undefined"!=typeof youTubeDataAPIKey?$.doWhen({when:function(){return googleApiReady},interval:100,attempts:1e3}).done((function(){deferred.resolve()})).fail((function(){console.log("Unable to initialize Google API. YouTube captions are currently unavailable.")})):deferred.resolve(),promise},AblePlayer.prototype.getVimeoCaptionTracks=function(){var deferred=new $.Deferred,promise=deferred.promise(),thisObj,i,trackId,isDefaultTrack;return thisObj=this,this.vimeoPlayer.getTextTracks().then((function(tracks){if(tracks.length){for(i=0;i<tracks.length;i++)thisObj.hasCaptions=!0,thisObj.usingVimeoCaptions=!0,1===thisObj.prefCaptions?thisObj.captionsOn=!0:thisObj.captionsOn=!1,isDefaultTrack=tracks[i].language===thisObj.lang,thisObj.tracks.push({kind:tracks[i].kind,language:tracks[i].language,label:tracks[i].label,def:isDefaultTrack});thisObj.setupPopups("captions"),deferred.resolve()}else thisObj.hasCaptions=!1,thisObj.usingVimeoCaptions=!1,deferred.resolve()})),promise},AblePlayer.prototype.initVimeoCaptionModule=function(){var options,fontSize,displaySettings;if((options=this.youTubePlayer.getOptions()).length){for(var i=0;i<options.length;i++){if("cc"==options[i]){this.ytCaptionModule="cc",this.hasCaptions||(this.hasCaptions=!0,this.usingYouTubeCaptions=!0);break}if("captions"==options[i]){this.ytCaptionModule="captions",this.hasCaptions||(this.hasCaptions=!0,this.usingYouTubeCaptions=!0);break}}void 0!==this.ytCaptionModule&&(this.usingYouTubeCaptions?(this.youTubePlayer.setOption(this.ytCaptionModule,"track",{languageCode:this.captionLang}),this.youTubePlayer.setOption(this.ytCaptionModule,"fontSize",this.translatePrefs("size",this.prefCaptionsSize,"youtube"))):this.youTubePlayer.unloadModule(this.ytCaptionModule))}else this.hasCaptions=!1,this.usingYouTubeCaptions=!1;this.refreshControls("captions")},AblePlayer.prototype.getVimeoPosterUrl=function(youTubeId,width){var url="https://img.youtube.com/vi/"+youTubeId;return"120"==width?url+"/default.jpg":"320"==width?url+"/hqdefault.jpg":"480"==width?url+"/hqdefault.jpg":"640"==width&&url+"/sddefault.jpg"}}(jQuery);